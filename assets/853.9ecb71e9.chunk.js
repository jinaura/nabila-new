/*! For license information please see 853.9ecb71e9.chunk.js.LICENSE.txt */
(self.webpackChunkrose_inc_web=self.webpackChunkrose_inc_web||[]).push([[853],{64853:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>ke,defaultScrollState:()=>Ne,initMouseDragScroll:()=>Me});n(35666),n(26699),n(32023),n(74916),n(64765),n(92222),n(69826),n(82526),n(41817),n(21249),n(44048),n(9653),n(47042),n(54747),n(41539),n(39714),n(15306),n(57327),n(69600),n(47941),n(38880),n(49337),n(32165),n(66992),n(78783),n(33948),n(68309),n(91038),n(88674);var r=n(67294),o=n(96974),a=n(56311),i=(n(23123),n(73054)),l=n(12464),c=n(36334),s=n(45410),u=n(85518);function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const f=function(e){var t=e.pluginPortal,n=e.pluginManifest,o=e.unityInstance,m=e.children,f=e.setShowVtoButtons,p=e.handleInstallNewUnityInstance,v=e.setOutboundState,h=e.setIsPluginReady,g=e.setPluginAborted,b=e.setPrintDebug,y="https://cdn.roseinc.beautylabs.com/production/132459692220/vto/plugin/",E=d((0,i.Z)({src:y+n.loaderUrl,crossorigin:"anonymous"}),2),_=E[0],S=E[1],w=(0,r.useRef)(null),A=t,I=o,N=(0,r.useContext)(a.Zn);return(0,r.useEffect)((function(){if(!_&&!S&&null!==w.current&&null===I){var e,t=window.UnityLoader,r=!1;if(u.gn){var o=u.MM.split(".");o.length>=1&&Number(o[0])>=15&&(2===t.SystemInfo.hasWebGL&&(t.SystemInfo.hasWebGL=1),r=!0)}null===(e=c.Z.instance)||void 0===e||e.registerExtraDetailsHandler((function(e){var n=t.SystemInfo;e._has_web_gl=n.hasWebGL,e._has_wasm=n.hasWasm,e._has_threads=n.hasThreads,e._gpu=n.gpu}));var i="true"==={NODE_ENV:"production",REACT_APP_MODEL_URI_PREFIX:"https://cdn.roseinc.beautylabs.com/production/132459692220/vto/models/",REACT_APP_SKIN_TONE_API:"https://skintone.roseinc.beautylabs.com",REACT_APP_NAME:"rose-inc-web",REACT_APP_ERROR_REPORT_URL:"https://errors.amyris.beautylabs.com/errorReport",REACT_APP_DEFAULT_MODEL_NAME_EYEBROWS:"FUTest-Brows-6",REACT_APP_ACCOUNT_SYSTEM_PASSWORD_REQUIRE_NUMBERS:"true",REACT_APP_BI_ACCOUNT_APP_NAME:"account",REACT_APP_PLUGIN_BASE:"https://cdn.roseinc.beautylabs.com/production/132459692220/vto/plugin/",REACT_APP_BI_APP_NAME:"roseinc_web",REACT_APP_ACCOUNT_NAMESPACE:"roseinc",REACT_APP_BI_LIVESHOPPING_APP_NAME:"liveshopping",REACT_APP_COMMIT_HASH:"cd7b583f591f3aa5f0b8067f9bb0c2bb2fe804eb",REACT_APP_STOREFRONT_API_KEY:"f1c1eba5583bb760c097cba85a0b1a51",REACT_APP_ACCOUNT_BACKEND_BASE_URI:"https://account.amyris.beautylabs.com/api/consumer/roseinc",REACT_APP_LIVESHOPPING_NAMESPACE:"roseinc",REACT_APP_ACCOUNT_SYSTEM_PASSWORD_REQUIRE_SYMBOLS:"true",REACT_APP_FUSIONFS_URI_PREFIX:"https://cdn.roseinc.beautylabs.com/production/132459692220/vto/plugin/data/",REACT_APP_BI_REPORT_URI:"https://logs.amyris.beautylabs.com/bi",REACT_APP_DEFAULT_MODEL_NAME_FULL_FACE_AND_EYES:"VTO-5-2",REACT_APP_ACCOUNT_SYSTEM_PASSWORD_REQUIRE_LOWERCASE:"true",REACT_APP_STOREFRONT_DOMAIN:"www.roseinc.com",REACT_APP_ACCOUNT_SYSTEM_PASSWORD_REQUIRE_UPPERCASE:"true",REACT_APP_ACCOUNT_PAGE_NAME:"myaccount",REACT_APP_VERSION:"0.0.1",REACT_APP_DEFAULT_MODEL_NAME_FULL_FACE_AND_MOUTH:"VTO-5-1",REACT_APP_CDN_ROOT:"https://cdn.roseinc.beautylabs.com/production/132459692220",REACT_APP_TEXTURE_URI_PREFIX:"https://cdn.roseinc.beautylabs.com/production/vto/textures/",REACT_APP_LIVE_SHOPPING_BACKEND_BASE_URI:"https://liveshopping.amyris.beautylabs.com/api/roseinc",REACT_APP_ACCOUNT_SYSTEM_PASSWORD_MIN_LEN:"8"}.REACT_APP_PRINT_DEBUG;b(i);var l=(0,s.PD)(N);if(void 0===l)return void console.error("Unknown model");t.UnityCache.setLogFunction((function(e){i&&console.log("[UnityCache] "+e)}));var d=t.instantiate(w.current,y+n.buildUrl,{Module:{webglContextAttributes:{preserveDrawingBuffer:!0},print:function(e){i&&console.log(e)},printErr:function(e){console.error(e)},onAbort:function(e){var t,n=""+e;console.error("Virtual Make-up Try-on Plugin Aborted: "+n),null===(t=c.Z.instance)||void 0===t||t.reportError("Virtual Make-up Try-on Plugin Aborted",n),-1!==n.indexOf("Out of executable memory in function")?g(a.ij.OutOfExecutableMemory):g(a.ij.GeneralAbort)},vto:{inbound:{config:{clientErrorUrl:"https://errors.amyris.beautylabs.com/errorReport",clientBiUrl:"".concat("https://logs.amyris.beautylabs.com/bi","?appName=").concat("roseinc_web","&tableName={0}"),appName:"rose-inc-web",appVersion:"0.0.1",appGitCommitId:"cd7b583f591f3aa5f0b8067f9bb0c2bb2fe804eb",textureUriPrefix:"https://cdn.roseinc.beautylabs.com/production/vto/textures/",fusionFsContentVersion:n.contentVersion,fusionFsUriPrefix:"https://cdn.roseinc.beautylabs.com/production/132459692220/vto/plugin/data/",modelUriPrefix:"https://cdn.roseinc.beautylabs.com/production/132459692220/vto/models/",host:document.location.host,page:document.location.href},state:{StillImageUrl:null,LoadModelsWithNoCamera:!1,ShowCamera:!1,UseRearCamera:!1,EnableFaceSegmentation:!0,EnableFaceKeyPoints:!0,EnableNails:!1},modelInputOptions:{envelopViewportWhenLandscapeVideo:!1,envelopViewportWhenPortraitVideo:!0},greyscaleEdges:!1,faceModels:l.modelList,augmentationMaskSlider:0,allProductOpacitySlider:1,cameraAllowList:undefined,cameraDenyList:undefined,showFrameRateText:!1,segmentationProbabilityMin:.25,segmentationRenderMode:(0,s.gw)(l),disableZBuffer:r},onOutboundSync:function(e){i&&console.log("setOutboundState",JSON.parse(JSON.stringify(e))),v(e),e.isLoading||h(!e.isLoading)}}},onProgress:function(e,t){0},compatibilityCheck:function(e,n,r){t.SystemInfo.hasWebGL?t.SystemInfo.hasWasm?(f(!0),n()):(console.error("WebAssembly not supported"),g(a.ij.WasmNotSupported),r()):(console.error("WebGL not supported"),g(a.ij.WebGLNotSupported),r())}});return p(d),i&&console.log("Created Plugin Instance"),function(){console.error("Plugin was unmounted!")}}}),[_,S,w]),r.createElement(r.Fragment,null,r.createElement(l.Nq,{node:A},r.createElement("div",{id:"unityContainer",className:"unity-container",ref:w,style:{pointerEvents:"none"}})),m)};var p,v=n(43109),h=(n(34553),function(e,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)}),g=(function(e){!function(){var t={}.hasOwnProperty;function n(){for(var e=[],r=0;r<arguments.length;r++){var o=arguments[r];if(o){var a=typeof o;if("string"===a||"number"===a)e.push(o);else if(Array.isArray(o)&&o.length){var i=n.apply(null,o);i&&e.push(i)}else if("object"===a)for(var l in o)t.call(o,l)&&o[l]&&e.push(l)}}return e.join(" ")}e.exports?(n.default=n,e.exports=n):window.classNames=n}()}(p={path:undefined,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&p.path)}},p.exports),p.exports);function b(e,t,n){var r,o,a,i,l;function c(){var s=Date.now()-i;s<t&&s>=0?r=setTimeout(c,t-s):(r=null,n||(l=e.apply(a,o),a=o=null))}null==t&&(t=100);var s=function(){a=this,o=arguments,i=Date.now();var s=n&&!r;return r||(r=setTimeout(c,t)),s&&(l=e.apply(a,o),a=o=null),l};return s.clear=function(){r&&(clearTimeout(r),r=null)},s.flush=function(){r&&(l=e.apply(a,o),a=o=null,clearTimeout(r),r=null)},s}b.debounce=b;var y=b;!function(e,t){void 0===t&&(t={});var n=t.insertAt;if("undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(".indiana-scroll-container {\n  overflow: auto; }\n  .indiana-scroll-container--dragging {\n    scroll-behavior: auto !important; }\n    .indiana-scroll-container--dragging > * {\n      pointer-events: none;\n      cursor: -webkit-grab;\n      cursor: grab; }\n  .indiana-scroll-container--hide-scrollbars {\n    overflow: hidden;\n    overflow: -moz-scrollbars-none;\n    -ms-overflow-style: none;\n    scrollbar-width: none; }\n    .indiana-scroll-container--hide-scrollbars::-webkit-scrollbar {\n      display: none !important;\n      height: 0 !important;\n      width: 0 !important;\n      background: transparent !important;\n      -webkit-appearance: none !important; }\n  .indiana-scroll-container--native-scroll {\n    overflow: auto; }\n\n.indiana-dragging {\n  cursor: -webkit-grab;\n  cursor: grab; }\n");var E,_=(E="indiana-scroll-container",function(e,t){if(!e)return E;var n;"string"==typeof e?n=e:t=e;var r=E;return n&&(r+="__"+n),r+(t?Object.keys(t).reduce((function(e,n){var o=t[n];return o&&(e+=" "+("boolean"==typeof o?r+"--"+n:r+"--"+n+"_"+o)),e}),""):"")});const S=function(e){function t(t){var n=e.call(this,t)||this;return n.onEndScroll=function(){n.scrolling=!1,!n.pressed&&n.started&&n.processEnd()},n.onScroll=function(e){var t=n.container.current;t.scrollLeft===n.scrollLeft&&t.scrollTop===n.scrollTop||(n.scrolling=!0,n.processScroll(e),n.onEndScroll())},n.onTouchStart=function(e){var t=n.props.nativeMobileScroll;if(n.isDraggable(e.target))if(n.internal=!0,t&&n.scrolling)n.pressed=!0;else{var r=e.touches[0];n.processClick(e,r.clientX,r.clientY),!t&&n.props.stopPropagation&&e.stopPropagation()}},n.onTouchEnd=function(e){var t=n.props.nativeMobileScroll;n.pressed&&(!n.started||n.scrolling&&t?n.pressed=!1:n.processEnd(),n.forceUpdate())},n.onTouchMove=function(e){var t=n.props.nativeMobileScroll;if(n.pressed&&(!t||!n.isMobile)){var r=e.touches[0];r&&n.processMove(e,r.clientX,r.clientY),e.preventDefault(),n.props.stopPropagation&&e.stopPropagation()}},n.onMouseDown=function(e){n.isDraggable(e.target)&&n.isScrollable()&&(n.internal=!0,-1!==n.props.buttons.indexOf(e.button)&&(n.processClick(e,e.clientX,e.clientY),e.preventDefault(),n.props.stopPropagation&&e.stopPropagation()))},n.onMouseMove=function(e){n.pressed&&(n.processMove(e,e.clientX,e.clientY),e.preventDefault(),n.props.stopPropagation&&e.stopPropagation())},n.onMouseUp=function(e){n.pressed&&(n.started?n.processEnd():(n.internal=!1,n.pressed=!1,n.forceUpdate(),n.props.onClick&&n.props.onClick(e)),e.preventDefault(),n.props.stopPropagation&&e.stopPropagation())},n.container=r.createRef(),n.onEndScroll=y(n.onEndScroll,300),n.scrolling=!1,n.started=!1,n.pressed=!1,n.internal=!1,n.getRef=n.getRef.bind(n),n}return function(e,t){function n(){this.constructor=e}h(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.componentDidMount=function(){var e=this.props.nativeMobileScroll,t=this.container.current;window.addEventListener("mouseup",this.onMouseUp),window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd),t.addEventListener("touchstart",this.onTouchStart,{passive:!1}),t.addEventListener("mousedown",this.onMouseDown,{passive:!1}),e&&(this.isMobile=this.isMobileDevice(),this.isMobile&&this.forceUpdate())},t.prototype.componentWillUnmount=function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},t.prototype.getElement=function(){return this.container.current},t.prototype.isMobileDevice=function(){return void 0!==window.orientation||-1!==navigator.userAgent.indexOf("IEMobile")},t.prototype.isDraggable=function(e){var t=this.props.ignoreElements;if(t){var n=e.closest(t);return null===n||n.contains(this.getElement())}return!0},t.prototype.isScrollable=function(){var e=this.container.current;return e&&(e.scrollWidth>e.clientWidth||e.scrollHeight>e.clientHeight)},t.prototype.processClick=function(e,t,n){var r=this.container.current;this.scrollLeft=r.scrollLeft,this.scrollTop=r.scrollTop,this.clientX=t,this.clientY=n,this.pressed=!0},t.prototype.processStart=function(e){void 0===e&&(e=!0);var t=this.props.onStartScroll;this.started=!0,e&&document.body.classList.add("indiana-dragging"),t&&t({external:!this.internal}),this.forceUpdate()},t.prototype.processScroll=function(e){if(this.started){var t=this.props.onScroll;t&&t({external:!this.internal})}else this.processStart(!1)},t.prototype.processMove=function(e,t,n){var r=this.props,o=r.horizontal,a=r.vertical,i=r.activationDistance,l=r.onScroll,c=this.container.current;this.started?(o&&(c.scrollLeft-=t-this.clientX),a&&(c.scrollTop-=n-this.clientY),l&&l({external:!this.internal}),this.clientX=t,this.clientY=n,this.scrollLeft=c.scrollLeft,this.scrollTop=c.scrollTop):(o&&Math.abs(t-this.clientX)>i||a&&Math.abs(n-this.clientY)>i)&&(this.clientX=t,this.clientY=n,this.processStart())},t.prototype.processEnd=function(){var e=this.props.onEndScroll;this.container.current&&e&&e({external:!this.internal}),this.pressed=!1,this.started=!1,this.scrolling=!1,this.internal=!1,document.body.classList.remove("indiana-dragging"),this.forceUpdate()},t.prototype.getRef=function(e){[this.container,this.props.innerRef].forEach((function(t){t&&("function"==typeof t?t(e):t.current=e)}))},t.prototype.render=function(){var e=this.props,t=e.children,n=e.className,o=e.style,a=e.hideScrollbars,i=e.component;return r.createElement(i,{className:g(n,_({dragging:this.pressed,"hide-scrollbars":a,"native-scroll":this.isMobile})),style:o,ref:this.getRef,onScroll:this.onScroll},t)},t.defaultProps={nativeMobileScroll:!0,hideScrollbars:!0,activationDistance:10,vertical:!0,horizontal:!0,stopPropagation:!1,style:{},component:"div",buttons:[0]},t}(r.PureComponent),w=n.p+"5017082a8684793cf5f31201103e7f0d.svg",A=n.p+"3e5acd52da97aff199fd40d9556c3dfb.svg",I=n.p+"f32697590731e3e217656c30924f931b.svg",N=n.p+"388ba4e40ab43f8ceaaf0a782673b436.svg",C=n.p+"c9226901a1538c8d4f35733571d54259.svg",L=n.p+"0a41b8b6d5ebf5501e9dda54168e924b.svg";var P=n(73293),T=n(73902);const M=n.p+"4daf48f99e877baba3623ac772bc73b6.svg";function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function x(e){var t=(0,r.useRef)(null);function n(e){var n=t.current.container.current;n.children.length<=e&&(e=n.children.length-1);var r=n.children[e];if(r){if(g){var o=document.querySelector(".product_carousel_thumb_wrapper");o.parentNode.scrollTo({top:o.children[e].offsetTop,behavior:"smooth"})}var a=t.current.container.current.scrollLeft,i=r.offsetLeft-n.offsetLeft;Math.abs(a-i)>5&&(t.current.container.current.scrollLeft=r.offsetLeft-n.offsetLeft),h(e)}}function o(t){e.selectedModel===t||null===t?(e.setSelectedModel(null),n(0)):(e.setSelectedModel(t),n(e.media.findIndex((function(e){return void 0!==e.model})))),f(!1)}var a=k((0,r.useState)(Ne),2),i=a[0],l=a[1],c=(0,r.useRef)(!0);(0,r.useEffect)((function(){document.querySelectorAll(".product_carousel_thumb_scroll").forEach((function(e){return Me(e,i,c,!1,10,void 0,l)}))})),(0,r.useEffect)((function(){document.querySelectorAll(".product_carousel_thumbs img[draggable=false]").forEach((function(e){e.addEventListener("mousedown",(function(e){return e.preventDefault()}))}))}),[]);var s=(0,T.df)();(0,r.useEffect)((function(){n(v)}),[s]);var u=6;s>=768&&(s<1110&&(u=5),s<900&&(u=4));var d=k((0,r.useState)(!1),2),m=d[0],f=d[1],p=k((0,r.useState)(0),2),v=p[0],h=p[1],g=e.media.length>1,b=0!==v,y=v!==e.media.length-1,E=k((0,r.useState)(!0),2),_=E[0],O=E[1],x=(0,P.nD)(),D=(0,r.useCallback)((function(){e.setLoading(!1),document.querySelectorAll(".product_page_wrapper").forEach((function(e){return e.style.marginTop="0px"}))}),[e]),R="product_scroll_container align-items-center",B="product_scroll";return e.media.length>1&&(R+=" d-flex",B+=" d-flex"),r.createElement(r.Fragment,null,e.isVtoProduct?r.createElement(r.Fragment,null,r.createElement("div",{className:m?"product_options_all_screen_close":"product_options_all_screen_close d-none",onClick:function(){f(!1)}}),r.createElement("button",{className:m?"product_vto_on_switch d-none":"product_vto_on_switch",onClick:function(){e.turnVtoOn()}},r.createElement("svg",{className:"tryon-icon",version:"1.1",xmlns:"http://www.w3.org/2000/svg",height:"20px",viewBox:"0 0 100 100"},r.createElement("g",{id:"Layer_1"},r.createElement("rect",{x:"-20.5",y:"-20.5",className:"st12",width:"150",height:"150"}),r.createElement("g",null,r.createElement("path",{className:"st1",d:"M48.7,18.2c-0.8-0.8-2.1-0.8-2.9,0L29.1,35.5c-0.8,0.8-0.8,2.1,0,2.9c0.4,0.4,0.9,0.6,1.4,0.6 c0.5,0,1.1-0.2,1.5-0.6l16.7-17.3C49.5,20.3,49.5,19,48.7,18.2z"}),r.createElement("path",{className:"st1",d:"M30.6,30c0.5,0,1.1-0.2,1.5-0.6l8.4-8.6c0.8-0.8,0.8-2.1,0-2.9c-0.8-0.8-2.1-0.8-2.9,0l-8.4,8.6 c-0.8,0.8-0.8,2.1,0,2.9C29.5,29.8,30.1,30,30.6,30z"}),r.createElement("path",{className:"st1",d:"M53.5,56.8c0-1.9-1.6-3.5-3.5-3.5c-1.9,0-3.5,1.6-3.5,3.5c0,1.9,1.6,3.5,3.5,3.5 C51.9,60.3,53.5,58.7,53.5,56.8z"}),r.createElement("path",{className:"st1",d:"M78.3,92h-25V71.9c18.2-1.7,32.5-16.8,32.5-35.2C85.9,17.2,69.8,1.4,50,1.4S14.1,17.2,14.1,36.7 c0,18.4,14.3,33.5,32.5,35.2V92h-25c-1.8,0-3.3,1.5-3.3,3.3c0,1.8,1.5,3.3,3.3,3.3h56.6c1.8,0,3.3-1.5,3.3-3.3 C81.6,93.4,80.1,92,78.3,92z M20.8,36.7C20.8,20.9,33.9,8,50,8s29.2,12.9,29.2,28.7c0,15.8-13.1,28.7-29.2,28.7 S20.8,52.5,20.8,36.7z"}))),r.createElement("g",{id:"Layer_2"})),r.createElement("span",null,"Try on")),r.createElement("div",{className:m?"product_options_modal product_options_modal_right":"product_options_modal product_options_modal_right d-none"},r.createElement("button",{className:"product_options_modal_button".concat(null===e.selectedModel?" selected":""),onClick:function(){o(null)}},"All"),r.createElement("button",{className:"product_options_modal_button".concat("Deep"===e.selectedModel?" selected":""),onClick:function(){o("Deep")}},"Deep"),r.createElement("button",{className:"product_options_modal_button".concat("Medium"===e.selectedModel?" selected":""),onClick:function(){o("Medium")}},"Medium"),r.createElement("button",{className:"product_options_modal_button".concat("Light"===e.selectedModel?" selected":""),onClick:function(){o("Light")}},"Light"),r.createElement("button",{className:"product_options_modal_button",onClick:function(){f(!1),e.turnVtoOn()}},"You"))):e.carouselShowShadeFinderLink&&r.createElement("div",{className:"carousel-sf-link"},r.createElement("svg",{className:"tryon-icon",version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",height:"20px",viewBox:"0 0 100 100"},r.createElement("g",{id:"Layer_1"},r.createElement("path",{className:"st1",d:"M97.4,92.1L74.1,68.8C88.6,51.4,86.2,25.5,68.8,11S25.5-1.2,11,16.3C-3.5,33.7-1.2,59.6,16.3,74.1 c15.2,12.7,37.3,12.7,52.5,0l23.3,23.3c1.5,1.5,3.8,1.5,5.3,0C98.9,96,98.9,93.6,97.4,92.1z M42.6,76.1c-18.5,0-33.5-15-33.5-33.5 C9,24.1,24.1,9,42.6,9s33.5,15,33.5,33.5C76.1,61.1,61.1,76.1,42.6,76.1z"}),r.createElement("g",null,r.createElement("path",{className:"st1",d:"M42.6,60.9c-2.4,0-4.8-0.6-7-1.7c-9.3-5-7.5-15.5-5.3-20.4c0.9-1.9,2.5-4.2,4.2-6.8c0.8-1.1,1.6-2.3,2.3-3.4 c1.9-3,3.5-5.7,4.1-6.8c0.3-0.6,0.9-0.9,1.6-0.9c0.7,0,1.3,0.4,1.6,1c0.6,1.1,2.2,3.8,4.1,6.8c0.7,1.1,1.5,2.3,2.3,3.4 c1.7,2.5,3.4,4.9,4.2,6.8c2.2,4.9,4,15.4-5.3,20.3C47.4,60.4,45,60.9,42.6,60.9z M42.6,25.1c-0.8,1.4-1.9,3.2-3.2,5.2 c-0.8,1.2-1.6,2.3-2.4,3.5c-1.7,2.4-3.2,4.7-4,6.3c-1.8,4-3.4,12.5,4,16.4c3.5,1.9,7.7,1.9,11.2,0l0,0c7.3-3.9,5.8-12.5,4-16.4 c-0.8-1.6-2.3-3.9-4-6.3c-0.8-1.2-1.6-2.3-2.4-3.5C44.5,28.3,43.4,26.5,42.6,25.1z M41.6,23.3C41.6,23.3,41.6,23.3,41.6,23.3 C41.6,23.3,41.6,23.3,41.6,23.3z M43.6,23.3C43.6,23.3,43.6,23.3,43.6,23.3C43.6,23.3,43.6,23.3,43.6,23.3z"}))),r.createElement("g",{id:"Layer_2"})),r.createElement("a",{href:"/pages/shade-finder/"},"Find my shade")),e.featureTag?r.createElement("div",{className:"product_feature_tag ".concat(g?"product_feature_tag_60px":""," ")},e.featureTag):null,g&&r.createElement(r.Fragment,null,r.createElement("div",{className:"product_carousel_left_arrow\n                        ".concat(b&&" cursor-pointer")},r.createElement("img",{onClick:b?function(){return n(v-1)}:void 0,src:b?w:N,alt:"Arrow left"})),r.createElement("div",{className:"product_carousel_right_arrow\n                        ".concat(y&&" cursor-pointer")},r.createElement("img",{onClick:y?function(){return n(v+1)}:void 0,src:y?A:C,alt:"Arrow right"})),r.createElement("a",{href:"#preview",onClick:function(e){return x||e.preventDefault()}},r.createElement("div",{className:"product_carousel_thumbs"},r.createElement("div",{className:"product_carousel_thumb_scroll",onScroll:function(e){var t=e.target,n=t.firstChild.clientHeight-t.clientHeight;O(t.scrollTop+1<n)}},r.createElement("div",{className:"product_carousel_thumb_wrapper"},e.media.map((function(t,o){return"video"===t.mediaType?r.createElement(r.Fragment,null,r.createElement("video",{key:o,className:o===v?"product_carousel_thumb_in_view":"product_carousel_thumb",preload:"auto",onClick:function(){return c.current&&n(o)},playsInline:!0,"webkit-playsinline":"true",draggable:!1,title:void 0!==t.altText&&""!==t.altText?t.altText:"Product Video"},r.createElement("source",{src:"".concat(t.originalSrc,"#t=0.5"),type:"video/mp4"})),r.createElement("img",{key:o+e.media.length,src:M,draggable:!1,alt:""})):r.createElement("img",{key:o,className:o===v?"product_carousel_thumb_in_view":"product_carousel_thumb",src:"".concat(t.originalSrc,"&").concat(t.originalSrc.includes("cdn.shopify")?"width=100":"transform=resize=100"),srcSet:"\n                                                ".concat(t.originalSrc,"&").concat(t.originalSrc.includes("cdn.shopify")?"width=100":"transform=resize=100"," 100w,\n                                                ").concat(t.originalSrc,"&").concat(t.originalSrc.includes("cdn.shopify")?"width=150":"transform=resize=150"," 150w\n                                                "),alt:void 0!==t.altText&&""!==t.altText?t.altText:"Product Image",fetchPriority:"high",onClick:function(){return c.current&&n(o)},draggable:!1})})))),e.media.length>u&&r.createElement("img",{className:_?"cursor-pointer":"arrow-disabled",src:_?I:L,alt:"Arrow down",onClick:function(e){var t,n=null===(t=e.target.parentElement)||void 0===t?void 0:t.querySelector(".product_carousel_thumb_scroll"),r=null==n?void 0:n.firstChild;null==n||n.scrollTo({top:r.clientHeight-n.clientHeight,behavior:"smooth"})}})))),r.createElement("div",{className:B},r.createElement(S,{vertical:!1,className:R,ref:t,onEndScroll:function(){n(function(){for(var e=t.current.container.current,n=0;n<e.children.length;++n){var r=e.children[n],o=r.offsetLeft-e.offsetLeft;if(e.scrollLeft<=o+r.clientWidth/2)return n}return e.children.length-1}())}},e.media.map((function(t,n){var o=function(){};return 0===n&&(o=D),r.createElement("div",{className:"product_carousel",key:n},t.mediaType&&"video"===t.mediaType?r.createElement("video",{id:"product_video_bottom",className:"video__bottom",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,preload:"auto",onLoad:o,onError:o},r.createElement("source",{src:t.originalSrc,type:"video/mp4"})):r.createElement(r.Fragment,null,0===n&&e.badge&&r.createElement("div",{className:"badge-img__wrapper"},r.createElement("img",{src:e.badge[0].originalSrc,srcSet:"\n                                                        ".concat(e.badge[0].originalSrc,"&transform=resize=200 200w,\n                                                        ").concat(e.badge[0].originalSrc,"&transform=resize=300 300w\n                                                        "),alt:void 0!==e.badge[0].altText&&""!==e.badge[0].altText?e.badge[0].altText:"Product Award Certification",fetchPriority:"high",className:"badge-img"})),r.createElement("img",{className:"product_carousel-image",src:"".concat(t.originalSrc,"&").concat(t.originalSrc.includes("cdn.shopify")?"width=1200":"transform=resize=1200"),srcSet:"\n                                            ".concat(t.originalSrc,"&").concat(t.originalSrc.includes("cdn.shopify")?"width=600":"transform=resize=600"," 600w,\n                                            ").concat(t.originalSrc,"&").concat(t.originalSrc.includes("cdn.shopify")?"width=900":"transform=resize=900"," 900w,\n                                            ").concat(t.originalSrc,"&").concat(t.originalSrc.includes("cdn.shopify")?"width=1200":"transform=resize=1200"," 1200w,\n                                            ").concat(t.originalSrc,"&").concat(t.originalSrc.includes("cdn.shopify")?"width=1600":"transform=resize=1600"," 1600w,\n                                            ").concat(t.originalSrc,"&").concat(t.originalSrc.includes("cdn.shopify")?"width=1900":"transform=resize=1900"," 1900w\n                                            "),alt:void 0!==t.altText&&""!==t.altText?t.altText:"Product Image",fetchPriority:0===n?"high":"auto",onLoad:o,onError:o})))}))),g&&r.createElement("div",{className:"pdp_dot_container"},e.media.map((function(e,t){return r.createElement(r.Fragment,null,r.createElement("button",{key:t,onClick:function(){return c.current&&n(t)},className:t===v?"dot_in_view":"dot"}))})))))}function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){B(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F(e){return function(e){if(Array.isArray(e))return z(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||U(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n}(e,t)||U(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){if(e){if("string"==typeof e)return z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(e,t):void 0}}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var q=(new Date).getTime();const W=function(e){var t,n=e.setLoading,o=e.productsForDisplay,i=e.currentProduct,s=e.currentProductVariant,u=e.setCurrentProductVariant,d=e.setColorSelected,m=e.setBestMatch,p=e.onVTOPage,h=(0,a.Qc)(),g=V((0,r.useState)(null),2),b=g[0],y=g[1],E=V((0,r.useState)(!1),2),_=E[0],S=E[1];(0,r.useEffect)((function(){fetch("https://cdn.roseinc.beautylabs.com/production/132459692220/vto/plugin/manifest.json?"+q).then(function(){var e,t=(e=regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok){e.next=8;break}return e.t0=y,e.next=4,t.json();case 4:e.t1=e.sent,(0,e.t0)(e.t1),e.next=10;break;case 8:console.error("Failed to download Virtual Make-up Try-on manifest: ",t),z(a.ij.ManifestDownloadFailed);case 10:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){j(a,r,o,i,l,"next",e)}function l(e){j(a,r,o,i,l,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}()).catch((function(e){var t;console.error("Failed to download Virtual Make-up Try-on manifest: ",e),null===c.Z||void 0===c.Z||null===(t=c.Z.instance)||void 0===t||t.reportError(null==e?void 0:e.message,null==e?void 0:e.stack),z(a.ij.ManifestDownloadFailed)}))}),[]);var w,A=V((0,r.useState)(h.unityInstance),2),I=A[0],N=A[1],C=I,L=V((0,r.useState)(h.printDebug),2),T=L[0],M=L[1],k=V((0,r.useState)(h.isPluginReady),2),O=k[0],D=k[1],B=V((0,r.useState)(h.pluginAborted),2),U=B[0],z=B[1],W=V((0,r.useState)(h.showVtoButtons),2),X=W[0],H=W[1],Y=V((0,r.useState)(h.outbound),2),G=Y[0],Z=Y[1],K=V((0,r.useState)((0,l.oD)()),1)[0],$=V((0,r.useState)(""),2),J=$[0],Q=$[1],ee=V((0,r.useState)(null),2),te=ee[0],ne=ee[1],re=V((0,r.useState)(null),2),oe=re[0],ae=re[1],ie=V((0,r.useState)(!1),2),le=ie[0],ce=ie[1],se=V((0,r.useState)(.5),2),ue=se[0],de=se[1],me=V((0,r.useState)(null),2),fe=me[0],pe=me[1],ve=V((0,r.useState)(!1),2),he=ve[0],ge=ve[1],be=void 0!==(null==(w=i)?void 0:w.variants.find((function(e){return void 0!==e.vto&&Object.keys(e.vto).length>0}))),ye=V((0,r.useState)(null),2),Ee=ye[0],_e=ye[1],Se=(0,P.nD)(),we=(0,r.useMemo)((function(){var e,t,n,r,o,a;return[null==s?void 0:s.image].concat(F((null==i||null===(e=i.images[0])||void 0===e?void 0:e.originalSrc)!==(null==s||null===(t=s.image)||void 0===t?void 0:t.originalSrc)?[null==i?void 0:i.images[0]]:[]),F(null!==(n=null==s?void 0:s.extraImages)&&void 0!==n?n:[]),F(null!==(r=null==i?void 0:i.images.slice(1))&&void 0!==r?r:[]),F(null!==(o=null==i?void 0:i.extraImages)&&void 0!==o?o:[]),F(null!==(a=null==i?void 0:i.videos)&&void 0!==a?a:[]),F(null!=i&&i.pdpV2||"Deep"!==Ee&&null!==Ee||null==s||!s.modelDeepImages?[]:s.modelDeepImages.map((function(e){return R(R({},e),{},{model:"Deep"})}))),F(null!=i&&i.pdpV2||"Medium"!==Ee&&null!==Ee||null==s||!s.modelMediumImages?[]:s.modelMediumImages.map((function(e){return R(R({},e),{},{model:"Medium"})}))),F(null!=i&&i.pdpV2||"Light"!==Ee&&null!==Ee||null==s||!s.modelLightImages?[]:s.modelLightImages.map((function(e){return R(R({},e),{},{model:"Light"})}))),[Se&&!(null!=i&&i.pdpV2)&&(null==i?void 0:i.smearImageMobile)&&i.smearImageMobile[0],Se&&!(null!=i&&i.pdpV2)&&(null==i?void 0:i.bottomMediaMobile)&&i.bottomMediaMobile[0]]).filter(Boolean)}),[s,i,Ee,Se]);(0,r.useEffect)((function(){_&&n(!1)}),[_,n]);var Ae=null!==(t=null==s?void 0:s.image)&&void 0!==t?t:null==i?void 0:i.images[0];return r.createElement("div",{className:_?"product_preview_wrapper_vto":"product_preview_wrapper"},be&&r.createElement(r.Fragment,null,i&&b?r.createElement(a.Zn.Provider,{value:{data:{productsForDisplay:o,currentProductVariant:s,currentProduct:i,isPluginReady:O,pluginPortal:K,pluginAborted:U,outbound:G,unityInstance:I,printDebug:T,showVtoButtons:X,showAugmentationMaskSlider:le,augmentationMaskSlider:le?ue:0,vtoLookType:te,vtoVariant:J,sourceImage:fe,sourcePromptOpen:he,imageTaken:oe},setCurrentProductVariant:function(e){return u(e)},syncInboundState:function(e,t){T&&console.log("Sync inbound: "+t,JSON.parse(JSON.stringify(e.Module.vto.inbound))),e.Module.vto.syncInbound&&(e.Module.vto.syncInbound(t),e.Module.vto.pausePlayer(!1))},setShowAugmentationMaskSlider:function(e){ce(e)},setAugmentationMaskSlider:function(e){de(e)},setImageTaken:function(e){ae(e)},setVtoLookType:function(e){ne(e)},setVtoVariant:function(e){Q(e)},setSourceImage:function(e){pe(e)},setSourcePromptOpen:function(e){ge(e)},setColorSelected:function(e){d(e)},setBestMatch:function(e){m(e)}}},r.createElement(f,{pluginManifest:b,unityInstance:I,pluginPortal:K,setShowVtoButtons:function(e){return H(e)},handleInstallNewUnityInstance:function(e){N(e),C=e},setOutboundState:function(e){var t=C.Module.vto,n=t.inbound;e.isLoading||n.state.ShowCamera&&!n.state.StillImageUrl||t.pausePlayer(!0),Z(e)},setIsPluginReady:function(e){!O&&e&&D(e)},setPluginAborted:z,setPrintDebug:M},r.createElement(v.Z,{showPlugin:_,setShowPlugin:S,onVTOPage:p}))):null),_?null:p?r.createElement(r.Fragment,null,(null==i?void 0:i.badge)&&r.createElement("div",{className:"badge-img__wrapper"},r.createElement("img",{src:null==i?void 0:i.badge[0].originalSrc,srcSet:"\n                                        ".concat(null==i?void 0:i.badge[0].originalSrc,"&transform=resize=200 200w,\n                                        ").concat(null==i?void 0:i.badge[0].originalSrc,"&transform=resize=300 300w\n                                        "),alt:void 0!==(null==i?void 0:i.badge[0].altText)&&""!==(null==i?void 0:i.badge[0].altText)?null==i?void 0:i.badge[0].altText:"Product Award Certification",fetchPriority:"high",className:"badge-img"})),r.createElement("img",{id:"placeholder_image_vto_page",src:null==Ae?void 0:Ae.originalSrc,srcSet:"\n                            ".concat(null==Ae?void 0:Ae.originalSrc,"&").concat(null!=Ae&&Ae.originalSrc.includes("cdn.shopify")?"width=600":"transform=resize=600"," 600w,\n                            ").concat(null==Ae?void 0:Ae.originalSrc,"&").concat(null!=Ae&&Ae.originalSrc.includes("cdn.shopify")?"width=900":"transform=resize=900"," 900w,\n                            ").concat(null==Ae?void 0:Ae.originalSrc,"&").concat(null!=Ae&&Ae.originalSrc.includes("cdn.shopify")?"width=1200":"transform=resize=1200"," 1200w,\n                            ").concat(null==Ae?void 0:Ae.originalSrc,"&").concat(null!=Ae&&Ae.originalSrc.includes("cdn.shopify")?"width=1600":"transform=resize=1600"," 1600w,\n                            ").concat(null==Ae?void 0:Ae.originalSrc,"&").concat(null!=Ae&&Ae.originalSrc.includes("cdn.shopify")?"width=1900":"transform=resize=1900"," 1900w\n                            "),alt:null==Ae?void 0:Ae.altText,fetchPriority:"high",onLoad:function(){return n(!1)},draggable:!1})):r.createElement(x,{setLoading:n,isVtoProduct:be,badge:null==i?void 0:i.badge,featureTag:null==i?void 0:i.featureTag,selectedModel:Ee,setSelectedModel:_e,media:we,turnVtoOn:function(){return ge(!0)},carouselShowShadeFinderLink:null==i?void 0:i.carouselShowShadeFinderLink}))};function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function H(e){return function(e){if(Array.isArray(e))return Y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Y(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var G,Z,K,$,J,Q=(G=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'],Z=function(){function e(t){var n=t.targetModal,r=t.triggers,o=void 0===r?[]:r,a=t.onShow,i=void 0===a?function(){}:a,l=t.onClose,c=void 0===l?function(){}:l,s=t.openTrigger,u=void 0===s?"data-micromodal-trigger":s,d=t.closeTrigger,m=void 0===d?"data-micromodal-close":d,f=t.openClass,p=void 0===f?"is-open":f,v=t.disableScroll,h=void 0!==v&&v,g=t.disableFocus,b=void 0!==g&&g,y=t.awaitCloseAnimation,E=void 0!==y&&y,_=t.awaitOpenAnimation,S=void 0!==_&&_,w=t.debugMode,A=void 0!==w&&w;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.modal=document.getElementById(n),this.config={debugMode:A,disableScroll:h,openTrigger:u,closeTrigger:m,openClass:p,onShow:i,onClose:c,awaitCloseAnimation:E,awaitOpenAnimation:S,disableFocus:b},o.length>0&&this.registerTriggers.apply(this,H(o)),this.onClick=this.onClick.bind(this),this.onKeydown=this.onKeydown.bind(this)}var t,n;return t=e,(n=[{key:"registerTriggers",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.filter(Boolean).forEach((function(t){t.addEventListener("click",(function(t){return e.showModal(t)}))}))}},{key:"showModal",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.activeElement=document.activeElement,this.modal.setAttribute("aria-hidden","false"),this.modal.classList.add(this.config.openClass),this.scrollBehaviour("disable"),this.addEventListeners(),this.config.awaitOpenAnimation){var n=function t(){e.modal.removeEventListener("animationend",t,!1),e.setFocusToFirstNode()};this.modal.addEventListener("animationend",n,!1)}else this.setFocusToFirstNode();this.config.onShow(this.modal,this.activeElement,t)}},{key:"closeModal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.modal;if(this.modal.setAttribute("aria-hidden","true"),this.removeEventListeners(),this.scrollBehaviour("enable"),this.activeElement&&this.activeElement.focus&&this.activeElement.focus(),this.config.onClose(this.modal,this.activeElement,e),this.config.awaitCloseAnimation){var n=this.config.openClass;this.modal.addEventListener("animationend",(function e(){t.classList.remove(n),t.removeEventListener("animationend",e,!1)}),!1)}else t.classList.remove(this.config.openClass)}},{key:"closeModalById",value:function(e){this.modal=document.getElementById(e),this.modal&&this.closeModal()}},{key:"scrollBehaviour",value:function(e){if(this.config.disableScroll){var t=document.querySelector("body");switch(e){case"enable":Object.assign(t.style,{overflow:""});break;case"disable":Object.assign(t.style,{overflow:"hidden"})}}}},{key:"addEventListeners",value:function(){this.modal.addEventListener("touchstart",this.onClick),this.modal.addEventListener("click",this.onClick),document.addEventListener("keydown",this.onKeydown)}},{key:"removeEventListeners",value:function(){this.modal.removeEventListener("touchstart",this.onClick),this.modal.removeEventListener("click",this.onClick),document.removeEventListener("keydown",this.onKeydown)}},{key:"onClick",value:function(e){(e.target.hasAttribute(this.config.closeTrigger)||e.target.parentNode.hasAttribute(this.config.closeTrigger))&&(e.preventDefault(),e.stopPropagation(),this.closeModal(e))}},{key:"onKeydown",value:function(e){27===e.keyCode&&this.closeModal(e),9===e.keyCode&&this.retainFocus(e)}},{key:"getFocusableNodes",value:function(){var e=this.modal.querySelectorAll(G);return Array.apply(void 0,H(e))}},{key:"setFocusToFirstNode",value:function(){var e=this;if(!this.config.disableFocus){var t=this.getFocusableNodes();if(0!==t.length){var n=t.filter((function(t){return!t.hasAttribute(e.config.closeTrigger)}));n.length>0&&n[0].focus(),0===n.length&&t[0].focus()}}}},{key:"retainFocus",value:function(e){var t=this.getFocusableNodes();if(0!==t.length)if(t=t.filter((function(e){return null!==e.offsetParent})),this.modal.contains(document.activeElement)){var n=t.indexOf(document.activeElement);e.shiftKey&&0===n&&(t[t.length-1].focus(),e.preventDefault()),!e.shiftKey&&t.length>0&&n===t.length-1&&(t[0].focus(),e.preventDefault())}else t[0].focus()}}])&&X(t.prototype,n),e}(),K=null,$=function(e){if(!document.getElementById(e))return console.warn("MicroModal: ❗Seems like you have missed %c'".concat(e,"'"),"background-color: #f8f9fa;color: #50596c;font-weight: bold;","ID somewhere in your code. Refer example below to resolve it."),console.warn("%cExample:","background-color: #f8f9fa;color: #50596c;font-weight: bold;",'<div class="modal" id="'.concat(e,'"></div>')),!1},J=function(e,t){if(function(e){e.length<=0&&(console.warn("MicroModal: ❗Please specify at least one %c'micromodal-trigger'","background-color: #f8f9fa;color: #50596c;font-weight: bold;","data attribute."),console.warn("%cExample:","background-color: #f8f9fa;color: #50596c;font-weight: bold;",'<a href="#" data-micromodal-trigger="my-modal"></a>'))}(e),!t)return!0;for(var n in t)$(n);return!0},{init:function(e){var t=Object.assign({},{openTrigger:"data-micromodal-trigger"},e),n=H(document.querySelectorAll("[".concat(t.openTrigger,"]"))),r=function(e,t){var n=[];return e.forEach((function(e){var r=e.attributes[t].value;void 0===n[r]&&(n[r]=[]),n[r].push(e)})),n}(n,t.openTrigger);if(!0!==t.debugMode||!1!==J(n,r))for(var o in r){var a=r[o];t.targetModal=o,t.triggers=H(a),K=new Z(t)}},show:function(e,t){var n=t||{};n.targetModal=e,!0===n.debugMode&&!1===$(e)||(K&&K.removeEventListeners(),(K=new Z(n)).showModal())},close:function(e){e?K.closeModalById(e):K.closeModal()}});"undefined"!=typeof window&&(window.MicroModal=Q);const ee=Q;function te(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n}(e,t)||re(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){if(e){if("string"==typeof e)return oe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?oe(e,t):void 0}}function oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const ae=function(e){var t,n=e.currentProductVariant,o=e.recommendedShadeGuideProducts,a=document.querySelector("#ot-sdk-btn-floating.ot-floating-button");ee.init({onShow:function(){document.documentElement.style.overflowY="hidden",a&&(a.style.visibility="hidden")},onClose:function(){document.documentElement.style.overflowY="auto",a&&(a.style.visibility="unset")},awaitOpenAnimation:!0,awaitCloseAnimation:!0});var i=["AISHA","ROSEMARIE","TASHANDA","MOLLIE","KHASNAA","APIO","26N","27C","28W","29N","30W","31N","120","130","140","LX 170","LX 160","LX 150","LX 180","LX 190","LX 200"],l=["NADIA","SARAH","ZAHRAH","BIJAN","KENNEDY","21W","22N","23C","24W","25W","090","100","110","LX 100","LX 110","LX 130","LX 140"],c=["CATHY","MARGO","LUCIE","ANDREA","17C","18W","19N","20N","070","060","080","LX 080","LX 070","LX 090"],s=["MAXINE","KAROLINA","AYLYA","ABRIELLE","LISA","12C","13N","14W","15N","16W","050","060","LX 050","LX 040","LX 060"],u=["SORAYA","ALEXA","EILEEN","DIANA","GRACE","PARIS","6W","7C","8N","9W","10N","11W","050","030","040","LX 040","LX 030","LX 020"],d=["KENNA","DANI","MIA","TRINITY","EMILY","1C","2N","3N","4W","5N","010","030","020","LX 010","LX 030","LX 040"],m=(null===(t=document.querySelector("body"))||void 0===t||t.dataset.countryIso,ne((0,r.useState)("deep"),2)),f=m[0],p=m[1],v=ne((0,r.useState)(null),2),h=v[0],g=v[1],b=ne((0,r.useState)(null),2),y=b[0],E=b[1],_=ne((0,r.useState)(null),2),S=_[0],w=_[1],A=ne((0,r.useState)(null),2),I=A[0],N=A[1],C=ne((0,r.useState)(!1),2),L=C[0],P=C[1],T=ne((0,r.useState)(0),2),M=T[0],k=T[1],O=ne((0,r.useState)(364),2),x=O[0],D=O[1],R=(0,r.useRef)(),B=(0,r.useRef)(),F=(0,r.useRef)(),j=(0,r.useRef)(),V=function(){R.current&&B.current&&(B.current.offsetWidth>R.current.offsetWidth?(!0!==L&&P(!0),R.current&&D(R.current.offsetTop+176)):!1!==L&&P(!1))};!function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{attributes:!0};(0,r.useEffect)((function(){if(e.current){var r=new MutationObserver(t);return r.observe(e.current,n),function(){return r.disconnect()}}}),[t,n,e])}(j,(function(e){var t,n=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=re(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;"attributes"===r.type&&"class"===r.attributeName&&V()}}catch(e){n.e(e)}finally{n.f()}})),window.addEventListener("resize",V),(0,r.useEffect)((function(){(function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(window.shopData.shadeGuideConfig,{method:"GET"});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,N(n);case 7:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){te(a,r,o,i,l,"next",e)}function l(e){te(a,r,o,i,l,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}})()().catch(console.error)}),[]),(0,r.useEffect)((function(){n&&(d.includes(n.title)?p("fair"):u.includes(n.title)?p("light"):s.includes(n.title)?p("light-medium"):c.includes(n.title)?p("medium"):l.includes(n.title)?p("medium-deep"):i.includes(n.title)&&p("deep"))}),[n]),(0,r.useEffect)((function(){f&&o&&("deep"===f?(o[0]&&o[0].shadeguideDeepImage&&w(o[0].shadeguideDeepImage[0]),o[1]&&o[1].shadeguideDeepImage&&E(o[1].shadeguideDeepImage[0]),o[2]&&o[2].shadeguideDeepImage&&g(o[2].shadeguideDeepImage[0])):"medium-deep"===f?(o[0]&&o[0].shadeguideMediumDeepImage&&w(o[0].shadeguideMediumDeepImage[0]),o[1]&&o[1].shadeguideMediumDeepImage&&E(o[1].shadeguideMediumDeepImage[0]),o[2]&&o[2].shadeguideMediumDeepImage&&g(o[2].shadeguideMediumDeepImage[0])):"medium"===f?(o[0]&&o[0].shadeguideMediumImage&&w(o[0].shadeguideMediumImage[0]),o[1]&&o[1].shadeguideMediumImage&&E(o[1].shadeguideMediumImage[0]),o[2]&&o[2].shadeguideMediumImage&&g(o[2].shadeguideMediumImage[0])):"light-medium"===f?(o[0]&&o[0].shadeguideLightMediumImage&&w(o[0].shadeguideLightMediumImage[0]),o[1]&&o[1].shadeguideLightMediumImage&&E(o[1].shadeguideLightMediumImage[0]),o[2]&&o[2].shadeguideLightMediumImage&&g(o[2].shadeguideLightMediumImage[0])):"light"===f?(o[0]&&o[0].shadeguideLightImage&&w(o[0].shadeguideLightImage[0]),o[1]&&o[1].shadeguideLightImage&&E(o[1].shadeguideLightImage[0]),o[2]&&o[2].shadeguideLightImage&&g(o[2].shadeguideLightImage[0])):"fair"===f&&(o[0]&&o[0].shadeguideFairImage&&w(o[0].shadeguideFairImage[0]),o[1]&&o[1].shadeguideFairImage&&E(o[1].shadeguideFairImage[0]),o[2]&&o[2].shadeguideFairImage&&g(o[2].shadeguideFairImage[0])))}),[f]);var U=(0,r.useCallback)((function(){if(R){var e=R.current,t=F.current;if(e&&t){var n=t.offsetWidth-130,r=Math.ceil(e.scrollLeft)/(e.scrollWidth-e.offsetWidth)*n;k(Math.ceil(r))}}}),[]);return r.createElement("div",{className:"shade-guide"},r.createElement("div",{className:"modal micromodal-slide shade-guide",ref:j,id:"modal-shade-guide","aria-hidden":"true"},r.createElement("div",{className:"modal__overlay","tab-index":"-1","data-micromodal-close":!0},r.createElement("div",{className:"modal__wrapper"},r.createElement("div",{className:"modal__container scrollhost-container",role:"dialog","aria-modal":"true"},r.createElement("header",{className:"modal__header"},r.createElement("button",{className:"modal__close close","aria-label":"Close modal","data-micromodal-close":!0},"Close"),r.createElement("h2",{className:"section__subtitle"},"Compare Shades"),r.createElement("p",null,"Find your color match by selecting your shade range"),r.createElement("nav",{"aria-label":"Shade range navigation",className:"shade-navigation",role:"navigation"},r.createElement("ul",{className:"navigation-item-group"},r.createElement("li",{className:"nav-item",key:"deep"},r.createElement("button",{className:"deep ".concat("deep"===f?"is-active":""),onClick:function(){p("deep")}},r.createElement("span",null,"Deep"))),r.createElement("li",{className:"nav-item",key:"medium-deep"},r.createElement("button",{className:"medium-deep ".concat("medium-deep"===f?"is-active":""),onClick:function(){p("medium-deep")}},r.createElement("span",null,"Medium-Deep"))),r.createElement("li",{className:"nav-item",key:"medium"},r.createElement("button",{className:"medium ".concat("medium"===f?"is-active":""),onClick:function(){p("medium")}},r.createElement("span",null,"Medium"))),r.createElement("li",{className:"nav-item",key:"light-medium"},r.createElement("button",{className:"light-medium ".concat("light-medium"===f?"is-active":""),onClick:function(){p("light-medium")}},r.createElement("span",null,"Light-Medium"))),r.createElement("li",{className:"nav-item",key:"light"},r.createElement("button",{className:"light ".concat("light"===f?"is-active":""),onClick:function(){p("light")}},r.createElement("span",null,"Light"))),r.createElement("li",{className:"nav-item",key:"fair"},r.createElement("button",{className:"fair ".concat("fair"===f?"is-active":""),onClick:function(){p("fair")}},r.createElement("span",null,"Fair")))))),r.createElement("main",{className:"modal__content scrollhost",id:"modal-shade-guide-content",ref:R,onScroll:U},r.createElement("table",{className:"shade-guide__table",ref:B},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",{scope:"col","aria-colspan":1,colSpan:1}),r.createElement("th",{scope:"col","aria-colspan":1,colSpan:1}),o&&o[0]&&S&&r.createElement("th",{scope:"col","aria-colspan":2,colSpan:2,className:"heading-with-img"},r.createElement("div",{className:"heading__image"},r.createElement("img",{alt:S.altText,src:S.originalSrc})),r.createElement("div",{className:"heading__text"},r.createElement("h3",null,"Foundation"))),o&&o[1]&&y&&r.createElement("th",{scope:"col","aria-colspan":2,colSpan:2,className:"heading-with-img"},r.createElement("div",{className:"heading__image"},r.createElement("img",{alt:y.altText,src:y.originalSrc})),r.createElement("div",{className:"heading__text"},r.createElement("h3",null,"Tinted Serum"))),o&&o[2]&&h&&r.createElement("th",{scope:"col","aria-colspan":2,colSpan:2,className:"heading-with-img"},r.createElement("div",{className:"heading__image"},r.createElement("img",{alt:h.altText,src:h.originalSrc})),r.createElement("div",{className:"heading__text"},r.createElement("h3",null,"Concealer")))),L?r.createElement("tr",{className:"scroll-bar-row"},r.createElement("th",{scope:"col","aria-colspan":8,colSpan:8,className:"scroll-bar-wrapper"},r.createElement("div",{className:"scroll-bar",style:{top:x},ref:F},r.createElement("div",{className:"scroll-thumb",style:{left:M}})))):""),r.createElement("tbody",null,I&&I.map((function(e){var t=e.modelName,n=o&&o[2].productVariants.find((function(t){return t.title==e.recommendedConcealer})),a=o&&o[1].productVariants.find((function(t){return t.title==e.recommendedSerum})),m=o&&o[0].productVariants.find((function(t){return t.title==e.recommendedFoundation}));if("deep"===f&&i.includes(t)||"medium-deep"===f&&l.includes(t)||"medium"===f&&c.includes(t)||"light-medium"===f&&s.includes(t)||"light"===f&&u.includes(t)||"fair"===f&&d.includes(t))return r.createElement("tr",{key:e.id},r.createElement("td",{className:"model-image"},r.createElement("div",null,r.createElement("img",{src:"".concat(e.url),fetchpriority:"low",loading:"lazy",alt:"model ".concat(e.modelName," wearing the shade ").concat(e.recommendedFoundation)}))),r.createElement("td",{className:"gap"},r.createElement("div",null)),m&&r.createElement(r.Fragment,null,r.createElement("td",{className:"shade-texture"},r.createElement("div",null,r.createElement("a",{href:"/products/".concat(o[0].handle,"?variant=").concat(m.shortID,"&shadeguide=true")},r.createElement("img",{src:m.colorTexture,srcSet:"".concat(m.colorTexture,"&transform=resize=140 140w, ").concat(m.colorTexture,"&transform=resize=250 250w"),fetchpriority:"low",loading:"lazy",alt:"shade texture of ".concat(m.colorName)})))),r.createElement("td",{className:"shade-title"},r.createElement("div",null,r.createElement("a",{href:"/products/".concat(o[0].handle,"?variant=").concat(m.shortID,"&shadeguide=true")},r.createElement("p",null,m.colorName.slice(0,6)))))),a&&r.createElement(r.Fragment,null,r.createElement("td",{className:"shade-texture"},r.createElement("div",null,r.createElement("a",{href:"/products/".concat(o[1].handle,"?variant=").concat(a.shortID,"&shadeguide=true")},r.createElement("img",{src:a.colorTexture,srcSet:"".concat(a.colorTexture,"&transform=resize=140 140w, ").concat(a.colorTexture,"&transform=resize=250 250w"),fetchpriority:"low",loading:"lazy",alt:"shade texture of ".concat(a.colorName)})))),r.createElement("td",{className:"shade-title"},r.createElement("div",null,r.createElement("a",{href:"/products/".concat(o[1].handle,"?variant=").concat(a.shortID,"&shadeguide=true")},r.createElement("p",null,a.colorName))))),n&&r.createElement(r.Fragment,null,r.createElement("td",{className:"shade-texture"},r.createElement("div",null,r.createElement("a",{href:"/products/".concat(o[2].handle,"?variant=").concat(n.shortID,"&shadeguide=true")},r.createElement("img",{src:"".concat(n.colorTexture),srcSet:"".concat(n.colorTexture,"&transform=resize=140 140w, ").concat(n.colorTexture,"&transform=resize=250 250w"),fetchpriority:"low",loading:"lazy",alt:"shade texture of ".concat(n.colorName)})))),r.createElement("td",{className:"shade-title"},r.createElement("div",null,r.createElement("a",{href:"/products/".concat(o[2].handle,"?variant=").concat(n.shortID,"&shadeguide=true")},r.createElement("p",null,n.colorName))))))}))))),r.createElement("footer",{className:"modal__footer"},r.createElement("div",{className:"shade-finder__callout"},r.createElement("p",null,"Identify the ideal shade for your skin tone"),r.createElement("a",{href:"/pages/shade-finder",className:"shade-finder__link"},"Find your shade"))))))))};var ie=n(3161),le=n(79198),ce=n(25251),se=function(){var e="email_hash",t=(0,le.m)(window.location.search);if(t){var n=t.hash;n&&ce.EN.setItem(e,n)}var r=window.shopData;if(r){var o=ce.EN.getItem(e);return r.globalHash===o}return!1}();function ue(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function de(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){ue(a,r,o,i,l,"next",e)}function l(e){ue(a,r,o,i,l,"throw",e)}i(void 0)}))}}function me(e,t){return fe.apply(this,arguments)}function fe(){return(fe=de(regeneratorRuntime.mark((function e(t,n){var r,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("a","KDZ4Dd"),r.append("variant",n.toString(10)),r.append("email",t),r.append("platform","shopify"),e.next=7,fetch("https://a.klaviyo.com/onsite/components/back-in-stock/subscribe",{method:"POST",body:r});case 7:if((o=e.sent).ok){e.next=15;break}return e.t0=Error,e.next=12,o.text();case 12:throw e.t1=e.sent,e.t2="Failed to subscribe: "+e.t1,new e.t0(e.t2);case 15:return e.next=17,o.json();case 17:if((a=e.sent).success){e.next=20;break}throw new Error("Failed to subscribe: "+JSON.stringify(a));case 20:return e.abrupt("return","Thanks for subscribing - we'll let you know when it is in stock.");case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var pe=n(55468),ve=n(46121);function he(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function ge(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){he(a,r,o,i,l,"next",e)}function l(e){he(a,r,o,i,l,"throw",e)}i(void 0)}))}}function be(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=_e(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function ye(e){return function(e){if(Array.isArray(e))return Se(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||_e(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n}(e,t)||_e(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _e(e,t){if(e){if("string"==typeof e)return Se(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Se(e,t):void 0}}function Se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function we(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?we(Object(n),!0).forEach((function(t){Ie(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):we(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ne={scrolling:!1,scrollPos:0,mousePos:0},Ce=Ae({},Ne),Le=Ae({},Ne),Pe=!1,Te=!1,Me=function(e,t,n,r,o,a,i){e&&(e.onmousedown=function(o){e&&(t={scrolling:!0,scrollPos:r?e.scrollTop:e.scrollLeft,mousePos:r?o.clientY:o.clientX},e.classList.add("dragging"),n.current=!0,null==i||i(t))},e.onmouseup=e.onmouseleave=e.onpointercancel=e.ontouchend=function(){e&&(t.scrolling&&(null==a||a()),t=Ae({},Ne),e.classList.remove("dragging"),null==i||i(t))},e.onmousemove=function(a){var i;e&&t.scrolling&&(r?(e.scrollTop=t.scrollPos+(t.mousePos-a.clientY),i=Math.abs(e.scrollTop-t.scrollPos)):(e.scrollLeft=t.scrollPos+(t.mousePos-a.clientX),i=Math.abs(e.scrollLeft-t.scrollPos)),n.current=i<o)})};const ke=function(e){var t;ie.Z.instance.markUserAsEngaged();var n=(0,r.useRef)(!0),a=(0,r.useRef)(!0),i=(0,o.UO)().productHandle,l=(0,o.TH)(),s=Ee((0,r.useState)(!1),2),u=s[0],d=s[1],m=Ee((0,r.useState)(!1),2),f=m[0],p=m[1],v=(0,T.df)();(0,r.useEffect)((function(){l.search.includes("shadeguide=true")&&(localStorage.getItem("shadeguide")!=="".concat(l.pathname).concat(l.search)&&localStorage.setItem("shadeguide","".concat(l.pathname).concat(l.search)))}),[l]),(0,r.useEffect)((function(){if(u&&!f){var e=document.getElementById("variant_wrapper"),t=document.getElementById("variant_slider");if(!e||!t)return;t.style.display=e.scrollWidth!==e.offsetWidth?"unset":"none";var n=document.getElementById("variant_wrapper");n&&"none"!==t.style.display&&Z(n)}}),[f,u,e.activeProductIndex,v]);var h,g=Ee((0,r.useState)(),2),b=g[0],y=g[1],E=(0,r.useMemo)((function(){return window.shopData}),[]),_=(0,r.useMemo)((function(){return window.shopData.productDetails}),[]),S=(0,r.useMemo)((function(){return window.shopData.productDetails.find((function(e){return e.handle===i}))}),[i]);void 0!==e.onVTOPage&&(S=window.shopData.productDetails[null!==(h=e.activeProductIndex)&&void 0!==h?h:0]);(0,r.useEffect)((function(){var e,t,n,r,o,a,i,l,c,s,u,d,m,f,p,v,h={id:S.id,title:S.title,description:"<p>".concat(S.description,"</p>"),handle:S.handle,productType:S.productType,variants:null===(e=S.productVariants)||void 0===e?void 0:e.map((function(e){var t,n,r,o,a,i,l=null!==(t=e.vto)&&void 0!==t?t:void 0,c=parseInt(e.skintone);Number.isNaN(c)&&(c=void 0);var s=null!==(n=e.modelDeepImages)&&void 0!==n&&n.length?e.modelDeepImages:void 0,u=null!==(r=e.modelMediumImages)&&void 0!==r&&r.length?e.modelMediumImages:void 0,d=null!==(o=e.modelLightImages)&&void 0!==o&&o.length?e.modelLightImages:void 0,m=null!==(a=e.colorName)&&void 0!==a?a:"",f=null!==(i=e.colorHex)&&void 0!==i?i:"#f00";return Ae(Ae({},e),{},{colorName:m,colorHex:f,vto:l,skintone:c,modelDeepImages:s,modelMediumImages:u,modelLightImages:d,productId:S.id})})),images:S.images,extraImages:null!==(t=S.extraImages)&&void 0!==t?t:void 0,shadeguideDeepImage:null!==(n=S.shadeguideDeepImage)&&void 0!==n?n:void 0,shadeguideMediumDeepImage:null!==(r=S.shadeguideMediumDeepImage)&&void 0!==r?r:void 0,shadeguideMediumImage:null!==(o=S.shadeguideMediumImage)&&void 0!==o?o:void 0,shadeguideLightMediumImage:null!==(a=S.shadeguideLightMediumImage)&&void 0!==a?a:void 0,shadeguideLightImage:null!==(i=S.shadeguideLightImage)&&void 0!==i?i:void 0,shadeguideFairImage:null!==(l=S.shadeguideFairImage)&&void 0!==l?l:void 0,badge:null!==(c=S.badge)&&void 0!==c?c:void 0,videos:null!==(s=S.videos)&&void 0!==s?s:void 0,featureTag:null!==(u=S.featureTag)&&void 0!==u?u:void 0,pdpV2:S.pdpV2,smearImage:null!==(d=S.smearImage)&&void 0!==d?d:void 0,smearImageMobile:null!==(m=S.smearImageMobile)&&void 0!==m?m:void 0,bottomMedia:null!==(f=S.bottomMedia)&&void 0!==f?f:void 0,bottomMediaMobile:null!==(p=S.bottomMediaMobile)&&void 0!==p?p:void 0,carouselShowShadeFinderLink:null!==(v=S.carouselShowShadeFinderLink)&&void 0!==v?v:void 0};y([h])}),[S]);var w=(null==b?void 0:b.find((function(e){return e.handle===(null!=i?i:S.handle)})))||null,A=Ee((0,r.useState)(w),2),I=A[0],N=A[1],C=Ee((0,r.useState)((null==w?void 0:w.variants[0])||null),2),L=C[0],P=C[1],M=(0,r.useCallback)((function(e){b.find((function(t){return t.id===e.productId}))&&P(e)}),[b]);(0,r.useEffect)((function(){var t;null!=w&&w.variants&&e.onVTOPage&&(N(w),M(null!==(t=null==w?void 0:w.variants.find((function(e){return Number(e.id)===S.selectedVariantId})))&&void 0!==t?t:null))}),[b]);var k=(0,r.useCallback)((function(){var e=document.getElementById("variant_shade_chooser"),t=document.querySelector(".variant_detail--main span.arrow-down"),n=document.querySelector(".variant_detail--main span.arrow-up");if(e){if("flex"===e.style.display)return n&&n.classList.add("hidden"),t&&t.classList.remove("hidden"),void O();e.style.display="flex",t&&t.classList.add("hidden"),n&&n.classList.remove("hidden");var r=e.querySelector("[data-selected=true]"),o=r.parentElement;o.scrollTo({top:r.offsetTop-5,behavior:"auto"});var a=document.getElementById("variant_shade_chooser_slider_wrapper"),i=getComputedStyle(document.documentElement).getPropertyValue("--shade-chooser-max-height")===o.clientHeight+"px";a.style.display=i?"block":"none"}var l=document.getElementById("variant_selector_container");l&&!l.classList.contains("variant_selector_container--main")&&(l.style.display="none"),p(!0)}),[e.activeProductIndex]),O=(0,r.useCallback)((function(){document.getElementById("variant_shade_chooser").style.display="none",document.getElementById("variant_selector_container").style.display="",p(!1)}),[]);var x=(0,r.useCallback)((function(e){var t,n=be(document.getElementsByClassName("size_select_options_wrapper"));try{for(n.s();!(t=n.n()).done;){var r;null===(r=t.value.querySelector("[data-selected=true]"))||void 0===r||r.setAttribute("data-selected","false")}}catch(e){n.e(e)}finally{n.f()}var o,a=be(document.querySelectorAll(".size_select_option[data-size='".concat(e,"']")));try{for(a.s();!(o=a.n()).done;){o.value.setAttribute("data-selected","true")}}catch(e){a.e(e)}finally{a.f()}var i=document.getElementsByClassName("size_select");if(e){var l,c=be(i);try{for(c.s();!(l=c.n()).done;){l.value.querySelector("span").innerText=e}}catch(e){c.e(e)}finally{c.f()}}}),[]),D=function(e,t){var n,r;("deep"===t||"default"===t)&&e.modelDeepImages&&e.modelDeepImages.length>0?(n=e.modelDeepImages[0],e.modelDeepImages.length>1&&(r=e.modelDeepImages[1]),document.querySelectorAll(".choose-model__container button.deep")[0].classList.add("active"),document.querySelectorAll(".choose-model__container button.medium")[0].classList.remove("active"),document.querySelectorAll(".choose-model__container button.light")[0].classList.remove("active")):("medium"===t||"default"===t)&&e.modelMediumImages&&e.modelMediumImages.length>0?(n=e.modelMediumImages[0],e.modelMediumImages.length>1&&(r=e.modelMediumImages[1]),document.querySelectorAll(".choose-model__container button.medium")[0].classList.add("active"),document.querySelectorAll(".choose-model__container button.deep")[0].classList.remove("active"),document.querySelectorAll(".choose-model__container button.light")[0].classList.remove("active")):("light"===t||"default"===t)&&e.modelLightImages&&e.modelLightImages.length>0&&(n=e.modelLightImages[0],e.modelLightImages.length>1&&(r=e.modelLightImages[1]),document.querySelectorAll(".choose-model__container button.light")[0].classList.add("active"),document.querySelectorAll(".choose-model__container button.deep")[0].classList.remove("active"),document.querySelectorAll(".choose-model__container button.medium")[0].classList.remove("active"));var o=document.getElementsByClassName("col--before-after")[0].getElementsByClassName("model-image")[0],a=document.getElementsByClassName("col--before-after")[0].getElementsByClassName("model-image")[1];if(r){var i;if(n&&o.setAttribute("src","".concat(n.originalSrc,"&transform=resize=1100")),n&&n.altText&&o.setAttribute("alt",n.altText),a)a.setAttribute("src","".concat(r.originalSrc,"&transform=resize=1100")),r.altText&&a.setAttribute("alt",r.altText);else{var l=document.createElement("div");l.classList.add("two-view");var c=document.createElement("img");c.classList.add("model-image"),c.setAttribute("src","".concat(r.originalSrc,"&transform=resize=1100")),r.altText&&c.setAttribute("alt",r.altText);var s=document.querySelector(".model-image__container");null==s||s.appendChild(l).appendChild(c)}n&&(null===(i=o.parentElement)||void 0===i||i.classList.add("two-view"))}else{var u,d;a&&(null===(u=a.parentElement)||void 0===u||u.remove()),n&&(null===(d=o.parentElement)||void 0===d||d.classList.remove("two-view")),n&&o.setAttribute("src","".concat(n.originalSrc,"&transform=resize=1100")),n&&n.altText&&o.setAttribute("alt",n.altText)}};function R(){if(document.getElementsByName("selling_plan")[0]){var e,t=be(document.querySelectorAll("afterpay-placement"));try{for(t.s();!(e=t.n()).done;){e.value.style.display="none"}}catch(e){t.e(e)}finally{t.f()}}}var B=0;function F(){var e=document.querySelectorAll(".price__amount.new-price .money.recharge-inner-most-price")[0];if(e){if(e){var t=new MutationObserver((function(t){var n,r=be(t);try{var o=function(){var t,r=n.value,o=null===(t=document.querySelector(".rc_widget__option__discount"))||void 0===t?void 0:t.textContent,a=document.getElementsByName("selling_plan")[0];!o||null!=e&&e.nextElementSibling||!a?null!=e&&e.nextElementSibling&&!a&&e.nextElementSibling.remove():e.insertAdjacentHTML("afterend",'<span class="discounted"> ('+o+" OFF)</span>"),document.querySelectorAll(".product-fixed-bar .price__amount.new-price .money").forEach((function(e){e.innerText=r.target.innerText,o&&!e.nextElementSibling&&a?e.insertAdjacentHTML("afterend",'<span class="discounted"> ('+o+" OFF)</span>"):e.nextElementSibling&&!a&&e.nextElementSibling.remove()}))};for(r.s();!(n=r.n()).done;)o()}catch(e){r.e(e)}finally{r.f()}}));e&&t.observe(e,{characterData:!0,attributes:!1,childList:!0,subtree:!1})}}else var n=setInterval((function(){++B>20?clearInterval(n):F()}),200)}var j=function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=null===(t=document.querySelector("body"))||void 0===t?void 0:t.dataset.countryIso;if("US"===r){var o=new MutationObserver((function(e,t){if(window.ReChargeWidget)return R(),F(),void t.disconnect()}));o.observe(document,{childList:!0,subtree:!0})}if(void 0!==e.colorName){var a=document.getElementsByClassName("choose-model__container")[0];if(a){var i,l,c,s=a.getElementsByClassName("deep")[0],d=a.getElementsByClassName("medium")[0],m=a.getElementsByClassName("light")[0];0===(null===(i=e.modelDeepImages)||void 0===i?void 0:i.length)?s.classList.add("unavailable"):s.classList.remove("unavailable"),0===(null===(l=e.modelMediumImages)||void 0===l?void 0:l.length)?d.classList.add("unavailable"):d.classList.remove("unavailable"),0===(null===(c=e.modelLightImages)||void 0===c?void 0:c.length)?m.classList.add("unavailable"):m.classList.remove("unavailable");var f=document.querySelectorAll(".choose-model__container span.div-first")[0],p=document.querySelectorAll(".choose-model__container span.div-second")[0];s.classList.contains("unavailable")||d.classList.contains("unavailable")?f.classList.add("hidden"):f.classList.remove("hidden"),(s.classList.contains("unavailable")||m.classList.contains("unavailable"))&&(d.classList.contains("unavailable")||m.classList.contains("unavailable"))?p.classList.add("hidden"):p.classList.remove("hidden"),D(e,"default")}var v,h=be(document.getElementsByClassName("variant_selector_container"));try{for(h.s();!(v=h.n()).done;){var g=v.value,b=g.getElementsByClassName("variant_wrapper")[0],y=b.getElementsByClassName("variant_list_item_selected")[0];y&&(y.className="variant_list_item",y.setAttribute("data-selected","false"));var _=Array.prototype.slice.call(b.getElementsByClassName("variant_list_item")),A=_.find((function(t){return t.getAttribute("data-colorName")===e.colorName}));if(A.className="variant_list_item_selected",A.setAttribute("data-selected","true"),O(),n){var I=A.parentElement,N=I.parentElement,C=N.parentElement;C.scrollTo({left:I.offsetLeft-N.offsetLeft,behavior:u?"smooth":"auto"})}var L=document.querySelectorAll(".shade-matches");L.forEach((function(t){t.getAttribute("id")==="shade-".concat(e.id)?(t.classList.remove("hideSlider"),t.classList.add("showSlider")):(t.classList.remove("showSlider"),t.classList.add("hideSlider"))}));var P=document.querySelector(".shade-matches-wrapper .swap-x");P&&(P.scrollLeft=0);var T="true"===A.getAttribute("data-bestMatch"),k=g.getElementsByClassName("variant_title")[0];k&&(k.innerText=e.colorName+(T?" (your shade)":""));var B=g.getElementsByClassName("variant_description")[0];B&&(B.innerHTML=e.description||"&nbsp;");var j=document.getElementById("variant_shade_chooser_item_dropdown");j&&e.colorHex&&(j.style.backgroundColor=e.colorHex,j.style.backgroundImage=e.colorTexture?'url("'.concat(e.colorTexture,'")'):"none")}}catch(e){h.e(e)}finally{h.f()}var V=document.getElementById("sticky_variant_color");V&&e.colorHex&&(V.style.backgroundColor=e.colorHex,V.style.backgroundImage=e.colorTexture?'url("'.concat(e.colorTexture,'")'):"none");var U=document.getElementById("sticky_variant_title");U&&(U.textContent=e.colorName);var z=document.getElementById("variant_shade_chooser_items_wrapper"),q=z.querySelector('.variant_shade_chooser_item_wrapper[data-selected="true"]');if(q){q.setAttribute("data-selected","false");var W=q.querySelector(".variant_shade_chooser_item_selected");W.className="variant_shade_chooser_item"}var X=z.querySelector('[data-colorName="'.concat(e.colorName,'"]'));X.setAttribute("data-selected","true");var H=X.querySelector(".variant_shade_chooser_item");H&&(H.className="variant_shade_chooser_item_selected")}void 0!==e.size&&x(e.size);var Y=document.getElementById("variant_id_input");Y&&Y.setAttribute("value",e.shortID.toString(10));var G=document.getElementById("back_in_stock_variant_id_input");G&&G.setAttribute("value",e.shortID.toString(10));var Z,K=S.comingSoon||S.comingSoonUk||e.comingSoon||E.globalComingSoon&&!se,$=be(document.getElementsByClassName("variant_cta"));try{for($.s();!(Z=$.n()).done;){var J=Z.value;J.innerText=S.comingSoonUk?E.comingSoonUkText:K?E.comingSoonText:e.available?"Add to Bag":E.soldOutText}}catch(e){$.e(e)}finally{$.f()}var Q,ee=be(document.getElementsByClassName("notify_when_available"));try{for(ee.s();!(Q=ee.n()).done;){var te=Q.value;te.classList.toggle("unavailable",!e.available||K)}}catch(e){ee.e(e)}finally{ee.f()}S.selectedVariantId=e.id;var ne=document.getElementsByClassName("product__form")[0],re=!e.available||K,oe=document.getElementsByName("selling_plan")[0];if(!oe&&"US"===r){var ae,ie=be(document.getElementsByClassName("variant_price"));try{var le=function(){for(var t=ae.value;t.firstChild;)t.removeChild(t.lastChild);if(!re){var n=function(n,r){var o;if("del"===n){(o=document.createElement("span")).className="price__amount old-price compare__"+e.shortID.toString(10),o.setAttribute("data-compare-price",e.compareAtPrice.toString().replace(/[$.]/g,""));var a=document.createElement("span");a.className="sr-only",a.innerText="Original price: ",o.appendChild(a)}else{(o=document.createElement(n)).className="price__amount new-price";var i=document.createElement("span");i.className="sr-only",i.innerText="Current price: ",o.appendChild(i)}var l=document.createElement("span");l.className="money",l.innerText=r,o.appendChild(l),t.appendChild(o)};e.compareAtPrice>e.price&&"US"===r?(n("del",e.compareAtPriceStr),n("span",e.priceStr)):n("span",e.priceStr)}};for(ie.s();!(ae=ie.n()).done;)le()}catch(e){ie.e(e)}finally{ie.f()}}var ce,ue=ne.getElementsByClassName("buy-button")[0];ue&&(ue.disabled=re,ue.classList.toggle("unavailable",!e.available),null===(ce=ue.parentElement)||void 0===ce||ce.classList.toggle("have_coming__btn",K));var de,me=be(document.getElementsByClassName("fixed_form_submit"));try{for(me.s();!(de=me.n()).done;){var fe,pe=de.value;pe.disabled=re,pe.classList.toggle("unavailable",!e.available),null===(fe=pe.parentElement)||void 0===fe||fe.classList.toggle("have_coming__btn",K),pe.onclick=function(){ue.click()}}}catch(e){me.e(e)}finally{me.f()}if("US"===r&&!oe){var ve,he=be(document.querySelectorAll("afterpay-placement"));try{for(he.s();!(ve=he.n()).done;){var ge=ve.value;ge.style.display=re?"none":""}}catch(e){he.e(e)}finally{he.f()}}var ye,Ee=be(document.getElementsByClassName("delay_shipping"));try{for(Ee.s();!(ye=Ee.n()).done;){var _e=ye.value;if(!_e.classList.contains("sets_product")){_e.classList.toggle("delayed",e.delayed);var Se=_e.querySelector(".ship-date");Se&&(Se.innerText=e.shippingDate)}}}catch(e){Ee.e(e)}finally{Ee.f()}M((null==w?void 0:w.variants.find((function(t){return t.id===e.id})))||null)},V=(0,r.useCallback)(j,[S,M,null==w?void 0:w.variants,O,u,x,E.comingSoonText,E.comingSoonUkText,E.soldOutText,E.globalComingSoon]),U=(0,r.useCallback)((function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=S.productVariants.filter((function(t){return t.colorName===e})),r=S.productVariants.find((function(e){return e.id===S.selectedVariantId})),o=n.find((function(e){return void 0!==e.size&&e.size===r.size}));o||(o=n[0]),o||(o=S.productVariants[0]),V(o,t)}),[S.productVariants,S.selectedVariantId,V]),z=(0,r.useCallback)((function(e){var t=e.querySelector(".size_select_options_wrapper");"true"===t.getAttribute("data-open")?t.setAttribute("data-open","false"):t.setAttribute("data-open","true")}),[]),q=(0,r.useCallback)((function(e){var t,n=be(document.getElementsByClassName("size_select_options_wrapper"));try{for(n.s();!(t=n.n()).done;){var r=t.value;e.composedPath().includes(r.parentElement)||r.setAttribute("data-open","false")}}catch(e){n.e(e)}finally{n.f()}}),[]),X=(0,r.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=document.getElementById("variant_shade_chooser"),r=document.getElementById("variant_open_shade_chooser");n&&r&&(!e.composedPath().includes(n)&&!e.composedPath().includes(r)||t)&&O()}),[O]),H=(0,r.useCallback)((function(e){var t=S.productVariants.filter((function(t){return t.size===e})),n=S.productVariants.find((function(e){return e.id===S.selectedVariantId})),r=t.find((function(e){return void 0!==e.colorName&&e.colorName===n.colorName}));r||(r=t[0]),r||(r=S.productVariants[0]),document.getElementById("variant_id_input").setAttribute("value",r.shortID.toString(10)),V(r)}),[S.productVariants,S.selectedVariantId,V]),Y=(0,r.useCallback)((function(e){var t=e.getAttribute("data-size");x(t),H(t)}),[x,H]),G=(0,r.useCallback)((function(e){var t=document.getElementById("variant_wrapper"),n=t.scrollWidth-t.clientWidth;t.scrollTo({left:n*(e/100),behavior:"auto"})}),[]),Z=(0,r.useCallback)((function(e){Pe||requestAnimationFrame((function(){var t=document.getElementById("variant_slider"),n=e.scrollWidth-e.clientWidth;if(t){var r=t.oninput;t.oninput=null,t.hidden=!0,t.value=String(e.scrollLeft/n*100),t.hidden=!1,t.oninput=r}}))}),[]),K=(0,r.useCallback)((function(e){var t=document.getElementById("variant_shade_chooser_items_wrapper"),n=t.scrollHeight-t.clientHeight;t.scrollTo({top:n*(e/100),behavior:"auto"})}),[]),$=(0,r.useCallback)((function(e){Te||requestAnimationFrame((function(){var t=document.getElementById("variant_shade_chooser_slider"),n=e.scrollHeight-e.clientHeight,r=t.oninput;t.oninput=null,t.hidden=!0,t.value=String(e.scrollTop/n*100),t.hidden=!1,t.oninput=r}))}),[]);(0,r.useEffect)((function(){if(u){var e=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n.current&&U(e.getAttribute("data-colorName"),t)};E.handleColorOnClick=e,E.pendingColorOnClick&&(e(E.pendingColorOnClick),E.pendingColorOnClick=void 0),E.handleOpenShadeChooser=k,E.pendingOpenShadeChooser&&(k(),E.pendingOpenShadeChooser=void 0),E.handleColorInShadeChooserOnClick=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];a.current&&U(e.getAttribute("data-colorName"),t);var n=document.querySelector("#variant_category_container .variant_category_slider li.all button");n&&n.click()},E.handleSizeOnOpen=z,E.pendingSizeOnOpen&&(z(E.pendingSizeOnOpen),E.pendingSizeOnOpen=void 0),document.body.addEventListener("click",q),document.body.addEventListener("click",X);var t=document.getElementById("variant_shade_chooser_close");t&&t.addEventListener("click",(function(e){return X(e,!0)})),E.handleSizeOptionOnClick=Y;var r=function(e){Pe=!0},o=function(e){Pe=!1},i=document.getElementById("variant_slider");i&&(i.oninput=function(e){var t=e.target;G(Number(t.value))},i.onmousedown=r,i.onmouseup=o,i.ontouchstart=r,i.ontouchend=o);var l=document.getElementById("variant_wrapper");l&&(l.onscroll=function(e){var t=e.target;Z(t)},Z(l));var c=function(e){Te=!0},s=function(e){Te=!1},d=document.getElementById("variant_shade_chooser_slider");d&&(d.oninput=function(e){var t=e.target;K(Number(t.value))},d.onmousedown=c,d.onmouseup=s,d.ontouchstart=c,d.ontouchend=s);var m=document.getElementById("variant_shade_chooser_items_wrapper");return m&&(m.onscroll=function(e){var t=e.target;$(t)},$(m)),Me(l,Ce,n,!1,10),Me(m,Le,a,!0,10),function(){document.body.removeEventListener("click",q),document.body.removeEventListener("click",X);var e=document.getElementById("variant_shade_chooser_close");e&&e.removeEventListener("click",(function(e){return X(e,!0)}))}}}),[U,E,Z,G,z,Y,q,k,X,$,K,u]),(0,r.useEffect)((function(){if(u){var e=S.productVariants.find((function(e){return e.id===S.selectedVariantId}));j(e,!0)}}),[b]),(0,r.useEffect)((function(){!u&&b&&(V(S.productVariants.find((function(e){return e.id===S.selectedVariantId}))),d(!0))}),[u,S.productVariants,S.selectedVariantId,b,V]),(0,r.useEffect)((function(){!I&&w&&N(w),!L&&w&&M((null==w?void 0:w.variants.find((function(e){return e.id===S.selectedVariantId})))||null)}),[S,w,I,L,M]);var J=Ee((0,r.useState)(!0),2),Q=J[0],ee=J[1];(0,r.useEffect)((function(){if(!Q){var e=document.getElementById("placeholder_image");e&&(e.hidden=!0)}}),[Q]),(0,r.useEffect)((function(){if(I&&S.colorVariantSlider){var e=I.variants.map((function(e,t){return"".concat(e.colorHex," ").concat(100/(I.variants.length-1)*t,"%")})),t="linear-gradient(90deg, ".concat(e.join(", "),")"),n=document.getElementById("variant_slider");n&&(n.style.backgroundImage=t)}}),[I,S.colorVariantSlider]),(0,r.useEffect)((function(){!function(){var e=document.querySelectorAll(".choose-model__container button");if(e){var t,n=be(e);try{for(n.s();!(t=n.n()).done;)t.value.addEventListener("click",(function(e){var t=e.target.parentNode;if(!t.classList.contains("unavailable")){var n="",r=document.getElementById("variant_id_input").getAttribute("value"),o=S.productVariants.find((function(e){return e.shortID===Number(r)}));t.classList.contains("deep")?n="deep":t.classList.contains("medium")?n="medium":t.classList.contains("light")&&(n="light"),D(o,n)}}))}catch(e){n.e(e)}finally{n.f()}}}()}),[]);var te=Ee((0,r.useState)(null),2),ne=te[0],re=te[1];(0,r.useEffect)((function(){ne&&setTimeout((function(){re(null)}),7e3)}),[ne]);var oe=(0,ve.jD)().setIsCartDirty;function le(e){return ce.apply(this,arguments)}function ce(){return(ce=ge(regeneratorRuntime.mark((function e(t){var n,r,o,a,i,l,s,u,d,m,f,p,v,h,g,b;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=41853198172348,o=7552095977660,a=new FormData(t.target),i=parseInt(a.get("id"),10),l=a.get("custom_message"),s=null===(n=a.get("selling_plan_id"))||void 0===n?void 0:n.toString(),u={},l&&(u=Ae(Ae({},u),{},{custom_message:l})),d=!1,i!==r){e.next=21;break}return e.next=13,pe.W.retrieveCart();case 13:m=e.sent,(f=document.querySelectorAll(".add_btn.discovery"))&&f.forEach((function(e){setTimeout((function(){e.setAttribute("disabled","")}),500)})),(p=document.querySelectorAll('.btn.btn--border[data-id="'.concat(o,'"]')))&&p.forEach((function(e){setTimeout((function(){e.setAttribute("disabled","")}),500)})),(v=document.querySelectorAll('.buy_btn_direct[data-id="'.concat(o,'"]')))&&v.forEach((function(e){setTimeout((function(){e.setAttribute("disabled","")}),500)})),m.items.forEach((function(e){e.id===r&&(d=!0)}));case 21:if(d){e.next=38;break}return null!==(h=window.beautyLabsCart)&&void 0!==h&&h.showMinicart&&(null===(g=window.beautyLabsCart)||void 0===g||g.showMinicart(!0)),e.prev=23,e.next=26,pe.W.addToCart([{id:i,quantity:1,selling_plan:s,properties:u}]);case 26:if("string"!=typeof(b=e.sent)){e.next=30;break}return re(b),e.abrupt("return");case 30:e.next=38;break;case 32:return e.prev=32,e.t0=e.catch(23),console.error(e.t0),c.Z.instance.reportError(null===e.t0||void 0===e.t0?void 0:e.t0.message,null===e.t0||void 0===e.t0?void 0:e.t0.stack),re("That item could not be added to your cart. Please try again later."),e.abrupt("return");case 38:oe(!0);case 39:case"end":return e.stop()}}),e,null,[[23,32]])})))).apply(this,arguments)}function ue(e){return de.apply(this,arguments)}function de(){return(de=ge(regeneratorRuntime.mark((function e(t){var n,r,o,a,i,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=new FormData(t.target),o=r.get("email"),a=parseInt(r.get("variant"),10),(i=null===(n=t.target.closest(".modal__container"))||void 0===n?void 0:n.querySelector("[data-micromodal-close]"))&&i.click(),e.next=8,me(o,a).catch((function(e){var t;console.error(e),null===c.Z||void 0===c.Z||null===(t=c.Z.instance)||void 0===t||t.reportError(null==e?void 0:e.message,null==e?void 0:e.stack),re("Subscription failed.  Please try again later.")}));case 8:(l=e.sent)&&re(l);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,r.useEffect)((function(){var e=function(){L&&I&&ie.Z.instance.logAddToBag({product_handle:I.handle,shade_name:L.colorName,variant_id:L.shortID})},t=document.getElementsByClassName("product__form")[0],n=t.getElementsByClassName("buy-button")[0];null==n||n.addEventListener("click",e),t.addEventListener("submit",le);var r=document.getElementsByClassName("back-in-stock-form")[0];return null==r||r.addEventListener("submit",ue),function(){null==n||n.removeEventListener("click",e),t.removeEventListener("submit",le),null==r||r.removeEventListener("submit",ue)}}),[I,L]),b&&I?r.createElement(r.Fragment,null,r.createElement("div",{hidden:Q,className:"product_preview"},r.createElement(W,{setLoading:ee,currentProduct:I,currentProductVariant:L,setCurrentProductVariant:M,productsForDisplay:b,setColorSelected:U,setBestMatch:function(e){var t=document.getElementById("variant_wrapper"),n=t.querySelector("[data-bestMatch=true]");n&&(n.setAttribute("data-bestMatch","false"),n.parentElement.querySelector(".variant_list_item_flag_best_match").textContent="");var r=[].concat(ye(Array.prototype.slice.call(t.getElementsByClassName("variant_list_item"))),ye(Array.prototype.slice.call(t.getElementsByClassName("variant_list_item_selected")))).find((function(t){return t.getAttribute("data-colorName")===e}));r.setAttribute("data-bestMatch","true"),r.parentElement.querySelector(".variant_list_item_flag_best_match").textContent="Your shade"},onVTOPage:null!==(t=e.onVTOPage)&&void 0!==t&&t}),ne?r.createElement("div",{className:"addToCart_error"},ne):null),_.length>1?r.createElement(ae,{currentProductVariant:L,recommendedShadeGuideProducts:_}):""):null}},34553:(e,t,n)=>{"use strict";var r=n(82109),o=n(42092).findIndex,a=n(51223),i="findIndex",l=!0;i in[]&&Array(1).findIndex((function(){l=!1})),r({target:"Array",proto:!0,forced:l},{findIndex:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),a(i)},44048:(e,t,n)=>{n(82109)({target:"Number",stat:!0},{isNaN:function(e){return e!=e}})},73054:(e,t,n)=>{"use strict";var r=n(64831);Object.defineProperty(t,"Z",{enumerable:!0,get:function(){return r.default}})},64831:function(e,t,n){"use strict";var r=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};Object.defineProperty(t,"__esModule",{value:!0});var o=n(67294);t.default=function(e){var t=e.src,n=e.checkForExisting,i=void 0!==n&&n,l=r(e,["src","checkForExisting"]),c=o.useState(Boolean(t)),s=c[0],u=c[1],d=o.useState(null),m=d[0],f=d[1];return o.useEffect((function(){if(a&&t){if(i)if(document.querySelectorAll('script[src="'+t+'"]').length>0)return void u(!1);var e=document.createElement("script");e.setAttribute("src",t),Object.keys(l).forEach((function(t){void 0===e[t]?e.setAttribute(t,l[t]):e[t]=l[t]}));var n=function(){u(!1)},r=function(e){f(e)};return e.addEventListener("load",n),e.addEventListener("error",r),document.body.appendChild(e),function(){e.removeEventListener("load",n),e.removeEventListener("error",r)}}}),[t]),[s,m]};var a="undefined"!=typeof window&&void 0!==window.document}}]);