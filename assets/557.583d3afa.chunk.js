(self.webpackChunkrose_inc_web=self.webpackChunkrose_inc_web||[]).push([[557],{43844:(e,t,r)=>{"use strict";r.d(t,{A:()=>a,s:()=>i});var n=r(85518),a=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2500;t&&(clearTimeout(t),r(void 0)),e.then((function(){r(setTimeout((function(){r(void 0)}),n))}),(function(){r(void 0)}))},i=function(e,t,r,i){if(navigator.share&&n.tq)navigator.share({title:e,url:t}).catch((function(e){console.warn("Share of link failed:",e)}));else{var o=navigator.clipboard.writeText(t);a(o,r,i)}}},38242:(e,t,r)=>{"use strict";r.d(t,{q:()=>a});var n=r(73935),a=function(e){var t=e.portal,r=e.renderInline,a=e.children;return t?n.createPortal(a,t):r?a:null}},60856:(e,t,r)=>{"use strict";r.d(t,{dq:()=>o});var n=r(58905),a=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=(0,n.Iu)("global.locale.locale"),a=t?"full":"long";return e.toLocaleDateString(r,{dateStyle:a})},i=function(e){return function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2?arguments[2]:void 0,a=(0,n.Iu)("global.locale.locale"),i=t?"short":void 0;return e.toLocaleTimeString(a,{hour:"numeric",minute:"numeric",timeZoneName:i,timeZone:r})}(new Date(e))},o=function(e){return function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=new Date(e);return a(r,t)}(e)+" | "+i(e)}},31662:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});r(47941),r(82526),r(57327),r(38880),r(54747),r(49337);var n=r(3161);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,l;return t=e,l=[{key:"log",value:function(e,t,r){n.Z.instance.log(e,t,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({namespace:"roseinc"},r),"liveshopping")}},{key:"logShowAddToCalendar",value:function(e){this.log("show_add_to_calendar",!1,e)}},{key:"logShowWatchEnd",value:function(e){this.log("show_watch_end",!1,e)}},{key:"logShowWatchMute",value:function(e){this.log("show_watch_mute",!1,e)}},{key:"logShowWatchUnmute",value:function(e){this.log("show_watch_unmute",!1,e)}},{key:"logShowWatchHide",value:function(e){this.log("show_watch_hide",!1,e)}},{key:"logShowWatchShow",value:function(e){this.log("show_watch_show",!1,e)}},{key:"logShowWatchViewProduct",value:function(e){this.log("show_watch_view_product",!1,e)}},{key:"logShowWatchQuality",value:function(e){this.log("show_watch_quality",!1,e)}},{key:"logAddToBag",value:function(e){var t;null===(t=n.Z.instance)||void 0===t||t.logAddToBag(e)}}],(r=null)&&o(t.prototype,r),l&&o(t,l),e}()},88355:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});r(82526),r(41817),r(41539),r(32165),r(66992),r(78783),r(33948),r(47042),r(68309),r(91038);var n=r(67294),a=r(58905),i=r(93970),o=r(88017),l=r(18441);function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(n=(o=l.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const u=function(e){var t=e.wrapperClassName,r=e.header,s=e.headerSecondary,u=e.cssPosition,m=e.setIsOpen,d=e.children,h=e.zIndex,p=void 0===h?2:h,v=e.closeElement,f=void 0===v?"cross":v,g=e.closeOnBgClick,w=void 0===g||g,b=c((0,n.useState)(!1),2),_=b[0],y=b[1],E=c((0,i.KS)(0),2),N=E[0],S=E[1],I=function(){S(200),y(!0)};return(0,n.useEffect)((function(){!N&&_&&m(!1)}),[N,_,m]),n.createElement("div",{className:t},n.createElement("div",{className:"liveshopping-modal__bg liveshopping-modal__anim-bg-".concat(_?"close":"open"),style:{zIndex:p},onClick:!0===w?function(){return I()}:function(){return null}}," "),n.createElement("div",{className:"liveshopping-modal check liveshopping-modal__anim-".concat(_?"close":"open"),style:{position:u,zIndex:p}},n.createElement("div",{className:"liveshopping-modal__header"},"cross"===f&&n.createElement(n.Fragment,null,n.createElement("h2",{className:"liveshopping-modal__header-text".concat(s?" liveshopping-modal__header-text--multi-header":"")},n.createElement("span",null,null!=r?r:" "),s&&n.createElement("span",null,s)),n.createElement(l.M,{className:"liveshopping-modal__close",src:o.Z,onClick:function(){return I()},alt:(0,a.Iu)("accessibility.close")})),"bar"===f&&n.createElement("div",{className:"liveshopping-modal__bar",onClick:function(){return I()}}," ")),n.createElement("div",{className:"liveshopping-modal__children"},r&&n.createElement("h2",{className:"liveshopping-modal__header-text-in-body".concat(s?" liveshopping-modal__header-text-in-body--multi-header":"")},n.createElement("span",null,r),s&&n.createElement("span",null,s)),d)))}},3093:(e,t,r)=>{"use strict";r.d(t,{Y:()=>d});r(29254),r(68309),r(92222),r(82526),r(41817),r(41539),r(32165),r(66992),r(78783),r(33948),r(47042),r(91038);var n=r(67294),a=r(20185),i=r(58905),o=r(18441);const l=r.p+"21d35f0db770115dd2515c54704d13ac.svg";var c=r(51120),s=r(73902);function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(n=(o=l.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var d=function(e){var t,r=e.handle,a=e.displayName,i=e.pictureUrl,o=e.pictureSize,l=e.showName,u=void 0!==l&&l,m=e.link,d=void 0!==m&&m,p=null!=r?r:null==a?void 0:a.baseName,v=(0,c.L)(),f=(0,s.gl)(),g=v.profilePictureEnabled,w=f?v.profilePictureDefaultSizeDesktopLarge:v.profilePictureDefaultSizeMobile;null!==(t=o)&&void 0!==t||(o=w);var b=Math.max(Math.floor(o/24),1),_=o+2*b;return n.createElement("div",{className:"liveshopping-profile-picture__wrapper"},g&&n.createElement(h,{handle:r,displayName:a,name:p,pictureUrl:i,pictureSize:o,link:d,borderWidth:b,imgWidth:_}),u&&n.createElement("div",{className:"liveshopping-profile-picture__name",style:g?void 0:{alignItems:"center",display:"flex",height:_,marginTop:0}},void 0!==r&&d?n.createElement("a",{href:"/pages/channels/".concat(r)},p):p))},h=function(e){var t,r=e.handle,i=e.displayName,c=e.pictureUrl,s=e.pictureSize,m=e.link,d=e.name,h=e.borderWidth,v=e.imgWidth,f=u((0,n.useState)({src:l,srcset:"",sizes:""}),2),g=f[0],w=f[1],b=void 0;24===s?b=48:40===s?b=80:80===s&&(b=160);var _=u((0,a.av)(i,r,s),1)[0],y=u((0,a.av)(i,r,null!==(t=b)&&void 0!==t?t:s),1)[0];b||(y=void 0),c&&(_=c,y=void 0),(0,n.useEffect)((function(){if(_){var e=new Image;return e.onload=function(){w({src:e.src,srcset:e.srcset,sizes:e.sizes})},e.src=_,y&&(e.sizes="".concat(s,"px"),e.srcset="".concat(_," 1x, ").concat(y," 2x")),function(){e.onload=null,e.onerror=null}}}),[_,y,s]);var E="0 ".concat(s/64,"px ").concat(s/32,"px var(--bl-core-color-chat-shadow)"),N=n.createElement(o.M,{className:"liveshopping-profile-picture__image",src:g.src,srcSet:g.srcset,sizes:g.sizes,style:{borderWidth:h+"px",width:v+"px",height:v+"px",boxShadow:E},height:s,width:s,alt:p(d)});return n.createElement("div",{className:"liveshopping-profile-picture"},r&&m?n.createElement("a",{href:"/pages/channels/".concat(r)},N):N)},p=function(e){return(0,i.Iu)(e?"global.media.channel_image_with_handle":"global.media.channel_image",{handle:e})}},54703:(e,t,r)=>{"use strict";r.d(t,{x:()=>re,_:()=>ae});r(74916),r(64765),r(66992),r(41539),r(78783),r(33948),r(60285),r(92222),r(82526),r(41817),r(47941),r(32165),r(47042),r(68309),r(91038);var n=r(67294),a=r(99490),i=r(30653),o=r(9980),l=r.n(o),c=r(20185),s=r(3093),u=(r(26833),r(57327),r(29254),r(39714),r(69600),r(15306),r(21249),r(42941)),m=r(85518),d=r(31662),h=r(58905),p=r(18441);const v=r.p+"a4c5144a3d00f819fdf6cd9a4ca1d41f.svg",f=r.p+"13e20576b9212e298962c0ca2cbcc234.svg",g=r.p+"f97716ab62109a74f04889550e880d20.svg",w=r.p+"c8f1bf87e318638508782d8facc17a89.svg";var b=r(88017);function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(n=(o=l.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var E=Object.values(u.FU);m.gn&&(E=E.filter((function(e){return e!==u.FU.OUTLOOK})));var N={Google:v,iCal:f,Outlook:g,Yahoo:w},S=function(e){var t,r=e.show,i=e.link,o=e.event,l=e.onComplete,c=(0,n.useCallback)((function(e){d.Z.logShowAddToCalendar({show_id:r.id,calendar_type:i.props.children,scheduled_time:new Date(r.startTime).getTime()}),i.props.onClick&&i.props.onClick(e),l()}),[i,r,l]),s=null===(t=i.key)||void 0===t?void 0:t.toString(),m=i.props.href;if(s===u.FU.ICAL){s="Apple";var h=a.ou.fromISO(r.startTime).toFormat("yyyyLLdd'T'HHmmss"),v=a.ou.fromISO(r.startTime).plus(a.nL.fromISO("PT30M")).toFormat("yyyyLLdd'T'HHmmss"),f=["BEGIN:VCALENDAR","VERSION:2.0","BEGIN:VEVENT","URL:".concat(o.location),"METHOD:PUBLISH","DTSTART;TZID=".concat(a.Oh.instance.name,":").concat(h),"DTEND;TZID=".concat(a.Oh.instance.name,":").concat(v),"SUMMARY:".concat(o.title),"DESCRIPTION:".concat(o.description.replace(/(\r?\n|<br ?\/?>)/g,"\\n")),"LOCATION:".concat(o.location),"END:VEVENT","END:VCALENDAR"].join("\n");m=encodeURI("data:text/calendar;charset=utf8,".concat(f))}return n.createElement("a",{href:m,key:i.key,onClick:c,className:"bl-core-button"},n.createElement(p.M,{src:N[i.key],alt:s}),n.createElement("p",null,s))},I=(0,u.ZP)((function(e){var t=e.setOnClick,r=e.onClick;return(0,n.useEffect)((function(){t(r)}),[r]),n.createElement(n.Fragment,null)}),(function(e){var t=e.onRequestClose,r=e.children,a=e.show,i=e.afterReminder,o=e.event,l=_((0,n.useState)(!1),2),c=l[0],s=l[1],u=function(){return s(!0)},m=function(e){c&&t(e)};return n.createElement("div",{className:"liveshopping-calendar__wrapper-with-bg"},n.createElement("div",{className:"liveshopping-modal__bg liveshopping-modal__calendar-bg liveshopping-modal__anim-bg-".concat(c?"close":"open"),onTransitionEnd:m,onClick:u}),n.createElement("div",{className:"liveshopping-calendar__wrapper liveshopping-modal__anim-".concat(c?"close":"open"),onTransitionEnd:m},n.createElement("div",{className:"liveshopping-modal__header"},n.createElement("h2",null," ")," ",n.createElement(p.M,{className:"liveshopping-modal__close",src:b.Z,onClick:u,alt:(0,h.Iu)("accessibility.close")})),n.createElement("h1",null,(0,h.Iu)(i?"livestream.watch.reminder_confirmed":"livestream.watch.calendar_header")),i&&n.createElement("p",null,(0,h.Iu)("livestream.watch.calendar_add")),r.map((function(e,t){return n.createElement(S,{show:a,link:e,event:o,key:t,onComplete:u})}))))})),O=function(e){var t,r=a.ou.fromISO(e.show.startTime,{zone:"utc"}).toFormat("yyyyLLdd'T'HHmmss'Z'"),i=a.ou.fromISO(e.show.startTime).toFormat("HH:mm"),o=a.ou.fromISO(e.show.startTime,{zone:"utc"}).plus(a.nL.fromISO("PT30M")).toFormat("yyyyLLdd'T'HHmmss'Z'"),l={title:(0,h.Iu)("livestream.watch.calendar_title",{handle:e.show.handle,time:i}),description:e.show.title,startDatetime:r,endDatetime:o,duration:.5,location:null!==(t=e.showUrl)&&void 0!==t?t:"".concat(window.location.origin,"/pages/live-shopping"),timezone:a.Oh.instance.name};return n.createElement(I,{className:"liveshopping-calendar__outer-wrapper",buttonProps:{setOnClick:e.setOnClick},dropdownProps:{show:e.show,afterReminder:e.afterReminder,event:l},event:l,items:E})},k=r(23985),C=r(62783),T=r(34994),A=r(43844),L=r(60856),D=r(57154),j=r(83665);const M=r.p+"64fa6d77b676a1545ad29886c87f265c.svg",P=r.p+"8255ed9e3e9d850c2140f1171b9d3e64.svg",U=r.p+"32c62d45e3450d622779c0ecd75e322d.svg",x=r.p+"3ac473e66157e2e267e9bcb57ae48683.svg";var R=r(93970),z=r(96974),V=r(38094),Z=r(51120),F=r(96666),H=r(38242),G=r(88355),W=r(60282),q=r(8185),B=r(5284);function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(n=(o=l.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return J(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return J(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var $=function(e){var t,r=e.className,a=e.children,i=e.wasSticking,o=(0,n.useRef)(null),l=Y((0,n.useState)(null!==(t=null==i?void 0:i.current)&&void 0!==t&&t),2),c=l[0],s=l[1];return(0,n.useEffect)((function(){if(o.current){var e=new IntersectionObserver((function(e){var t=Y(e,1)[0],r=t.intersectionRatio<1&&t.boundingClientRect.top>0;i&&(i.current=r),s(r)}),{threshold:[1]});e.observe(o.current);var t=function(){o.current&&(e.unobserve(o.current),e.observe(o.current))};return window.addEventListener("resize",t),function(){e.disconnect(),window.removeEventListener("resize",t)}}}),[o,i]),n.createElement("div",{className:"".concat(r).concat(c?" bl-core-sticking":""),ref:o},a)},K=r(65503),X=r(8806);function Q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(n=(o=l.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ee(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ee(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function te(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var re=function(e){var t=(0,V.bp)(e.showId);return n.createElement("div",{className:"liveshopping-stream-card__bare-show-link"},n.createElement("p",null,n.createElement("a",{href:t},(0,h.Iu)("livestream.watch.link_to_show"))))},ne=l()();function ae(e){var t,r=e.show,i=e.size,o=void 0===i?"small":i,l=e.edit,u=void 0!==l&&l,m=e.setWatchOnDemand,d=void 0===m?void 0:m,v=e.watchedShowEnd,f=void 0!==v&&v,g=e.canClick,w=void 0===g?void 0:g,b=e.purchaseReminder,_=void 0===b?void 0:b,y=(0,R.XM)(),E=(0,T.kq)(),N=(0,k.C)(),S=(0,Z.L)(),I=r.state,O=r.subscribed,M=te(r,["state","subscribed"]),G=(0,C.g1)(Date.parse(M.startTime));t="large"===o||"PENDING"!==I&&"RUNNING"!==I?I:G?"RUNNING":"PENDING";var W=Q((0,n.useState)(),2),q=W[0],B=W[1],Y=Q((0,n.useState)(!1),2),J=Y[0],K=Y[1],ee=O||J,re=(0,L.dq)(M.startTime),ne=(0,C.Mw)(M.startTime),ae=Boolean(M.recordings&&M.chatBaseUrl),ue=Q((0,n.useState)(f),2),me=ue[0],de=ue[1];(0,n.useEffect)((function(){f&&setTimeout((function(){de(!1)}),2e4)}),[]);var he=ae&&!me,pe=Q((0,n.useState)(),2),ve=pe[0],fe=pe[1],ge=(0,z.TH)().search;(0,n.useEffect)((function(){"PENDING"===t&&E&&S.requirePreShowSignIn&&!ee&&("true"===new URLSearchParams(ge).get("newAccount")&&(K(!0),c.sO.subscribeUserToShow(E,M.id).catch((function(e){throw y.current&&K(!1),e}))))}),[t,E,ee,ge,M.id,y,S.requirePreShowSignIn]);var we=(0,n.useRef)(!1),be=Q((0,n.useState)(),2),_e=be[0],ye=be[1];(0,n.useEffect)((function(){"loading"!==N&&"large"===o&&(0,V.H1)(r,E,N).then((function(e){y.current&&ye(e)}))}),[E,r.id,r.handle,N]);var Ee=(0,X.J)(M.currentViewers||0);if("loading"===N)return n.createElement(D.g,{alt:"accessibility.loading"});var Ne,Se=c.sO.getShowThumbnailUrl(M.id,{small:{width:375,height:375},medium:{width:375,height:375},large:{width:1024,height:1024}}[o]),Ie=(0,V.bp)(M.id,u);switch(t){case"ENDED":var Oe=new Date(M.endTime).getTime()-new Date(M.startTime).getTime();Oe<0&&(Oe=0);var ke=Oe<36e5?"mm:ss":"hh:mm:ss";Ne=a.nL.fromMillis(Oe).toFormat(ke);break;case"RUNNING":Ne=(0,h.Iu)("livestream.show_card.live");break;case"CANCELLED":Ne=(0,h.Iu)("livestream.show_card.cancelled");break;case"PENDING":Ne=ne;break;default:Ne=(0,h.Iu)("livestream.show_card.unknown")}var Ce=function(){return n.createElement("div",{onClick:function(){void 0!==_e&&((0,A.s)(M.title,_e,ve,fe),c.sO.recordShare(E,M.id))},className:"liveshopping-stream-card__share".concat(void 0===_e?" liveshopping-stream-card__share--disabled":"")},n.createElement(p.M,{src:j.Z,alt:(0,h.Iu)("livestream.watch.share")}),(0,h.Iu)("livestream.watch.share"),n.createElement("span",{className:"liveshopping-share-tooltip".concat(ve?" active":"")},(0,h.Iu)("livestream.watch.link_copied")))},Te=function(e){return n.createElement("div",{className:"liveshopping-show-card__inner"},n.createElement("div",{className:"liveshopping-show-card__header"},n.createElement("div",{className:"liveshopping-show-card__start-or-duration "+"liveshopping-show-card__start-or-duration--".concat(t.toLowerCase())},Ne),e.displaySaved&&M.saved&&n.createElement("div",{className:"liveshopping-show-card__bookmark"},"BM")),n.createElement("div",{className:"liveshopping-show-card__inner-profile-picture"},e.displayAvatar&&n.createElement(s.Y,{handle:M.handle,showName:!0})))};if("large"===o){var Ae=function(e){var t=document.getElementById("react-liveshopping-show-card-buttons");return n.createElement(H.q,{portal:t,renderInline:!1},n.createElement($,{className:"liveshopping-stream-card__button-wrapper",wasSticking:we},n.createElement("div",null,e.children)))},Le=function(){if(!ee&&E){K(!0);var e=c.sO.subscribeUserToShow(E,M.id).catch((function(e){throw y.current&&K(!1),e})).then((function(){y.current&&(0,A.A)(e,q,B,7e3)}))}},De=n.createElement("p",{className:"liveshopping-stream-card__subscribe-popup".concat(q?" active":"")},(0,h.Iu)("livestream.watch.reminder_confirmed"));if("ENDED"===t){var je=!he&&f,Me=function(){return n.createElement("div",{onClick:function(e){return e.stopPropagation()},className:"liveshopping-stream-card__stats"},n.createElement("div",{className:"liveshopping-stream-card__stats-views"},n.createElement(p.M,{src:U,alt:(0,h.Iu)("livestream.watch.views")}),(0,F.M)(M.views)),n.createElement("div",{className:"liveshopping-stream-card__stats-duration"},n.createElement(p.M,{src:x,alt:(0,h.Iu)("livestream.watch.duration")}),Ne),n.createElement("div",{className:"liveshopping-stream-card__stats-date"},n.createElement(ce,{time:M.startTime})))};return n.createElement(n.Fragment,null,De,n.createElement("div",{className:"liveshopping-stream-card liveshopping-stream-card--".concat(t.toLowerCase()," liveshopping-stream-card--large")},n.createElement("div",{className:"liveshopping-stream-card--large-image",style:{backgroundImage:"url(".concat(Se,")")}},!M.publiclyListed&&n.createElement("div",{className:"liveshopping-show-card-footer__test-badge--large"},(0,h.Iu)("livestream.show_card.test_show"))),n.createElement("div",{className:"liveshopping-stream-card--large-content"},je?n.createElement(ie,null):n.createElement(n.Fragment,null,S.displayShowOwner&&n.createElement(s.Y,{handle:M.handle,showName:!0}),n.createElement("div",{className:"liveshopping-stream-card__title-wrapper"},n.createElement("h1",{className:"liveshopping-stream-card__title"},M.title),n.createElement(Ce,null)),n.createElement(oe,{show:M}),n.createElement("div",{className:"liveshopping-stream-card__stat-wrapper"},he&&n.createElement(Me,null),n.createElement(Ce,null))),he&&n.createElement("div",{className:"liveshopping-stream-card__buttons--desktop"},n.createElement("button",{type:"button",onClick:function(){return d&&d(!0)},className:"bl-core-button bl-core-button--cta"},(0,h.Iu)("livestream.watch.watch_now"))),_)),je?n.createElement(ie,null):n.createElement(oe,{show:M}),he&&n.createElement(Ae,null,n.createElement("button",{type:"button",onClick:function(){return d&&d(!0)},className:"bl-core-button bl-core-button--cta"},(0,h.Iu)("livestream.watch.watch_now"))))}return n.createElement(n.Fragment,null,De,n.createElement("div",{className:"liveshopping-stream-card liveshopping-stream-card--".concat(t.toLowerCase()," liveshopping-stream-card--large")},n.createElement("div",{className:"liveshopping-stream-card--large-image",style:{backgroundImage:"url(".concat(Se,")")}},!M.publiclyListed&&n.createElement("div",{className:"liveshopping-show-card-footer__test-badge--large"},(0,h.Iu)("livestream.show_card.test_show"))),n.createElement("div",{className:"liveshopping-stream-card--large-content"},S.displayShowOwner&&n.createElement(s.Y,{handle:M.handle,showName:!0}),n.createElement("div",{className:"liveshopping-stream-card__title-wrapper"},n.createElement("h1",{className:"liveshopping-stream-card__title"},M.title),n.createElement(Ce,null)),n.createElement(oe,{show:M}),n.createElement("div",{className:"liveshopping-stream-card__datetime"},n.createElement("img",{src:P,alt:(0,h.Iu)("livestream.watch.clock")}),re),n.createElement("div",{className:"liveshopping-stream-card__stat-wrapper"},n.createElement(se,{show:M,displayState:t,size:"large"}),n.createElement(Ce,null)),"PENDING"===t&&n.createElement("div",{className:"liveshopping-stream-card__buttons--desktop"},n.createElement(le,{wrapperComponent:n.Fragment,bareShowUrl:Ie,showWithServerData:r,legacySetReminder:Le,setJustSubscribed:K,subscribed:ee})),"RUNNING"===t&&n.createElement("div",{className:"liveshopping-stream-card__buttons--desktop"},n.createElement("button",{type:"button",className:"bl-core-button bl-core-button--cta",onClick:function(){return window.location.href=null!=Ie?Ie:"#"},disabled:!Ie},(0,h.Iu)("livestream.watch.join_now"))))),n.createElement(oe,{show:M}),"RUNNING"===t&&n.createElement(Ae,null,n.createElement("button",{type:"button",className:"bl-core-button bl-core-button--cta",onClick:function(){return window.location.href=null!=Ie?Ie:"#"},disabled:!Ie},(0,h.Iu)("livestream.watch.join_now"))),"PENDING"===t&&n.createElement(le,{wrapperComponent:Ae,bareShowUrl:Ie,showWithServerData:r,legacySetReminder:Le,setJustSubscribed:K,subscribed:ee}))}if("medium"===o){var Pe={backgroundImage:"url(".concat(Se,")")};return n.createElement("div",{className:"liveshopping-stream-card liveshopping-stream-card--".concat(t.toLowerCase()," liveshopping-stream-card--medium")},n.createElement("div",{className:"liveshopping-stream-card__info liveshopping-stream-card__info--".concat(t.toLowerCase()," liveshopping-stream-card__info--").concat(o)},n.createElement("div",{className:"liveshopping-stream-card__info-col liveshopping-stream-card__info-col--left",style:Pe},!M.publiclyListed&&n.createElement("div",{className:"liveshopping-show-card-footer__test-badge--medium"},(0,h.Iu)("livestream.show_card.test_show")),"RUNNING"===t&&n.createElement(Te,{displaySaved:!1,displayAvatar:!1}),n.createElement(se,{show:M,displayState:t,size:"medium"})),n.createElement("div",{className:"liveshopping-stream-card__info-col liveshopping-stream-card__info-col--right"},S.displayShowOwner&&n.createElement(s.Y,{handle:M.handle,showName:!0}),n.createElement("h2",{className:"liveshopping-stream-card__title"},M.title),n.createElement("p",{className:"liveshopping-stream-card__datetime"},re))))}return n.createElement("div",{className:"liveshopping-show-card__wrapper"},n.createElement("a",{href:null!=Ie?Ie:"#",onClick:function(e){return!1===(null==w?void 0:w.current)&&e.preventDefault()}},n.createElement("div",{className:"liveshopping-show-card",style:{backgroundImage:"url(".concat(null!=Se?Se:null,")")}},n.createElement(Te,{displaySaved:!0,displayAvatar:S.displayShowOwner})),n.createElement("div",{className:"liveshopping-show-card-footer"},n.createElement("p",{className:"liveshopping-show-card-footer__title"},M.title),"RUNNING"===I&&Ee&&M.currentViewers?n.createElement("div",{className:"liveshopping-show-card-footer__views"},(0,h.Iu)("livestream.show_card.n_viewers",{count:(0,F.M)(M.currentViewers,!0)})):"RUNNING"!==I&&"PENDING"!==I?n.createElement("div",{className:"liveshopping-show-card-footer__views"},M.views?n.createElement(n.Fragment,null,n.createElement("span",null,"".concat((0,h.Iu)("livestream.show_card.n_views",{count:(0,F.M)(M.views,!0)}))),n.createElement("span",null,"|")):null,n.createElement("span",null,n.createElement(ce,{time:M.endTime}))):null,!M.publiclyListed&&n.createElement("div",{className:"liveshopping-show-card-footer__test-badge"},(0,h.Iu)("livestream.show_card.test_show"))),n.createElement("button",{type:"button",className:"bl-core-button bl-core-button--cta liveshopping-show-card__find-out-more"},(0,h.Iu)("livestream.show_card.find_out_more"))))}var ie=function(){return n.createElement("div",{className:"liveshopping-stream-card__thank-you-wrapper"},n.createElement("h1",{className:"liveshopping-stream-card__thank-you"},(0,h.Iu)("livestream.schedule.thank_you_for_watching")),n.createElement("h3",{className:"liveshopping-stream-card__rewatch-soon"},(0,h.Iu)("livestream.schedule.rewatch_soon")))},oe=function(e){var t=(0,n.useRef)(null),r=Q((0,n.useState)(!0),2),a=r[0],o=r[1],l=Q((0,n.useState)(a),2),c=l[0],s=l[1],u=function(){var e=t.current;if(e){var r=parseInt(window.getComputedStyle(e,":before").height,10)||0;o(e.scrollHeight-r/2>=e.clientHeight)}};return(0,n.useEffect)(u),(0,n.useEffect)((function(){return window.addEventListener("resize",u),function(){return window.removeEventListener("resize",u)}}),[]),e.show.description?n.createElement(n.Fragment,null,n.createElement("div",{ref:t,className:"liveshopping-stream-card__description".concat(c||!a?" liveshopping-stream-card__description--collapsed":"")},(0,i.ZP)(ne.render(e.show.description))),a&&n.createElement("div",{className:"liveshopping-stream-card__description-toggle",onClick:function(){return s((function(e){return!e}))}},(0,h.Iu)(c?"livestream.show_card.read_more":"livestream.show_card.read_less"))):null},le=function(e){var t=Q((0,n.useState)(!1),2),r=t[0],a=t[1],i=Q((0,n.useState)(!1),2),o=i[0],l=i[1],s=Q((0,n.useState)(!1),2),u=s[0],m=s[1],d=Q((0,n.useState)(),2),p=d[0],v=d[1],f=Q((0,n.useState)(),2),g=f[0],w=f[1],b=(0,R.XM)(),_=(0,T.kq)(),y=(0,W.FT)((0,T.Vx)()),E=(0,B.O)(),N=(0,Z.L)(),S=c.sO.uuidToShortString(e.showWithServerData.id);return n.createElement(n.Fragment,null,n.createElement(e.wrapperComponent,null,e.subscribed?n.createElement("button",{type:"button",className:"bl-core-button bl-core-button--cta",disabled:!0},(0,h.Iu)("livestream.watch.reminder_set")):n.createElement("button",{type:"button",className:"bl-core-button bl-core-button--cta",onClick:function(){N.requirePreShowSignIn?_?e.legacySetReminder():document.location.href="/pages/".concat("myaccount","?operation=signUp&return_url=/pages/watch/").concat(S):a(!0)},disabled:!1},(0,h.Iu)("livestream.watch.reminder_cta")),n.createElement("button",{type:"button",className:"bl-core-button--link liveshopping-stream-card__calendar-btn",title:(0,h.Iu)("livestream.watch.calendar_add"),tabIndex:2,onClick:null==p?void 0:p.handler},(0,h.Iu)("livestream.watch.calendar_add"))),r&&n.createElement(G.Z,{setIsOpen:a,wrapperClassName:"liveshopping-modal--reminder"},n.createElement("h1",null,(0,h.Iu)("livestream.watch.reminder_header")),n.createElement("form",null,n.createElement(W.H4,{id:"email",type:"email",state:y,autoComplete:"username",pattern:q.Z.EMAIL_PATTERN,key:"emailInput",label:"livestream.watch.reminder_email",labelStyle:E.textEditorLabelStyle,required:!0}),n.createElement("button",{type:"submit",className:"bl-core-button bl-core-button--cta",onClick:function(t){m(!0),e.setJustSubscribed(!0),c.sO.subscribeToShow(_,e.showWithServerData.id,y.currentValue).then((function(){b.current&&(m(!1),a(!1),l(!0),null==p||p.handler(t))})).catch((function(t){if(b.current){e.setJustSubscribed(!1),m(!1);var r=!1;t instanceof K.z&&422===t.response.status&&(w("livestream.watch.reminder_error.email"),r=!0),r||(w("livestream.watch.reminder_error.other"),console.error("Error subscribing user",t))}}))},disabled:u},(0,h.Iu)("livestream.watch.reminder_confirm"))),g?n.createElement("p",{className:"liveshopping-modal--reminder-error"},(0,h.Iu)(g)):null,n.createElement("p",{dangerouslySetInnerHTML:(0,h.yH)("livestream.watch.reminder_terms")})),n.createElement(O,{setOnClick:function(e){v({handler:e})},show:e.showWithServerData,showUrl:e.bareShowUrl,afterReminder:o}))};function ce(e){var t=e.time?new Date(e.time).getTime():0,r=(0,C.Vd)(t,6e4);return n.createElement(n.Fragment,null,r)}function se(e){var t=e.show,r=e.displayState;e.size;switch(r){case"PENDING":return n.createElement(ue,{show:t,state:r,hideHeader:!0});case"RUNNING":return n.createElement("div",{className:"liveshopping-show-card__status liveshopping-show-card__status--running"},n.createElement("h1",null,(0,h.Iu)("livestream.show_card.live_now")));case"CANCELLED":return n.createElement("div",{className:"liveshopping-show-card__status liveshopping-show-card__status--cancelled"},n.createElement("h1",null,(0,h.Iu)("livestream.show_card.cancelled")));default:return n.createElement("div",{className:"liveshopping-show-card__status liveshopping-show-card__status--unknown"})}}function ue(e){var t=e.show,r=e.state,i=e.hideHeader,o=void 0!==i&&i,l=(0,C.qz)(t.startTime),c=(0,C.ZA)(Date.parse(t.startTime),1e3),s=c<0?~c:0,u=a.nL.fromObject({seconds:s}),m=u.as("days")>=1?"days":u.as("hours")>=1?"hours":u.as("minutes")>=1?"minutes":"seconds";return n.createElement(n.Fragment,null,!o&&n.createElement("h1",null,l?(0,h.Iu)("livestream.schedule.going_live_soon"):(0,h.Iu)("livestream.schedule.going_live_later")),n.createElement("div",{className:"liveshopping-stream-card__countdown liveshopping-stream-card__countdown--".concat(r.toLowerCase()," liveshopping-stream-card__countdown--with-").concat(m)},n.createElement(p.M,{src:M,alt:(0,h.Iu)("livestream.schedule.live_in")}),n.createElement("p",null,u.toFormat((0,h.Iu)("livestream.schedule.countdown_luxon_format_with_".concat(m))))))}},8806:(e,t,r)=>{"use strict";r.d(t,{J:()=>c});r(82526),r(41817),r(41539),r(32165),r(66992),r(78783),r(33948),r(47042),r(68309),r(91038);var n=r(67294),a=r(51120),i=r(93970);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(n=(o=l.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function c(e){var t=(0,a.L)(),r=o((0,i.KS)(0),2),l=r[0],c=r[1],s=o((0,n.useState)(!0===t.displayLiveViewers||t.displayLiveViewers&&e>=t.displayLiveViewers.minCount),2),u=s[0],m=s[1];return(0,n.useEffect)((function(){!0===t.displayLiveViewers||!1===t.displayLiveViewers||l||(!u&&e>=t.displayLiveViewers.showAgainMinCount?m(!0):u&&e<t.displayLiveViewers.minCount&&(c(t.displayLiveViewers.timeout),m(!1)))}),[e,l,t.displayLiveViewers,c,u]),u}},62783:(e,t,r)=>{"use strict";r.d(t,{Mw:()=>c,qz:()=>s,ZA:()=>u,g1:()=>m,Vd:()=>d,Bx:()=>h});var n=r(30788),a=r(93970),i=r(99490),o=r(58905),l=r(67294);function c(e){var t=(0,o.Iu)("global.locale.locale");return s(e)?new Date(e).toLocaleTimeString(t,{hour:"numeric",minute:"numeric",timeZoneName:"short"}):new Date(e).toLocaleDateString(t,{dateStyle:"short"})}function s(e){var t=i.ou.fromISO(e).startOf("day").toMillis(),r=m(t),n=m(t+864e5);return r&&!n}function u(e,t){var r=(0,n.Z)(0);return(0,a.YV)(e,t,r)}function m(e){var t=(0,n.Z)(0);return(0,a.Yd)(e,t)}function d(e,t){var r=(0,n.Z)(0);(0,a.YV)(e,t,r);var l=(new Date).getTime()+r-e;return l>0&&l<6e4?(0,o.Iu)("livestream.schedule.just_now"):i.ou.fromMillis(e).toRelative({base:i.ou.now().plus(i.nL.fromMillis(r))})}function h(e,t){(0,l.useEffect)((function(){function r(r){e&&e.current&&!e.current.contains(r.target)&&t()}return document.addEventListener("mousedown",r),function(){document.removeEventListener("mousedown",r)}}),[e,t])}},96666:(e,t,r)=>{"use strict";r.d(t,{M:()=>n});var n=function(e,t){for(var r=0,n=[{min:1e9,letter:"B"},{min:1e6,letter:"M"},{min:1e3,letter:"K"}];r<n.length;r++){var a=n[r],i=a.min,o=a.letter;if(Math.abs(e)>=i)return Math.round(10*e/i)/10+o}return t?e:"".concat(e)}},83665:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=r.p+"99ce9df0c1abcf9a435f35650dba7453.svg"},50247:()=>{}}]);