(self.webpackChunkrose_inc_web=self.webpackChunkrose_inc_web||[]).push([[510],{39510:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});r(35666),r(74916),r(23123),r(54747),r(91038),r(78783),r(9653),r(21249),r(82526),r(41817),r(41539),r(32165),r(66992),r(33948),r(47042),r(68309),r(88674);var n=r(67294),o=r(59990),u=r(6848),l=r(73935);function s(e,t,r,n,o,u,l){try{var s=e[u](l),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,u=void 0;try{for(var l,s=e[Symbol.iterator]();!(n=(l=s.next()).done)&&(r.push(l.value),!t||r.length!==t);n=!0);}catch(e){o=!0,u=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw u}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const i=function(){var e=c((0,n.useState)(!1),2),t=e[0],r=e[1],a=c((0,n.useState)(!0),2),i=a[0],d=a[1],f=(0,n.useRef)(null),m=(0,n.useRef)(null),v=(0,n.useRef)(null),b=c((0,n.useState)("0"),2),_=b[0],p=b[1],y=c((0,n.useState)(void 0),2),h=y[0],E=y[1],k=function(e){if(void 0!==h&&f.current)switch(e){case 1:f.current.currentTime=0;break;case 2:f.current.currentTime=h}},g=function(){if(m.current&&f.current&&v.current&&void 0!==h){var e=h/f.current.duration,t=v.current.clientWidth;m.current.style.marginLeft=Math.round(e*t)-7+"px"}};(0,n.useEffect)((function(){var e=window.location.href.split("~"),n=e[e.length-1];d("emailCollected"!==n);var o=document.getElementsByClassName("bl-sf-results__button--email");Array.from(o).forEach((function(e){e.addEventListener("click",(function(){r(!t)})),i||e.classList.add("bl-sf-results__button--hidden")}))}),[i,t]),(0,n.useEffect)((function(){var e=document.querySelector("button.chat-now"),t=document.querySelector(".beauty-advisor-wrapper .live-advisor-wrap .BA-CC-chatbubble-extended");e&&t&&e.addEventListener("click",(function(){t.click()}))}),[]),(0,n.useEffect)((function(){var e=function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var r,n,o,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.currentTarget.dataset,n=r.productHandle,o=r.variantColorName,l=Number(t.currentTarget.dataset.purchaseId),u.ZP.logAddToBag({product_handle:n,shade_name:null!=o?o:null,variant_id:l});case 3:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var u=e.apply(t,r);function l(e){s(u,n,o,l,c,"next",e)}function c(e){s(u,n,o,l,c,"throw",e)}l(void 0)}))});return function(e){return t.apply(this,arguments)}}();return document.querySelectorAll(".complexion-product__add-to-button.add-to-cart-button, .add-to-cart-button--best-results.add-to-cart-button").forEach((function(t){return t.addEventListener("click",e)})),function(){document.querySelectorAll(".complexion-product__add-to-button.add-to-cart-button, .add-to-cart-button--best-results.add-to-cart-button").forEach((function(t){return t.removeEventListener("click",e)}))}}),[]),(0,n.useEffect)((function(){var e=document.querySelector(".bl-sf-results-block__col--best-results.bl-sf-results-block__col--decor");if(e){var t=e.dataset.stepBreak;if(E(t?parseInt(t):void 0),f.current)if(document.getElementById("bl-sf-results-video__control-slider")&&v.current)new ResizeObserver((function(){f.current&&g()})).observe(v.current)}}),[]),(0,n.useEffect)((function(){g()}),[f,m,v,g]),(0,n.useEffect)((function(){if(f.current&&void 0!==h){var e=document.querySelectorAll(".bl-sf-results-block-best-results__step");if(e&&!(e.length<2)){var t=e[1].classList.contains("bl-sf-results-block-best-results__step--inactive");(f.current.currentTime>=h&&t||f.current.currentTime<h&&!t)&&e.forEach((function(e){e.classList.toggle("bl-sf-results-block-best-results__step--inactive")}))}}}),[f,h,_]);var w=document.getElementsByClassName("bl-sf-results-video")[0];return w?l.createPortal(n.createElement(n.Fragment,null,n.createElement(o.hE,{isOpen:t,closeButtonCallback:function(){return r(!1)}}),n.createElement("video",{className:"bl-sf-results-video__player",ref:f,id:"bl-sf-results-video__player",autoPlay:!0,controls:!1,loop:!0,muted:!0,playsInline:!0,onPause:function(e){return e.currentTarget.classList.add("bl-sf-results-video__player--paused")},onPlay:function(e){return e.currentTarget.classList.remove("bl-sf-results-video__player--paused")},onTimeUpdate:function(){f.current&&p(Math.round(f.current.currentTime/f.current.duration*100)+"")}},window.shadeFinderResultsVideos.map((function(e,t){return n.createElement("source",{src:e.url,type:e.mime_type,key:t})}))),n.createElement("div",{className:"bl-sf-results-video__controls"},n.createElement("button",{type:"button",id:"bl-sf-results-video__control-play",className:"bl-sf-results-video__control bl-sf-results-video__control-play",onClick:function(){var e=f.current;e&&(e.paused?e.play():e.pause())}},n.createElement("span",null)),n.createElement("div",{id:"bl-sf-results-video__control-track",ref:v},n.createElement("input",{key:_,id:"bl-sf-results-video__control-slider",type:"range",max:"100",value:_,onChange:function(e){if(f.current){var t=function(e){if(f.current){var t=parseFloat(e);return f.current.duration*t/100}}(e.currentTarget.value);void 0!==t&&(f.current.currentTime=t)}}}),n.createElement("div",{className:"bl-sf-results-video__control-marker bl-sf-results-video__control-marker--step1"},n.createElement("div",{className:"bl-sf-results-video__control-marker-icon"}," "),n.createElement("div",{className:"bl-sf-results-video__control-marker-label",onClick:function(){return k(1)}},"Step 1")),n.createElement("div",{className:"bl-sf-results-video__control-marker bl-sf-results-video__control-marker--step2",ref:m},n.createElement("div",{className:"bl-sf-results-video__control-marker-icon"}," "),n.createElement("div",{className:"bl-sf-results-video__control-marker-label",onClick:function(){return k(2)}},"Step 2"))),n.createElement("button",{type:"button",id:"bl-sf-results-video__control-mute",className:"bl-sf-results-video__control bl-sf-results-video__control-mute bl-sf-results-video__control-mute--muted".concat(" bl-sf-results-video__control-mute--hidden"),disabled:true,onClick:function(e){var t=f.current;t&&(t.muted?(t.muted=!1,e.currentTarget.classList.remove("bl-sf-results-video__control-mute--muted")):(t.muted=!0,e.currentTarget.classList.add("bl-sf-results-video__control-mute--muted")))}},n.createElement("span",null)))),w):null}}}]);