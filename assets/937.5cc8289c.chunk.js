(self.webpackChunkrose_inc_web=self.webpackChunkrose_inc_web||[]).push([[937],{56931:(e,t,r)=>{"use strict";r.d(t,{BA:()=>u});r(47941),r(82526),r(57327),r(38880),r(54747),r(49337),r(41817),r(41539),r(32165),r(66992),r(78783),r(33948),r(47042),r(68309),r(91038),r(19601);var n=r(67294);function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var u=function(e){var t=i((0,n.useState)(),2),r=t[0],l=t[1],u=e.canClick,c=e.vertical,s=o(e,["canClick","vertical"]),v=function(e){e.currentTarget.classList.remove("bl-core-dragging"),l(void 0)};return n.createElement("div",a({},s,{onMouseDown:function(e){l({scrolling:!0,scrollPos:c?e.currentTarget.scrollTop:e.currentTarget.scrollLeft,mousePos:c?e.clientY:e.clientX}),u.current=!0,e.currentTarget.classList.add("bl-core-dragging")},onMouseUp:v,onMouseLeave:v,onPointerCancel:v,onTouchEnd:v,onMouseMove:function(e){var t;r&&(c?(e.currentTarget.scrollTop=r.scrollPos+(r.mousePos-e.clientY),t=Math.abs(e.currentTarget.scrollTop-r.scrollPos)):(e.currentTarget.scrollLeft=r.scrollPos+(r.mousePos-e.clientX),t=Math.abs(e.currentTarget.scrollLeft-r.scrollPos)),u.current=t<10)}}))}},76581:(e,t,r)=>{"use strict";r.d(t,{Y:()=>T,a:()=>b});r(66992),r(41539),r(70189),r(78783),r(33948),r(54747),r(82526),r(41817),r(32165),r(47042),r(68309),r(91038);var n=r(59010),a=r(67294),o=r(51163),i=r(10295),l=r(16293),u=r(31662),c=r(20185),s=r(36334),v=r(58905),f=r(93970),d=r(74652);const y=r.p+"69a6cab0bc9091b6a6391849994a1452.svg";var E=r(18441);function m(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=h(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(l)throw o}}}}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw o}}return r}(e,t)||h(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){if(e){if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(e,t):void 0}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function b(e,t){var r=p((0,a.useState)(void 0),2),n=r[0],i=r[1],l=(0,f.qY)(),c=(0,a.useRef)(null);return c.current||(c.current=new Set),{internal:[n,i,l,c],isPaused:null==n?void 0:n.isPaused(),isMuted:null==n?void 0:n.isMuted(),setMuted:function(r){n&&r!==n.isMuted()&&(e&&t&&(r?u.Z.logShowWatchMute({show_id:e,playback_time:t.nowIfOnDemandForAnalytics()}):u.Z.logShowWatchUnmute({show_id:e,playback_time:t.nowIfOnDemandForAnalytics()})),n.setMuted(r))},pause:function(){return null==n?void 0:n.pause()},play:function(){return null==n?void 0:n.play()},playerState:null==n?void 0:n.getState(),addPositionListenerAndReturnRemover:(0,o.vl)((function(e){return c.current.add(e),function(){c.current.delete(e)}}),[])}}function T(e){var t=e.control,r=e.streamUrl,o=e.isLive,u=e.seekRef,h=e.onQualityChanged,g=e.showErrors,b=p(t.internal,4),T=b[0],P=b[1],L=b[2],A=b[3],I=p((0,a.useState)(),2),S=I[0],w=I[1],_=p((0,a.useState)(),2),D=_[0],M=_[1],O=p((0,a.useState)(!1),2),k=O[0],C=O[1],N=(0,f.ZU)(),U=(0,a.useRef)(null),j=(0,a.useRef)(null),R=(0,f.KJ)(!!r),B=(0,f.KJ)(h);(0,a.useEffect)((function(){var e=(0,n.create)({wasmBinary:i.Z,wasmWorker:l.Z});P(e);var t=function(e){c.sO.broadcastStreamMetadata(e)};e.addEventListener(n.PlayerEventType.TEXT_METADATA_CUE,t);var r=function(){console.log("Player initialised")};e.addEventListener(n.PlayerEventType.INITIALIZED,r);var a=function(t){t.type===n.ErrorType.NOT_AVAILABLE&&404===t.code||(console.error(t),s.Z.instance.reportError("Error playing video: ".concat(JSON.stringify(t)),(new Error).stack||"")),M(e.getState()),w(t)};e.addEventListener(n.PlayerEventType.ERROR,a),e.addEventListener(n.PlayerEventType.MUTED_CHANGED,L);var o=function(t){if(j.current&&"Playing"===e.getState()){var r=1e3*t;j.current.current.positionMillis=r,A.current.forEach((function(e){return e(r)}))}};e.addEventListener(n.PlayerEventType.TIME_UPDATE,o);var u=function(t){var r;if(console.log("Seek completed"),0===e.getPosition()&&Math.abs(e.getPosition()-t)>1)return e.seekTo(t),void L();j.current=U.current,null!==(r=j.current)&&void 0!==r&&r.current.initialIsPaused||!R.current?e.pause():e.play(),L()};e.addEventListener(n.PlayerEventType.SEEK_COMPLETED,u);var v=function(){return C(!0)};e.addEventListener(n.PlayerEventType.AUDIO_BLOCKED,v),e.addEventListener(n.PlayerEventType.PLAYBACK_BLOCKED,v);var f=function(e){var t;return null===(t=B.current)||void 0===t?void 0:t.call(B,e)};e.addEventListener(n.PlayerEventType.QUALITY_CHANGED,f);var d=function(t){var r,n=[],a=m(t);try{var i=function(){var t=r.value,a=function(t){return function(){console.log("Set player state to "+t),o(e.getPosition()),j.current&&"Ended"===t&&(j.current.current.ended=!0),L(),w(void 0),M(t)}}(t);e.addEventListener(t,a),n.push((function(){return e.removeEventListener(t,a)}))};for(a.s();!(r=a.n()).done;)i()}catch(e){a.e(e)}finally{a.f()}return function(){var e,t=m(n);try{for(t.s();!(e=t.n()).done;){(0,e.value)()}}catch(e){t.e(e)}finally{t.f()}}}([n.PlayerState.IDLE,n.PlayerState.READY,n.PlayerState.BUFFERING,n.PlayerState.ENDED,n.PlayerState.PLAYING]);return function(){e.removeEventListener(n.PlayerEventType.TEXT_METADATA_CUE,t),e.removeEventListener(n.PlayerEventType.INITIALIZED,r),e.removeEventListener(n.PlayerEventType.ERROR,a),e.removeEventListener(n.PlayerEventType.MUTED_CHANGED,L),e.removeEventListener(n.PlayerEventType.TIME_UPDATE,o),e.removeEventListener(n.PlayerEventType.SEEK_COMPLETED,u),e.removeEventListener(n.PlayerEventType.AUDIO_BLOCKED,v),e.removeEventListener(n.PlayerEventType.PLAYBACK_BLOCKED,v),e.removeEventListener(n.PlayerEventType.QUALITY_CHANGED,f),d(),e.delete()}}),[B,A,L,P,R,N]);var Z=(0,a.useCallback)((function(e){null!==e&&T&&r&&(T.attachHTMLVideoElement(e),o&&T.setAutoplay(!0),T.setLiveLowLatencyEnabled(!0),T.setInitialBufferDuration(4),T.load(r),U.current=j.current)}),[o,T,r]),K=u!==j.current&&U.current===j.current;(0,a.useEffect)((function(){T&&u&&K&&(console.log("SeekTo"),T.seekTo(u.current.positionMillis/1e3),U.current=u)}),[T,u,K]),(0,a.useEffect)((function(){if(T&&r&&o&&(D===n.PlayerState.IDLE||D===n.PlayerState.ENDED)){var e=setInterval((function(){console.log("Try to play the stream"),T.load(r),T.play(),U.current&&T.seekTo(U.current.current.positionMillis/1e3)}),5e3);return function(){return clearInterval(e)}}}),[o,T,D,r]),(0,a.useEffect)((function(){T&&(t.isMuted||C(!1))}),[t.isMuted,T]),(0,a.useEffect)((function(){T&&!r&&T.pause()}),[T,r]);var Y,F=D===n.PlayerState.BUFFERING;return D!==n.PlayerState.ENDED&&r||(Y=(0,v.Iu)(o?"livestream.watch.errors.stream.offline":"livestream.watch.errors.stream.on_demand_offline")),S&&(Y=S.type===n.ErrorType.NOT_AVAILABLE?404===S.code?(0,v.Iu)("livestream.watch.errors.stream.offline"):429===S.code?(0,v.Iu)("livestream.watch.errors.stream.too_many_people"):(0,v.Iu)("livestream.watch.errors.stream.offline"):(0,v.Iu)("livestream.watch.errors.stream.unknown")),a.createElement(a.Fragment,null,g&&Y&&a.createElement("p",{className:"liveshopping-stream__error"},Y),F&&a.createElement("div",{className:"liveshopping-stream__darken"},a.createElement(E.M,{className:"liveshopping-stream__buffering",src:y,alt:(0,v.Iu)("livestream.watch.buffering_alt")})),a.createElement("div",{className:"liveshopping-stream__video-background"}),a.createElement("video",{playsInline:!0,ref:Z}),a.createElement("div",{className:"liveshopping-audio-blocked".concat(k?" active":""),onClick:function(){t.setMuted(!1)}},a.createElement("img",{src:d.Z,alt:(0,v.Iu)("livestream.watch.audio_muted")}),a.createElement("div",null,a.createElement("h3",null,(0,v.Iu)("livestream.watch.audio_blocked_title")),a.createElement("p",null,(0,v.Iu)("livestream.watch.audio_blocked")))))}},74652:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=r.p+"cae3c36d644e961ac493856f7f9236ce.svg"},66746:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=r.p+"5735ccd8323721dc729c3662b0d523a3.svg"}}]);