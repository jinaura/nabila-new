(self.webpackChunkrose_inc_web=self.webpackChunkrose_inc_web||[]).push([[242],{59990:(e,t,n)=>{"use strict";n.d(t,{hE:()=>p,ZP:()=>A});n(74916),n(23123),n(69600),n(82526),n(41817),n(41539),n(32165),n(66992),n(78783),n(33948),n(47042),n(68309),n(91038);var r=n(67294),o=n(76909),a=n(85518),i=n(70407),s=n(95083),c=n(58905),l=n(75423);function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var _=function(e,t){if(window.localStorage){try{window.localStorage.setItem(e,t)}catch(n){return console.warn("Got error while setting",e,t,n),!1}return!0}return!1},m=function(e,t){var n=t?t.split("~"):void 0;if(n){""===n[n.length-1]&&(n.pop(),n.push("emailCollected"));var r={items:e,results_url:n.join("~")};window.sendKlaviyoTrackEvent("ShadeFinderResultsEmail",r)}else console.warn("No resultsPageUrl")},E=function(e){var t=e.skipButtonCallback,n=e.items,o=e.resultsPageUrl,a=u((0,r.useState)(!0),2),i=a[0],s=a[1];return(0,r.useEffect)((function(){var e,t=(e="signInEmail",window.localStorage?window.localStorage.getItem(e):null);if(t){var n=document.querySelector("[data-email]");null!==n&&(n.value=t)}window.KlaviyoSubscribe?window.KlaviyoSubscribe.attachToForms("[data-email-form]",{extra_properties:{$source:"Shade Finder Email Capture",$consent:!0,$consent_version:'{{- "shade_finder.email_capture.newsletter_optin" |  t -}}'}}):console.warn("Klaviyo not integrated in this environment: users will not be subscribed to newsletters")}),[]),r.createElement("form",{"data-email-form":!0,onSubmit:function(e){if(e.stopPropagation(),i||e.preventDefault(),window.KlaviyoSubscribe||(console.warn("Klaviyo not integrated in this environment: NOT subscribing to newsletter"),e.preventDefault()),n||window.klaviyoSFData){var r=document.querySelector("[data-modal]");!function(e,t,n){var r=document.querySelector("[data-email]");if(!r)return null;var o=r.value;window.sendKlaviyoIdentifyEvent?window.sendKlaviyoIdentifyEvent(o,(function(){return m(e,t)})):console.warn("Klaviyo not integrated in this environment: NOT sending results email to :",o),_("signInEmail",o),n&&function(e){e.classList.add("bl-modal__wrapper--hidden")}(n)}(null!=n?n:window.klaviyoSFData,o,r)}t()}},r.createElement("input",{type:"hidden",name:"g",value:"TvzYRz"}),r.createElement("input",{type:"hidden",name:"$fields",value:"$consent"}),r.createElement("input",{type:"hidden",name:"$list_fields",value:"$consent"}),r.createElement("input",{className:"bl-email-collection__email",type:"email",autoComplete:"email",name:"email",required:!0,placeholder:(0,c.Iu)("shade_finder.email_capture.email"),"data-email":!0}),r.createElement("button",{className:"bl-core-button bl-email-collection__cta",type:"submit"},(0,c.Iu)("shade_finder.email_capture.submit")),r.createElement("input",{className:"bl-email-collection__optin",id:"optin",type:"checkbox",checked:i,onChange:function(){return s(!i)},"data-newsletter-optin":!0}),r.createElement("label",{htmlFor:"optin"},(0,c.Iu)("shade_finder.email_capture.newsletter_optin")),r.createElement("div",{className:"bl-email-collection__terms",dangerouslySetInnerHTML:(0,c.yH)("shade_finder.email_capture.terms_html")}),r.createElement("button",{className:"bl-core-button bl-email-collection__skip",type:"button",onClick:t,"data-modal-close":!0},(0,c.Iu)("shade_finder.email_capture.skip")))},p=function(e){var t=e.isOpen,n=e.closeButtonCallback;return r.createElement("div",{className:"bl-modal__wrapper".concat(t?"":" bl-modal__wrapper--hidden"),"data-modal":!0,"data-modal-close":!0,onClick:n},r.createElement("div",{className:"bl-modal",onClick:function(e){return e.stopPropagation()}},r.createElement("button",{className:"bl-modal__close","data-modal-close":!0,type:"button",onClick:n},(0,c.Iu)("shade_finder.email_capture.close")),r.createElement("div",{className:"bl-modal-content"},r.createElement("h2",{className:"bl-email-collection__title"},(0,c.Iu)("shade_finder.email_capture.title")),r.createElement("div",{className:"bl-email-collection__subtitle"},(0,c.Iu)("shade_finder.email_capture.subtitle")),r.createElement(E,{skipButtonCallback:function(){return n()},resultsPageUrl:window.location.href}))))};const A=function(e,t,n,u){var d=(0,r.useContext)(i.QuestionnaireContext);return r.createElement("div",{className:"questionnaire-container"},r.createElement("div",{className:"questionnaire-content-secondary"},!a.tq&&r.createElement(o.Z,{mediaKey:"email_collection"})),r.createElement("div",{className:"questionnaire-content"},r.createElement(s.Z,{showThis:!0,title:"shade_finder.email_capture.title",smallText:"shade_finder.back",onSmallTextClick:function(){void 0===d.selfieURL?d.handleResetToCategory("images"):d.handleResetToCategory("selfie")}}),r.createElement("h3",{className:"question__title title-text mb-3"},(0,c.Iu)("shade_finder.email_capture.subtitle")),n?r.createElement(l.Z,null):r.createElement(E,{skipButtonCallback:e,items:t,resultsPageUrl:u})))}},70407:(e,t,n)=>{"use strict";n.r(t),n.d(t,{QuestionnaireContext:()=>Ge,ShadeFinderSettingsStorageKey:()=>We,default:()=>Xe});n(35666),n(66992),n(51532),n(41539),n(78783),n(33948),n(88674),n(92222),n(68309),n(91038),n(69826),n(54747),n(21249),n(34553),n(24603),n(74916),n(39714),n(64765),n(2707),n(68304),n(30489),n(12419),n(47941),n(82526),n(57327),n(38880),n(49337),n(41817),n(32165);var r=n(67294),o=n(2492),a=(n(47042),n(65069),n(26833),n(45989)),i=n(84179),s=n(58905);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const d=(0,r.memo)((function(e){var t=e.animateIn,n=e.chosenId,s=e.color,c=e.description,u=e.description_title,d=e.featured_image_url,_=e.handleUpdateAnswer,m=e.id,E=e.index,p=e.isAnimation,A=e.isChosen,f=e.isCursorPointer,P=e.modelName,h=e.payload,v=e.recommendedConcealer,R=e.recommendedFoundation,C=e.recommendedSerum,b="s"+h.darkness+" u"+h.warmth+"".concat(P?" ".concat(P):"")+" "+m+"".concat(v?" cp".concat(v):"")+"".concat(R?" fp".concat(R):"")+"".concat(C?" sp".concat(C):""),y="question__answer";(n===m||A)&&(y+=" question__answer--chosen"),s&&(y+=" question__answer--circle-icon"),d&&(y+=" question__answer--image"),s||d||(y+=" question__answer--text-only"),f&&(y+=" cursor-pointer");return r.createElement(a.Z,{key:m+Math.random(),mode:"out-in"},r.createElement(o.ZP,{key:m+(E+1)+Math.random(),timeout:1+100*(E+1),mountOnEnter:!0,unmountOnExit:!0,appear:t,in:p},(function(e){return r.createElement(r.Fragment,null,r.createElement("button",{id:m.toString(),key:m+E,style:l(l({},i.h),i.v[e]),className:y,type:"button",onClick:function(){_(m,h),window.scrollTo({top:0,behavior:"smooth"})}},d&&r.createElement(r.Fragment,null,r.createElement("img",{className:"answer-img opacity-5",src:d,alt:"Photograph of a model"}),r.createElement("span",{className:"question-debug__span"},"true"==="".concat({NODE_ENV:"production",REACT_APP_MODEL_URI_PREFIX:"https://cdn.roseinc.beautylabs.com/production/132459692220/vto/models/",REACT_APP_SKIN_TONE_API:"https://skintone.roseinc.beautylabs.com",REACT_APP_NAME:"rose-inc-web",REACT_APP_ERROR_REPORT_URL:"https://errors.amyris.beautylabs.com/errorReport",REACT_APP_DEFAULT_MODEL_NAME_EYEBROWS:"FUTest-Brows-6",REACT_APP_ACCOUNT_SYSTEM_PASSWORD_REQUIRE_NUMBERS:"true",REACT_APP_BI_ACCOUNT_APP_NAME:"account",REACT_APP_PLUGIN_BASE:"https://cdn.roseinc.beautylabs.com/production/132459692220/vto/plugin/",REACT_APP_BI_APP_NAME:"roseinc_web",REACT_APP_ACCOUNT_NAMESPACE:"roseinc",REACT_APP_BI_LIVESHOPPING_APP_NAME:"liveshopping",REACT_APP_COMMIT_HASH:"cd7b583f591f3aa5f0b8067f9bb0c2bb2fe804eb",REACT_APP_STOREFRONT_API_KEY:"f1c1eba5583bb760c097cba85a0b1a51",REACT_APP_ACCOUNT_BACKEND_BASE_URI:"https://account.amyris.beautylabs.com/api/consumer/roseinc",REACT_APP_LIVESHOPPING_NAMESPACE:"roseinc",REACT_APP_ACCOUNT_SYSTEM_PASSWORD_REQUIRE_SYMBOLS:"true",REACT_APP_FUSIONFS_URI_PREFIX:"https://cdn.roseinc.beautylabs.com/production/132459692220/vto/plugin/data/",REACT_APP_BI_REPORT_URI:"https://logs.amyris.beautylabs.com/bi",REACT_APP_DEFAULT_MODEL_NAME_FULL_FACE_AND_EYES:"VTO-5-2",REACT_APP_ACCOUNT_SYSTEM_PASSWORD_REQUIRE_LOWERCASE:"true",REACT_APP_STOREFRONT_DOMAIN:"www.roseinc.com",REACT_APP_ACCOUNT_SYSTEM_PASSWORD_REQUIRE_UPPERCASE:"true",REACT_APP_ACCOUNT_PAGE_NAME:"myaccount",REACT_APP_VERSION:"0.0.1",REACT_APP_DEFAULT_MODEL_NAME_FULL_FACE_AND_MOUTH:"VTO-5-1",REACT_APP_CDN_ROOT:"https://cdn.roseinc.beautylabs.com/production/132459692220",REACT_APP_TEXTURE_URI_PREFIX:"https://cdn.roseinc.beautylabs.com/production/vto/textures/",REACT_APP_LIVE_SHOPPING_BACKEND_BASE_URI:"https://liveshopping.amyris.beautylabs.com/api/roseinc",REACT_APP_ACCOUNT_SYSTEM_PASSWORD_MIN_LEN:"8"}.REACT_APP_QUESTIONNAIRE_PRINT_DEBUG)?b:"")),d&&(u||c)&&r.createElement("hr",null),u&&r.createElement("div",{className:"question__answer-title"},u),c&&void 0!==s&&r.createElement("div",{className:"d-flex flex-column align-items-center"},r.createElement("div",{className:"question__answer__color-circle",style:{backgroundColor:s}}," "),r.createElement("span",{className:"ri-small"},c)),c&&void 0===s&&r.createElement(r.Fragment,null,r.createElement("span",{className:"question__answer-subtitle"},c))))})))}),(function(e,t){return e.chosenId===t.chosenId&&e.color===t.color&&e.description===t.description&&e.description_title===t.description_title&&e.featured_image_url===t.featured_image_url&&e.id===t.id&&e.index===t.index&&e.isAnimation===t.isAnimation&&e.isChosen===t.isChosen&&e.isCursorPointer===t.isCursorPointer&&e.payload===t.payload}));function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){C(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=R(e);if(t){var o=R(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(u,e);var t,n,c,l=P(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),C(v(t=l.call(this,e)),"isFirstRender",!0),C(v(t),"handleAddChosenAnswer",(function(e,n){var r,o=t.state.chosenAnswers;"images"===t.props.activeComponent?(void 0===o.get(e)?o.set(e,{id:e,payload:n}):o.delete(e),t.setState({chosenAnswers:o})):(r=e,t.setState({chosenId:r})),(Object.keys(o).length===t.props.oldAnswers.size||r)&&(t.isFirstRender=!1)})),C(v(t),"handleUpdateAnswer",function(){var e,n=(e=regeneratorRuntime.mark((function e(n,r){var o,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=void 0!==t.state.chosenAnswers.get(n),a="images"!==t.props.activeComponent||"images"===t.props.activeComponent&&void 0!==t.props.maxChosenImagesCount&&(t.props.oldAnswers.size+1<=t.props.maxChosenImagesCount||o),!(t.props.oldAnswers&&t.props.oldAnswers.size>0&&a)){e.next=12;break}if(t.props.handleAnswer(C({},n,{id:n,payload:r}),"answer",t.props.oldAnswers,!1),"images"!==t.props.activeComponent){e.next=9;break}return i=t.state.chosenAnswers,o?i.delete(n):i.set(n,{id:n,payload:r}),e.next=9,t.setState({chosenAnswers:i});case 9:t.isFirstRender=!0,e.next=13;break;case 12:a&&(t.props.handleAnswer(C({},n,{id:n,payload:r}),"answer",void 0,!1),t.isFirstRender=!0);case 13:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){p(a,r,o,i,s,"next",e)}function s(e){p(a,r,o,i,s,"throw",e)}i(void 0)}))});return function(e,t){return n.apply(this,arguments)}}()),t.state={chosenAnswers:new Map,chosenId:void 0,answers:new Map,showHiddenImages:!1},t}return t=u,(n=[{key:"shouldComponentUpdate",value:function(e,t){return this.props.indexOfQuestion!==e.indexOfQuestion||this.props.oldAnswers!==e.oldAnswers||this.props.images!==e.images||this.state.chosenAnswers!==t.chosenAnswers||this.state.showHiddenImages!==t.showHiddenImages}},{key:"componentDidMount",value:function(){var e=this.props.oldAnswers,t=this.state.chosenAnswers;e.forEach((function(e){t.set(e.id,{id:e.id,payload:e.payload})})),this.setState({chosenAnswers:t})}},{key:"componentDidUpdate",value:function(e,t){var n=this,r=void 0!==this.props.numImagesVisibleOnLoad?void 0!==this.props.selfie?this.props.numImagesVisibleOnLoad:this.props.numImagesVisibleOnLoad+this.props.oldAnswers.size:this.props.images.length,o=r<this.props.images.length;("questions"===this.props.activeComponent&&this.props.activeQuestion?this.props.activeQuestion.answers:o&&!this.state.showHiddenImages?this.props.images.slice(0,r):this.props.images).forEach((function(e){var t=void 0!==n.state.chosenAnswers.get(e.id);n.props.oldAnswers.size>0&&n.props.oldAnswers.has(e.id)&&!t&&n.isFirstRender&&n.handleAddChosenAnswer(e.id,e.payload)}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.images,c=t.activeQuestion,l=t.indexOfQuestion,u=t.oldAnswers,_=t.isImages,m=t.activeComponent,p=t.maxChosenImagesCount,A=void 0!==this.props.numImagesVisibleOnLoad?void 0!==this.props.selfie?this.props.numImagesVisibleOnLoad:this.props.numImagesVisibleOnLoad+u.size:n.length,f=A<n.length,P="questions"===m&&c?c.answers:f&&!this.state.showHiddenImages?n.slice(0,A):n;return r.createElement("div",{className:"questions"===m?"question text-question":"question image-question"},"images"!==m&&r.createElement(a.Z,{key:l+3,mode:"out-in"},r.createElement(o.ZP,{key:l+4,appear:!0,mountOnEnter:!0,unmountOnExit:!0,in:!0,timeout:100},(function(e){return r.createElement("div",{style:E(E({},i.h),i.v[e]),className:"question__wrapper--text"},r.createElement("h3",{className:"question__title title-text"},c&&(0,s.Iu)(c.title)),r.createElement("p",null,c&&c.description&&(0,s.Iu)(c.description)))}))),r.createElement("div",{className:_||"images"===m?"question__body align-items-start ".concat(5===P.length?"flex50":""," ").concat(3===P.length?"flex-3-images":""):"question__body".concat(P.length<4?" question__body-text--short":"").concat(c&&c.cssClass?" ".concat(c.cssClass):"")},P.map((function(t,n){var o=void 0!==e.state.chosenAnswers.get(t.id),a=f&&A-1===n;return r.createElement(r.Fragment,{key:n},r.createElement(d,{id:t.id,key:n,index:n,payload:"questions"===m?t.payload:{darkness:void 0===t.darkness?void 0:parseFloat(t.darkness),warmth:void 0===t.warmth?void 0:parseFloat(t.warmth)},chosenId:e.state.chosenId,isCursorPointer:"images"!==e.props.activeComponent||"images"===e.props.activeComponent&&e.props.maxChosenImagesCount&&(e.props.oldAnswers.size+1<=e.props.maxChosenImagesCount||o),isAnimation:!0,isChosen:o,featured_image_url:"questions"===m?t.image?t.image.url:void 0:t.url?t.url:void 0,description_title:t.description_title?(0,s.Iu)(t.description_title):void 0,description:t.description?(0,s.Iu)(t.description):void 0,recommendedConcealer:t.recommendedConcealer,recommendedSerum:t.recommendedSerum,recommendedFoundation:t.recommendedFoundation,color:t.color,handleUpdateAnswer:e.handleUpdateAnswer,handleAddChosenAnswer:e.handleAddChosenAnswer,animateIn:!e.state.showHiddenImages||n>=A,modelName:"images"===m?t.modelName:void 0}),a&&A%2==0?r.createElement("span",{style:{height:0}}," "):null)}))),"images"===m&&r.createElement("div",{className:"question__navigation__wrapper"},r.createElement("div",{className:"question__navigation px-3"},r.createElement(a.Z,{key:l+8,mode:"out-in"},r.createElement(o.ZP,{key:l+9,appear:!0,mountOnEnter:!0,unmountOnExit:!0,in:u&&u.size>0,timeout:100},(function(t){return r.createElement("button",{className:"btn-action ".concat(p!==u.size?"btn-action-disabled":"d-none"),style:E(E({},i.h),i.v[t])},"Choose ".concat(void 0!==p&&p-u.size," ").concat(void 0!==p&&p-u.size==1&&void 0===e.props.selfie?"More":""," "))}))))))}}])&&A(t.prototype,n),c&&A(t,c),u}(r.Component);var y=n(95083);n(40561);function T(e){for(var t=e.length;t--;){var n=Math.floor(Math.random()*t),r=e[t];void 0===r?e.splice(t,1):(e[t]=e[n],e[n]=r)}return e}var S=function(e,t,n){return n.indexOf(e)===t},O=n(73293),g=n(76909);function w(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function N(e){return function(e){if(Array.isArray(e))return k(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||x(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}(e,t)||x(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){if(e){if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(e,t):void 0}}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const U=function(){var e=(0,r.useContext)(Ge),t=I((0,r.useState)(new Map),2),n=t[0],o=t[1],a=I((0,r.useState)(!1),2),i=a[0],c=a[1],l=I((0,r.useState)([]),2),u=l[0],d=l[1],_=I((0,r.useState)(void 0),2),m=_[0],E=_[1],p=I((0,r.useState)(void 0),2),A=p[0],f=p[1],P=I((0,r.useState)(void 0),2),h=P[0],v=P[1],R=I((0,r.useState)(void 0),2),C=R[0],x=R[1],k=function(){if(e.images&&e.activeSettings){var t=0!==e.chosenImages.size||""!==e.selfieURL&&void 0!==e.selfieURL?e.activeSettings.normalImageQConfig:e.activeSettings.initialImageQConfig,n=void 0,r=[],o=void 0!==t.limitWarmth&&void 0!==e.warmth,a=void 0!==e.warmth?Math.round(e.warmth):void 0;o&&(n=t.limitWarmth,"true"==={NODE_ENV:"production",REACT_APP_MODEL_URI_PREFIX:"https://cdn.roseinc.beautylabs.com/production/132459692220/vto/models/",REACT_APP_SKIN_TONE_API:"https://skintone.roseinc.beautylabs.com",REACT_APP_NAME:"rose-inc-web",REACT_APP_ERROR_REPORT_URL:"https://errors.amyris.beautylabs.com/errorReport",REACT_APP_DEFAULT_MODEL_NAME_EYEBROWS:"FUTest-Brows-6",REACT_APP_ACCOUNT_SYSTEM_PASSWORD_REQUIRE_NUMBERS:"true",REACT_APP_BI_ACCOUNT_APP_NAME:"account",REACT_APP_PLUGIN_BASE:"https://cdn.roseinc.beautylabs.com/production/132459692220/vto/plugin/",REACT_APP_BI_APP_NAME:"roseinc_web",REACT_APP_ACCOUNT_NAMESPACE:"roseinc",REACT_APP_BI_LIVESHOPPING_APP_NAME:"liveshopping",REACT_APP_COMMIT_HASH:"cd7b583f591f3aa5f0b8067f9bb0c2bb2fe804eb",REACT_APP_STOREFRONT_API_KEY:"f1c1eba5583bb760c097cba85a0b1a51",REACT_APP_ACCOUNT_BACKEND_BASE_URI:"https://account.amyris.beautylabs.com/api/consumer/roseinc",REACT_APP_LIVESHOPPING_NAMESPACE:"roseinc",REACT_APP_ACCOUNT_SYSTEM_PASSWORD_REQUIRE_SYMBOLS:"true",REACT_APP_FUSIONFS_URI_PREFIX:"https://cdn.roseinc.beautylabs.com/production/132459692220/vto/plugin/data/",REACT_APP_BI_REPORT_URI:"https://logs.amyris.beautylabs.com/bi",REACT_APP_DEFAULT_MODEL_NAME_FULL_FACE_AND_EYES:"VTO-5-2",REACT_APP_ACCOUNT_SYSTEM_PASSWORD_REQUIRE_LOWERCASE:"true",REACT_APP_STOREFRONT_DOMAIN:"www.roseinc.com",REACT_APP_ACCOUNT_SYSTEM_PASSWORD_REQUIRE_UPPERCASE:"true",REACT_APP_ACCOUNT_PAGE_NAME:"myaccount",REACT_APP_VERSION:"0.0.1",REACT_APP_DEFAULT_MODEL_NAME_FULL_FACE_AND_MOUTH:"VTO-5-1",REACT_APP_CDN_ROOT:"https://cdn.roseinc.beautylabs.com/production/132459692220",REACT_APP_TEXTURE_URI_PREFIX:"https://cdn.roseinc.beautylabs.com/production/vto/textures/",REACT_APP_LIVE_SHOPPING_BACKEND_BASE_URI:"https://liveshopping.amyris.beautylabs.com/api/roseinc",REACT_APP_ACCOUNT_SYSTEM_PASSWORD_MIN_LEN:"8"}.REACT_APP_QUESTIONNAIRE_PRINT_DEBUG&&console.log("limiting image warmth to within ",n," of ",a));var i=0,s=0,c=!1;void 0!==a&&void 0!==n&&(i=a-n,s=a+n,c=!0),e.images.forEach((function(n){e.chosenImages.has(n.id)&&!t.allowDeselectFace||(o&&c&&(n.warmth<i||n.warmth>s)||r.push(n))})),t.sortByRecConcealer&&r.sort((function(e,t){if(void 0!==e.recommendedConcealer&&void 0!==t.recommendedConcealer){if(e.recommendedConcealer<t.recommendedConcealer)return 1;if(e.recommendedConcealer>t.recommendedConcealer)return-1}return 0})),t.reverseOrder&&(r=r.reverse());var l=function(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=n;if(t.length>0){for(var i=0,s=0,c=0,l=void 0,u=n,d=[];i<t.length;){if(l=t[i]){if(void 0!==l.imageCount)c=s>0?s+l.imageCount:l.imageCount-e.chosenImages.size,d=n.slice(s,c),u=n.slice(c+1),s+=c;else if(void 0!==l.imageSet)for(var _=function(e){var t=l.imageSet[e],r=n.find((function(e){return t===e.id}));void 0!==r&&d.push(r)},m=0;m<l.imageSet.length;m++)_(m);else l.imageSimilarFace&&function(){var t=e.warmth,r=e.darkness;d=n.filter((function(e){return e.warmth===t&&e.darkness===r}))}();if(void 0!==l.imageInterval){i=c;var p=n.length,A=Math.round((n.length-c)/100*l.imageInterval);for(A=A<1?1:A;i<p;)d.push(n[i]),i+=A}d=!0===l.randomize?T(d):d.filter((function(e){return void 0!==e})),0===i&&(a=[],E(d.filter(S).length)),a=[].concat(N(a),N(d))}i++}o&&(u=T(u)),r&&(a=[].concat(N(a),N(u))),a=a.filter(S)}return a}(t.sections,r,t.appendRemainingImages,t.randomizeRemainingImages);(r=N(l))&&d(r)}};(0,r.useEffect)((function(){if(e&&e.questions&&e.answers&&e.images&&e.chosenImages){var t,n,r,a,i,s=new Map,l=!1,u="images"===e.activeComponent,d=void 0;u?s=e.chosenImages:void 0!==(d=M())?d.answers.forEach((function(t){e.answers.has(t.id)&&s.set(t.id,t.id),l||(l=void 0!==t.image&&void 0!==t.image.url&&""!==t.image.url)})):e.handleCompleteCategory("questions"),o(s),"images"===e.activeComponent&&(k(),e.activeSettings&&(e.chosenImages.size>=e.activeSettings.maxChosenImageCount||e.selfieURL&&e.activeSettings.selfieFlowSkipImageSelection)&&e.handleCompleteCategory("images")),c(!!u||l),f(d),v(null!==(t=null===(n=d)||void 0===n?void 0:n.sectionTitle)&&void 0!==t?t:"shade_finder.section_about");var _=void 0;null!==(r=d)&&void 0!==r&&r.coverageQuestion?_="coverage_question":null!==(a=d)&&void 0!==a&&a.concernQuestion?_="concern_question":null!==(i=d)&&void 0!==i&&i.undertoneQuestion&&(_="undertone_question"),x(_)}}),[e.indexOfQuestion]);var U=function(t,n,r){for(var o=n+1;o<t.length;o++){var a=t[o].requiresPreviousAnswer;if(void 0===a||a===r)return o}return t.length+e.chosenImages.size},D=function(){var t,n=(t=regeneratorRuntime.mark((function t(n,r,o,a){var i,s,c,l,u,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==e.questions){t.next=2;break}return t.abrupt("return",null);case 2:if(i=e.questions?e.questions.length:0,s=U(e.questions,e.indexOfQuestion,parseInt(Object.keys(n)[0])),c=s<i,l="images"===e.activeComponent,"answer"!==r||!(c&&!l||l)||a||0===Object.values(n).length){t.next=12;break}u=Object.values(n),o&&0===o.size?u.forEach((function(t){e.handleUpdateAnswers(t.id,"next",t.payload)})):u.forEach((function(t){e.handleUpdateAnswers(t.id,"change",t.payload,o,!1)})),e.setIndexOfQuestion(s),t.next=44;break;case 12:if(!("answer"===r&&c&&!a&&0===Object.values(n).length&&o&&o.size>0)){t.next=17;break}e.handleUpdateAnswers(-1,"change",{darkness:-10,warmth:-10},o),e.setIndexOfQuestion(s),t.next=44;break;case 17:if("skip"!==r||!c||a){t.next=21;break}e.setIndexOfQuestion(s),t.next=44;break;case 21:if(!("previous"===r&&e.indexOfQuestion-1>=0)){t.next=25;break}e.setIndexOfQuestion(e.indexOfQuestion-1),t.next=44;break;case 25:if(s!==i||a||"answer"!==r&&"skip"!==r||l){t.next=41;break}if(d=Object.values(n),o&&0!==o.size||!(Object.values(n).length>0)){t.next=31;break}d.forEach((function(t){e.handleUpdateAnswers(t.id,"next",t.payload)})),t.next=37;break;case 31:if(!(d.length>0&&o&&o.size>0)){t.next=35;break}d.forEach((function(t){e.handleUpdateAnswers(t.id,"change",t.payload,o,!1)})),t.next=37;break;case 35:return t.next=37,e.handleUpdateAnswers(-1,"change",{darkness:-10,warmth:-10},o);case 37:return t.next=39,e.handleCompleteCategory("questions");case 39:t.next=44;break;case 41:if(!l||!a){t.next=44;break}return t.next=44,e.handleCompleteCategory("images");case 44:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(e){w(a,r,o,i,s,"next",e)}function s(e){w(a,r,o,i,s,"throw",e)}i(void 0)}))});return function(e,t,r,o){return n.apply(this,arguments)}}(),M=function(){if(e.questions)return e.questions.find((function(t){return t.sort===e.indexOfQuestion}))},L=r.createElement(b,{activeQuestion:"questions"===e.activeComponent?A:void 0,indexOfQuestion:e.indexOfQuestion,handleAnswer:D,answers:e.answers,oldAnswers:n,maxChosenImagesCount:e.activeSettings?e.activeSettings.maxChosenImageCount:void 0,isImages:i,activeComponent:e.activeComponent,images:u,selfie:e.selfieURL,numImagesVisibleOnLoad:m}),F=!(0,O.nD)()&&"images"===e.activeComponent,B=(0,O.nD)(),j=e.questions&&e.indexOfQuestion>=0&&(void 0!==A&&"questions"===e.activeComponent||"questions"!==e.activeComponent);return r.createElement("div",{className:"images"===e.activeComponent?"questionnaire-container step-3-non-selfie":"questionnaire-container"},"questions"===e.activeComponent&&r.createElement("div",{className:"questionnaire-content-secondary"},!B&&void 0!==C&&r.createElement(g.Z,{mediaKey:C})),"images"===e.activeComponent&&r.createElement("div",{className:"questionnaire-content-secondary step-3-non-selfie"},F&&j&&L),r.createElement("div",{className:"questionnaire-content ".concat("images"===e.activeComponent?"w-100 mw-100":"")},j&&r.createElement(r.Fragment,null,r.createElement(y.Z,{showThis:e.indexOfQuestion>=0,title:"questions"===e.activeComponent?h:""===e.selfieURL?"shade_finder.section_tone":"shade_finder.section_verify",smallText:"questions"===e.activeComponent&&0===e.indexOfQuestion?void 0:"shade_finder.back",onSmallTextClick:function(){"images"===e.activeComponent?e.handleResetToCategory("selfie"):e.handleGoOneScreenBack()}}),"images"===e.activeComponent&&r.createElement("h3",{className:"question__title title-text mb-3"},0===e.indexOfQuestion?(0,s.Iu)("shade_finder.choose_model"):(0,s.Iu)("shade_finder.choose_model_not_1st")),!F&&L,e.selfieURL&&r.createElement("div",{className:"selfie-preview selfie-preview-small"},r.createElement("img",{className:"w-100 m-0",src:e.selfieURL,alt:"Selfie"})))))};n(23123),n(15306);var D=[["LX 010","LX 010","LX 010"],["LX 030","LX 020","LX 020"],["LX 060","LX 050","LX 040"],["LX 080","LX 110","LX 090"],["LX 120","LX 140","LX 130"],["LX 160","LX 150","LX 170"],["LX 190","LX 200","LX 180"]],M=function(e){var t=function(e){return D[e.darkness][e.warmth]}(e),n=function(e,t){if(void 0!==e){var n={"LX 010":["010","010","010"],"LX 020":["030","030","030"],"LX 030":["020","020","020"],"LX 040":["040","040","050"],"LX 050":["050","050","050"],"LX 060":["060","060","060"],"LX 070":["060","060","060"],"LX 080":["070","070","070"],"LX 090":["080","080","080"],"LX 100":["080","080","080"],"LX 110":["090","090","090"],"LX 120":["100","100","110"],"LX 130":["110","110","110"],"LX 140":["120","120","120"],"LX 150":["130","130","130"],"LX 160":["130","130","130"],"LX 170":["120","120","120"],"LX 180":["130","130","130"],"LX 190":["140","140","140"],"LX 200":["140","140","140"]}[e];if(!(void 0===n||t<0||t>n.length-1))return n[t]}}(t,e.warmth),r=function(e){return[["1C","1C","1C"],["3N","1C","2N"],["7C","12C","6W"],["14W","13N","16W"],["17C","19N","18W"],["23C","25W","22N"],["27C","29N","28W"]][e.darkness][e.warmth]}(e);return"true"==={NODE_ENV:"production",REACT_APP_MODEL_URI_PREFIX:"https://cdn.roseinc.beautylabs.com/production/132459692220/vto/models/",REACT_APP_SKIN_TONE_API:"https://skintone.roseinc.beautylabs.com",REACT_APP_NAME:"rose-inc-web",REACT_APP_ERROR_REPORT_URL:"https://errors.amyris.beautylabs.com/errorReport",REACT_APP_DEFAULT_MODEL_NAME_EYEBROWS:"FUTest-Brows-6",REACT_APP_ACCOUNT_SYSTEM_PASSWORD_REQUIRE_NUMBERS:"true",REACT_APP_BI_ACCOUNT_APP_NAME:"account",REACT_APP_PLUGIN_BASE:"https://cdn.roseinc.beautylabs.com/production/132459692220/vto/plugin/",REACT_APP_BI_APP_NAME:"roseinc_web",REACT_APP_ACCOUNT_NAMESPACE:"roseinc",REACT_APP_BI_LIVESHOPPING_APP_NAME:"liveshopping",REACT_APP_COMMIT_HASH:"cd7b583f591f3aa5f0b8067f9bb0c2bb2fe804eb",REACT_APP_STOREFRONT_API_KEY:"f1c1eba5583bb760c097cba85a0b1a51",REACT_APP_ACCOUNT_BACKEND_BASE_URI:"https://account.amyris.beautylabs.com/api/consumer/roseinc",REACT_APP_LIVESHOPPING_NAMESPACE:"roseinc",REACT_APP_ACCOUNT_SYSTEM_PASSWORD_REQUIRE_SYMBOLS:"true",REACT_APP_FUSIONFS_URI_PREFIX:"https://cdn.roseinc.beautylabs.com/production/132459692220/vto/plugin/data/",REACT_APP_BI_REPORT_URI:"https://logs.amyris.beautylabs.com/bi",REACT_APP_DEFAULT_MODEL_NAME_FULL_FACE_AND_EYES:"VTO-5-2",REACT_APP_ACCOUNT_SYSTEM_PASSWORD_REQUIRE_LOWERCASE:"true",REACT_APP_STOREFRONT_DOMAIN:"www.roseinc.com",REACT_APP_ACCOUNT_SYSTEM_PASSWORD_REQUIRE_UPPERCASE:"true",REACT_APP_ACCOUNT_PAGE_NAME:"myaccount",REACT_APP_VERSION:"0.0.1",REACT_APP_DEFAULT_MODEL_NAME_FULL_FACE_AND_MOUTH:"VTO-5-1",REACT_APP_CDN_ROOT:"https://cdn.roseinc.beautylabs.com/production/132459692220",REACT_APP_TEXTURE_URI_PREFIX:"https://cdn.roseinc.beautylabs.com/production/vto/textures/",REACT_APP_LIVE_SHOPPING_BACKEND_BASE_URI:"https://liveshopping.amyris.beautylabs.com/api/roseinc",REACT_APP_ACCOUNT_SYSTEM_PASSWORD_MIN_LEN:"8"}.REACT_APP_QUESTIONNAIRE_PRINT_DEBUG&&(console.log("Recommended concealer: ",t),console.log("Recommended serum: ",n),console.log("Recommended foundation: ",r)),{concealerTitle:t,serumTitle:n,foundationTitle:r}},L=n(36334),F=n(6848),B={sections:[{imageSet:[81,75,85,70,65,68,62,54,47,34,25,42,13,33,9,38,2,1]}],limitWarmth:0},j={sections:[{imageSimilarFace:!0}],sortByRecConcealer:!0},Q=void 0,q=n(59990);function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return G(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return G(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var W=window.shopData?window.shopData.shadeFinderProducts:void 0,Y=W?W.concealer:void 0,X=W?W.serum:void 0,H=W?W.foundation:void 0;const K=function(){var e,t,n,o=(0,r.useContext)(Ge),a=V((0,r.useState)(),2),i=a[0],s=a[1],c=V((0,r.useState)(),2),l=c[0],u=c[1],d=V((0,r.useState)(),2),_=d[0],m=d[1],E=V((0,r.useState)(void 0),2),p=E[0],A=E[1],f=V((0,r.useState)(void 0),2),P=f[0],h=f[1],v=V((0,r.useState)(!(null!==(e=o.activeSettings)&&void 0!==e&&e.captureEmail)),2),R=v[0],C=v[1],b=V((0,r.useState)(void 0),2),y=b[0],T=b[1],S=V((0,r.useState)([]),2),O=S[0],g=S[1];(0,r.useEffect)((function(){var e=function(e){var t,n,r,a,i,s;switch(e){case"concern":s=null===(t=o.questions)||void 0===t?void 0:t.find((function(e){return e.concernQuestion}));break;case"coverage":s=null===(n=o.questions)||void 0===n?void 0:n.find((function(e){return e.coverageQuestion}))}var c=[null===(r=s)||void 0===r?void 0:r.answers.sort((function(e,t){return e.id-t.id}))[0].id,null===(a=s)||void 0===a?void 0:a.answers.sort((function(e,t){return e.id-t.id}))[(null===(i=s)||void 0===i?void 0:i.answers.length)-1].id],l=void 0,u=void 0;return void 0!==c[0]&&void 0!==c[1]&&(l=c[1]-c[0],o.answers.forEach((function(e){var t,n,r;e.id>=c[0]&&e.id<=c[1]&&((null===(t=s)||void 0===t?void 0:t.answers.find((function(t){return t.id===e.id})))&&(l=e.id-c[0],e.id<=c[1]&&(u=null===(n=s)||void 0===n||null===(r=n.answers.find((function(t){return t.id===e.id})))||void 0===r?void 0:r.description_title)))}))),{index:l,description:u}},t=e("concern");A(t.description);var n=e("coverage");h(n.description)}),[o]),(0,r.useEffect)((function(){var e,t;if(void 0===o.darkness||void 0===o.warmth){var n,r="tried to getComplexion while darkness or warmth undefined. d:"+o.darkness+" w:"+o.warmth;return"true"==={NODE_ENV:"production",REACT_APP_MODEL_URI_PREFIX:"https://cdn.roseinc.beautylabs.com/production/132459692220/vto/models/",REACT_APP_SKIN_TONE_API:"https://skintone.roseinc.beautylabs.com",REACT_APP_NAME:"rose-inc-web",REACT_APP_ERROR_REPORT_URL:"https://errors.amyris.beautylabs.com/errorReport",REACT_APP_DEFAULT_MODEL_NAME_EYEBROWS:"FUTest-Brows-6",REACT_APP_ACCOUNT_SYSTEM_PASSWORD_REQUIRE_NUMBERS:"true",REACT_APP_BI_ACCOUNT_APP_NAME:"account",REACT_APP_PLUGIN_BASE:"https://cdn.roseinc.beautylabs.com/production/132459692220/vto/plugin/",REACT_APP_BI_APP_NAME:"roseinc_web",REACT_APP_ACCOUNT_NAMESPACE:"roseinc",REACT_APP_BI_LIVESHOPPING_APP_NAME:"liveshopping",REACT_APP_COMMIT_HASH:"cd7b583f591f3aa5f0b8067f9bb0c2bb2fe804eb",REACT_APP_STOREFRONT_API_KEY:"f1c1eba5583bb760c097cba85a0b1a51",REACT_APP_ACCOUNT_BACKEND_BASE_URI:"https://account.amyris.beautylabs.com/api/consumer/roseinc",REACT_APP_LIVESHOPPING_NAMESPACE:"roseinc",REACT_APP_ACCOUNT_SYSTEM_PASSWORD_REQUIRE_SYMBOLS:"true",REACT_APP_FUSIONFS_URI_PREFIX:"https://cdn.roseinc.beautylabs.com/production/132459692220/vto/plugin/data/",REACT_APP_BI_REPORT_URI:"https://logs.amyris.beautylabs.com/bi",REACT_APP_DEFAULT_MODEL_NAME_FULL_FACE_AND_EYES:"VTO-5-2",REACT_APP_ACCOUNT_SYSTEM_PASSWORD_REQUIRE_LOWERCASE:"true",REACT_APP_STOREFRONT_DOMAIN:"www.roseinc.com",REACT_APP_ACCOUNT_SYSTEM_PASSWORD_REQUIRE_UPPERCASE:"true",REACT_APP_ACCOUNT_PAGE_NAME:"myaccount",REACT_APP_VERSION:"0.0.1",REACT_APP_DEFAULT_MODEL_NAME_FULL_FACE_AND_MOUTH:"VTO-5-1",REACT_APP_CDN_ROOT:"https://cdn.roseinc.beautylabs.com/production/132459692220",REACT_APP_TEXTURE_URI_PREFIX:"https://cdn.roseinc.beautylabs.com/production/vto/textures/",REACT_APP_LIVE_SHOPPING_BACKEND_BASE_URI:"https://liveshopping.amyris.beautylabs.com/api/roseinc",REACT_APP_ACCOUNT_SYSTEM_PASSWORD_MIN_LEN:"8"}.REACT_APP_QUESTIONNAIRE_PRINT_DEBUG&&console.warn(r),void(null===(n=L.Z.instance)||void 0===n||n.reportError(r,(new Error).stack||""))}var a=function(e,t,n,r,o){if(t&&void 0!==n&&void 0!==o&&void 0!==r)return{concealerTitle:n,serumTitle:r,foundationTitle:o};var a=M(e);return{concealerTitle:a.concealerTitle,serumTitle:a.serumTitle,foundationTitle:a.foundationTitle}}(function(e,t){function n(e,t,n){return e<(n=void 0===n?0:n)?n:e>t?t:e}if(!(e>=0&&e<=6&&t>=0&&t<=2)){var r,o="tried to make complexion with invalid inputs - darkness:"+e+", warmth:"+t;"true"==={NODE_ENV:"production",REACT_APP_MODEL_URI_PREFIX:"https://cdn.roseinc.beautylabs.com/production/132459692220/vto/models/",REACT_APP_SKIN_TONE_API:"https://skintone.roseinc.beautylabs.com",REACT_APP_NAME:"rose-inc-web",REACT_APP_ERROR_REPORT_URL:"https://errors.amyris.beautylabs.com/errorReport",REACT_APP_DEFAULT_MODEL_NAME_EYEBROWS:"FUTest-Brows-6",REACT_APP_ACCOUNT_SYSTEM_PASSWORD_REQUIRE_NUMBERS:"true",REACT_APP_BI_ACCOUNT_APP_NAME:"account",REACT_APP_PLUGIN_BASE:"https://cdn.roseinc.beautylabs.com/production/132459692220/vto/plugin/",REACT_APP_BI_APP_NAME:"roseinc_web",REACT_APP_ACCOUNT_NAMESPACE:"roseinc",REACT_APP_BI_LIVESHOPPING_APP_NAME:"liveshopping",REACT_APP_COMMIT_HASH:"cd7b583f591f3aa5f0b8067f9bb0c2bb2fe804eb",REACT_APP_STOREFRONT_API_KEY:"f1c1eba5583bb760c097cba85a0b1a51",REACT_APP_ACCOUNT_BACKEND_BASE_URI:"https://account.amyris.beautylabs.com/api/consumer/roseinc",REACT_APP_LIVESHOPPING_NAMESPACE:"roseinc",REACT_APP_ACCOUNT_SYSTEM_PASSWORD_REQUIRE_SYMBOLS:"true",REACT_APP_FUSIONFS_URI_PREFIX:"https://cdn.roseinc.beautylabs.com/production/132459692220/vto/plugin/data/",REACT_APP_BI_REPORT_URI:"https://logs.amyris.beautylabs.com/bi",REACT_APP_DEFAULT_MODEL_NAME_FULL_FACE_AND_EYES:"VTO-5-2",REACT_APP_ACCOUNT_SYSTEM_PASSWORD_REQUIRE_LOWERCASE:"true",REACT_APP_STOREFRONT_DOMAIN:"www.roseinc.com",REACT_APP_ACCOUNT_SYSTEM_PASSWORD_REQUIRE_UPPERCASE:"true",REACT_APP_ACCOUNT_PAGE_NAME:"myaccount",REACT_APP_VERSION:"0.0.1",REACT_APP_DEFAULT_MODEL_NAME_FULL_FACE_AND_MOUTH:"VTO-5-1",REACT_APP_CDN_ROOT:"https://cdn.roseinc.beautylabs.com/production/132459692220",REACT_APP_TEXTURE_URI_PREFIX:"https://cdn.roseinc.beautylabs.com/production/vto/textures/",REACT_APP_LIVE_SHOPPING_BACKEND_BASE_URI:"https://liveshopping.amyris.beautylabs.com/api/roseinc",REACT_APP_ACCOUNT_SYSTEM_PASSWORD_MIN_LEN:"8"}.REACT_APP_QUESTIONNAIRE_PRINT_DEBUG&&console.warn(o),null===(r=L.Z.instance)||void 0===r||r.reportError(o,(new Error).stack||"")}return{darkness:n(e,6,1),warmth:n(t,2,0)}}(o.darkness,o.warmth),null!==(e=null===(t=o.activeSettings)||void 0===t?void 0:t.useImageRecommendedConcealer)&&void 0!==e&&e,o.recommendedConcealer,o.recommendedSerum,o.recommendedFoundation);s(a.concealerTitle),u(a.serumTitle),m(a.foundationTitle)}),[o.darkness,o.warmth,o]);var w=(0,r.useMemo)((function(){if(i&&l&&_){var e=[];return[{product:Y,variant:i},{product:X,variant:l},{product:H,variant:_}].forEach((function(t,n){var r,o=t.product,a=null==o||null===(r=o.productVariants)||void 0===r?void 0:r.find((function(e){return e.title===t.variant}));o&&a?e.push({id:o.id,variant:a}):console.warn("product data error. product",o,"variant",a,"productsToFindIndex",n)})),e}}),[i,l,_]);return(0,r.useEffect)((function(){if(null!=w&&w.length&&void 0!==o.darkness&&void 0!==o.warmth){var e,t,n,r,a=Y?w.find((function(e){return e.id===Y.id})):void 0,s=X?w.find((function(e){return e.id===(null==X?void 0:X.id)})):void 0,c=H?w.find((function(e){return e.id===(null==H?void 0:H.id)})):void 0,u=function(e){var t=e.split(".");return t[t.length-1]},d="sheer"===u(P)?s:c,m=[];if(d&&a&&[d,a].forEach((function(e){var t,n,r,o;m.push({product_id:e.id,variant_id:e.variant.id,img:"https:"+e.variant.shadeFinderImage.originalSrc,color_name:null!==(t=e.variant.colorName)&&void 0!==t?t:"",color_hex:null!==(n=e.variant.colorHex)&&void 0!==n?n:"",color_img:null!==(r=e.variant.colorTexture)&&void 0!==r?r:"",color_info:null!==(o=e.variant.description)&&void 0!==o?o:""})})),g(m),T(document.location.href.replace(/\/shade-finder.*/i,"/shade-finder-results/")+w[0].variant.id+"~"+w[1].variant.id+"~"+w[2].variant.id+"~"+(void 0!==p?u(p):"")+"~"+(void 0!==P?u(P):"")+"~"),R&&y)F.ZP.logShadeFinderRecommendation({event_id:null!==(e=o.skinToneAnalysisEventId)&&void 0!==e?e:null,skin_tone:o.darkness,skin_undertone:o.warmth,product_handle:null!==(t=null==Y?void 0:Y.handle)&&void 0!==t?t:null,variant_id:a?a.variant.id:null,shade_name:null!=i?i:null,tinted_serum_product_handle:null!==(n=null==X?void 0:X.handle)&&void 0!==n?n:null,tinted_serum_variant_id:s?s.variant.id:null,tinted_serum_shade_name:null!=l?l:null,foundation_product_handle:null!==(r=null==H?void 0:H.handle)&&void 0!==r?r:null,foundation_variant_id:c?c.variant.id:null,foundation_shade_name:null!=_?_:null}),document.location.href=y}}),[w,o.darkness,o.skinToneAnalysisEventId,o.warmth,null===(t=o.activeSettings)||void 0===t?void 0:t.captureEmail,i,l,_,p,P,R,y]),null!==(n=o.activeSettings)&&void 0!==n&&n.captureEmail?(0,q.ZP)((function(){C(!0)}),O,R,y):null};var Z=n(75423),z=n(69260),$=n.n(z);const J=JSON.parse('{"v":"5.7.4","fr":60,"ip":13,"op":485,"w":335,"h":472,"nm":"test","ddd":0,"assets":[],"layers":[{"ddd":0,"ind":1,"ty":4,"nm":"Path 1739","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":141,"s":[0]},{"t":173,"s":[100]}],"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[166.775,30.781,0],"ix":2,"l":2},"a":{"a":0,"k":[24.781,24.781,0],"ix":1,"l":2},"s":{"a":1,"k":[{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":141,"s":[25,25,100]},{"t":173,"s":[100,100,100]}],"ix":6,"l":2}},"ao":0,"ef":[{"ty":25,"nm":"Drop Shadow","np":8,"mn":"ADBE Drop Shadow","ix":1,"en":1,"ef":[{"ty":2,"nm":"Shadow Color","mn":"ADBE Drop Shadow-0001","ix":1,"v":{"a":0,"k":[0,0,0,1],"ix":1}},{"ty":0,"nm":"Opacity","mn":"ADBE Drop Shadow-0002","ix":2,"v":{"a":0,"k":41,"ix":2}},{"ty":0,"nm":"Direction","mn":"ADBE Drop Shadow-0003","ix":3,"v":{"a":0,"k":180,"ix":3}},{"ty":0,"nm":"Distance","mn":"ADBE Drop Shadow-0004","ix":4,"v":{"a":0,"k":3,"ix":4}},{"ty":0,"nm":"Softness","mn":"ADBE Drop Shadow-0005","ix":5,"v":{"a":0,"k":6,"ix":5}},{"ty":7,"nm":"Shadow Only","mn":"ADBE Drop Shadow-0006","ix":6,"v":{"a":0,"k":0,"ix":6}}]}],"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[-13.686,0],[0,-13.686],[13.686,0],[0,13.686]],"o":[[13.686,0],[0,13.686],[-13.686,0],[0,-13.686]],"v":[[24.781,0],[49.563,24.781],[24.781,49.563],[0,24.781]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0.980392156863,0.980392156863,0.980392156863,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":2,"ix":5},"lc":1,"lj":1,"ml":4,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"op","nm":"Offset Paths 1","a":{"a":0,"k":-1,"ix":1},"lj":1,"ml":{"a":0,"k":4,"ix":3},"ix":3,"mn":"ADBE Vector Filter - Offset","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Path 1739 Stroke","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[-13.686,0],[0,-13.686],[13.686,0],[0,13.686]],"o":[[13.686,0],[0,13.686],[-13.686,0],[0,-13.686]],"v":[[24.781,0],[49.563,24.781],[24.781,49.563],[0,24.781]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Path 1739 Fill","np":2,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":3600,"st":0,"bm":0},{"ddd":0,"ind":2,"ty":4,"nm":"Layer 1/Shade Finder Animation Assets Outlines","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":37,"s":[0]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":72,"s":[100]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":125,"s":[100]},{"t":157,"s":[0]}],"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":66,"s":[0]},{"t":125,"s":[361]}],"ix":10},"p":{"a":0,"k":[167.5,31,0],"ix":2,"l":2},"a":{"a":0,"k":[112.5,112,0],"ix":1,"l":2},"s":{"a":0,"k":[22.1,22.1,100],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[12.42,-5.469],[9.483,-9.805],[5.094,-12.733],[-0.1,-13.79],[-5.336,-12.792],[-9.821,-9.881],[-12.892,-5.467],[-14.077,-0.198],[13.165,5.194],[10.281,9.825],[5.837,13.052],[0.445,14.353],[-5.018,13.547],[-9.809,10.686],[-13.214,6.191],[-14.633,0.799],[-0.136,-2.482],[2.482,-0.135],[0.033,-0.001]],"o":[[-13.497,0.381],[-12.437,5.425],[-9.487,9.797],[-5.103,12.727],[0.06,13.788],[5.319,12.797],[9.811,9.89],[12.887,5.485],[-14.076,0.177],[-13.17,-5.174],[-10.289,-9.815],[-5.855,-13.044],[-0.487,-14.35],[5.008,-13.552],[9.804,-10.692],[13.194,-6.236],[2.481,-0.136],[0.135,2.482],[-0.032,0.002],[0,0]],"v":[[51.462,-102.129],[12.096,-93.342],[-21.185,-70.165],[-43.41,-35.984],[-51.001,4.292],[-42.848,44.677],[-19.844,79.124],[14.626,102.479],[55.59,111.08],[14.202,103.52],[-21.42,80.731],[-45.946,46.016],[-55.499,4.38],[-48.658,-38.008],[-26.095,-74.796],[8.828,-100.507],[51.112,-111.122],[55.851,-106.874],[51.603,-102.135],[51.505,-102.13]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.980392216701,0.980392216701,0.980392216701,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[56.236,111.508],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":3600,"st":0,"bm":0},{"ddd":0,"ind":4,"ty":4,"nm":"Ellipse 270","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":399,"s":[0]},{"t":431,"s":[100]}],"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[34,236.5,0],"ix":2,"l":2},"a":{"a":0,"k":[0,0,0],"ix":1,"l":2},"s":{"a":1,"k":[{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":399,"s":[25,25,100]},{"t":431,"s":[100,100,100]}],"ix":6,"l":2}},"ao":0,"ef":[{"ty":25,"nm":"Drop Shadow","np":8,"mn":"ADBE Drop Shadow","ix":1,"en":1,"ef":[{"ty":2,"nm":"Shadow Color","mn":"ADBE Drop Shadow-0001","ix":1,"v":{"a":0,"k":[0,0,0,1],"ix":1}},{"ty":0,"nm":"Opacity","mn":"ADBE Drop Shadow-0002","ix":2,"v":{"a":0,"k":41,"ix":2}},{"ty":0,"nm":"Direction","mn":"ADBE Drop Shadow-0003","ix":3,"v":{"a":0,"k":180,"ix":3}},{"ty":0,"nm":"Distance","mn":"ADBE Drop Shadow-0004","ix":4,"v":{"a":0,"k":3,"ix":4}},{"ty":0,"nm":"Softness","mn":"ADBE Drop Shadow-0005","ix":5,"v":{"a":0,"k":6,"ix":5}},{"ty":7,"nm":"Shadow Only","mn":"ADBE Drop Shadow-0006","ix":6,"v":{"a":0,"k":0,"ix":6}}]}],"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[50,50],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"st","c":{"a":0,"k":[0.980392156863,0.980392156863,0.980392156863,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":2,"ix":5},"lc":1,"lj":1,"ml":4,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"op","nm":"Offset Paths 1","a":{"a":0,"k":-1,"ix":1},"lj":1,"ml":{"a":0,"k":4,"ix":3},"ix":3,"mn":"ADBE Vector Filter - Offset","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 270 Stroke","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[50,50],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 270 Fill","np":2,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":3600,"st":0,"bm":0},{"ddd":0,"ind":5,"ty":4,"nm":"Layer 1/Shade Finder Animation Assets Outlines","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":298,"s":[0]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":333,"s":[100]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":386,"s":[100]},{"t":418,"s":[0]}],"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":327,"s":[0]},{"t":386,"s":[361]}],"ix":10},"p":{"a":0,"k":[34.5,236,0],"ix":2,"l":2},"a":{"a":0,"k":[112.5,112,0],"ix":1,"l":2},"s":{"a":0,"k":[22.1,22.1,100],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[12.42,-5.469],[9.483,-9.805],[5.094,-12.733],[-0.1,-13.79],[-5.336,-12.792],[-9.821,-9.881],[-12.892,-5.467],[-14.077,-0.198],[13.165,5.194],[10.281,9.825],[5.837,13.052],[0.445,14.353],[-5.018,13.547],[-9.809,10.686],[-13.214,6.191],[-14.633,0.799],[-0.136,-2.482],[2.482,-0.135],[0.033,-0.001]],"o":[[-13.497,0.381],[-12.437,5.425],[-9.487,9.797],[-5.103,12.727],[0.06,13.788],[5.319,12.797],[9.811,9.89],[12.887,5.485],[-14.076,0.177],[-13.17,-5.174],[-10.289,-9.815],[-5.855,-13.044],[-0.487,-14.35],[5.008,-13.552],[9.804,-10.692],[13.194,-6.236],[2.481,-0.136],[0.135,2.482],[-0.032,0.002],[0,0]],"v":[[51.462,-102.129],[12.096,-93.342],[-21.185,-70.165],[-43.41,-35.984],[-51.001,4.292],[-42.848,44.677],[-19.844,79.124],[14.626,102.479],[55.59,111.08],[14.202,103.52],[-21.42,80.731],[-45.946,46.016],[-55.499,4.38],[-48.658,-38.008],[-26.095,-74.796],[8.828,-100.507],[51.112,-111.122],[55.851,-106.874],[51.603,-102.135],[51.505,-102.13]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.980392216701,0.980392216701,0.980392216701,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[56.236,111.508],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":3600,"st":0,"bm":0},{"ddd":0,"ind":7,"ty":4,"nm":"Ellipse 268","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":226,"s":[0]},{"t":258,"s":[100]}],"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[301.5,236.5,0],"ix":2,"l":2},"a":{"a":0,"k":[0,0,0],"ix":1,"l":2},"s":{"a":1,"k":[{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":226,"s":[25,25,100]},{"t":258,"s":[100,100,100]}],"ix":6,"l":2}},"ao":0,"ef":[{"ty":25,"nm":"Drop Shadow","np":8,"mn":"ADBE Drop Shadow","ix":1,"en":1,"ef":[{"ty":2,"nm":"Shadow Color","mn":"ADBE Drop Shadow-0001","ix":1,"v":{"a":0,"k":[0,0,0,1],"ix":1}},{"ty":0,"nm":"Opacity","mn":"ADBE Drop Shadow-0002","ix":2,"v":{"a":0,"k":41,"ix":2}},{"ty":0,"nm":"Direction","mn":"ADBE Drop Shadow-0003","ix":3,"v":{"a":0,"k":180,"ix":3}},{"ty":0,"nm":"Distance","mn":"ADBE Drop Shadow-0004","ix":4,"v":{"a":0,"k":3,"ix":4}},{"ty":0,"nm":"Softness","mn":"ADBE Drop Shadow-0005","ix":5,"v":{"a":0,"k":6,"ix":5}},{"ty":7,"nm":"Shadow Only","mn":"ADBE Drop Shadow-0006","ix":6,"v":{"a":0,"k":0,"ix":6}}]}],"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[49,50],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"st","c":{"a":0,"k":[0.980392156863,0.980392156863,0.980392156863,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":2,"ix":5},"lc":1,"lj":1,"ml":4,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"op","nm":"Offset Paths 1","a":{"a":0,"k":-1,"ix":1},"lj":1,"ml":{"a":0,"k":4,"ix":3},"ix":3,"mn":"ADBE Vector Filter - Offset","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 268 Stroke","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[49,50],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 268 Fill","np":2,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":3600,"st":0,"bm":0},{"ddd":0,"ind":8,"ty":4,"nm":"Layer 1/Shade Finder Animation Assets Outlines","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":125,"s":[0]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":160,"s":[100]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":213,"s":[100]},{"t":245,"s":[0]}],"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":154,"s":[0]},{"t":213,"s":[361]}],"ix":10},"p":{"a":0,"k":[301.5,236,0],"ix":2,"l":2},"a":{"a":0,"k":[112.5,112,0],"ix":1,"l":2},"s":{"a":0,"k":[22.1,22.1,100],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[12.42,-5.469],[9.483,-9.805],[5.094,-12.733],[-0.1,-13.79],[-5.336,-12.792],[-9.821,-9.881],[-12.892,-5.467],[-14.077,-0.198],[13.165,5.194],[10.281,9.825],[5.837,13.052],[0.445,14.353],[-5.018,13.547],[-9.809,10.686],[-13.214,6.191],[-14.633,0.799],[-0.136,-2.482],[2.482,-0.135],[0.033,-0.001]],"o":[[-13.497,0.381],[-12.437,5.425],[-9.487,9.797],[-5.103,12.727],[0.06,13.788],[5.319,12.797],[9.811,9.89],[12.887,5.485],[-14.076,0.177],[-13.17,-5.174],[-10.289,-9.815],[-5.855,-13.044],[-0.487,-14.35],[5.008,-13.552],[9.804,-10.692],[13.194,-6.236],[2.481,-0.136],[0.135,2.482],[-0.032,0.002],[0,0]],"v":[[51.462,-102.129],[12.096,-93.342],[-21.185,-70.165],[-43.41,-35.984],[-51.001,4.292],[-42.848,44.677],[-19.844,79.124],[14.626,102.479],[55.59,111.08],[14.202,103.52],[-21.42,80.731],[-45.946,46.016],[-55.499,4.38],[-48.658,-38.008],[-26.095,-74.796],[8.828,-100.507],[51.112,-111.122],[55.851,-106.874],[51.603,-102.135],[51.505,-102.13]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.980392216701,0.980392216701,0.980392216701,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[56.236,111.508],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":3600,"st":0,"bm":0},{"ddd":0,"ind":10,"ty":4,"nm":"Ellipse 267","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":314,"s":[0]},{"t":346,"s":[100]}],"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[166.775,434.718,0],"ix":2,"l":2},"a":{"a":0,"k":[0,0,0],"ix":1,"l":2},"s":{"a":1,"k":[{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":314,"s":[25,25,100]},{"t":346,"s":[100,100,100]}],"ix":6,"l":2}},"ao":0,"ef":[{"ty":25,"nm":"Drop Shadow","np":8,"mn":"ADBE Drop Shadow","ix":1,"en":1,"ef":[{"ty":2,"nm":"Shadow Color","mn":"ADBE Drop Shadow-0001","ix":1,"v":{"a":0,"k":[0,0,0,1],"ix":1}},{"ty":0,"nm":"Opacity","mn":"ADBE Drop Shadow-0002","ix":2,"v":{"a":0,"k":41,"ix":2}},{"ty":0,"nm":"Direction","mn":"ADBE Drop Shadow-0003","ix":3,"v":{"a":0,"k":180,"ix":3}},{"ty":0,"nm":"Distance","mn":"ADBE Drop Shadow-0004","ix":4,"v":{"a":0,"k":3,"ix":4}},{"ty":0,"nm":"Softness","mn":"ADBE Drop Shadow-0005","ix":5,"v":{"a":0,"k":6,"ix":5}},{"ty":7,"nm":"Shadow Only","mn":"ADBE Drop Shadow-0006","ix":6,"v":{"a":0,"k":0,"ix":6}}]}],"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[49.563,49.563],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"st","c":{"a":0,"k":[0.980392156863,0.980392156863,0.980392156863,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":2,"ix":5},"lc":1,"lj":1,"ml":4,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"op","nm":"Offset Paths 1","a":{"a":0,"k":-1,"ix":1},"lj":1,"ml":{"a":0,"k":4,"ix":3},"ix":3,"mn":"ADBE Vector Filter - Offset","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 267 Stroke","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[49.563,49.563],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 267 Fill","np":2,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":3600,"st":0,"bm":0},{"ddd":0,"ind":11,"ty":4,"nm":"Layer 1/Shade Finder Animation Assets Outlines","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":213,"s":[0]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":248,"s":[100]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":301,"s":[100]},{"t":333,"s":[0]}],"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":242,"s":[0]},{"t":301,"s":[361]}],"ix":10},"p":{"a":0,"k":[166.5,435,0],"ix":2,"l":2},"a":{"a":0,"k":[112.5,112,0],"ix":1,"l":2},"s":{"a":0,"k":[22.1,22.1,100],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[12.42,-5.469],[9.483,-9.805],[5.094,-12.733],[-0.1,-13.79],[-5.336,-12.792],[-9.821,-9.881],[-12.892,-5.467],[-14.077,-0.198],[13.165,5.194],[10.281,9.825],[5.837,13.052],[0.445,14.353],[-5.018,13.547],[-9.809,10.686],[-13.214,6.191],[-14.633,0.799],[-0.136,-2.482],[2.482,-0.135],[0.033,-0.001]],"o":[[-13.497,0.381],[-12.437,5.425],[-9.487,9.797],[-5.103,12.727],[0.06,13.788],[5.319,12.797],[9.811,9.89],[12.887,5.485],[-14.076,0.177],[-13.17,-5.174],[-10.289,-9.815],[-5.855,-13.044],[-0.487,-14.35],[5.008,-13.552],[9.804,-10.692],[13.194,-6.236],[2.481,-0.136],[0.135,2.482],[-0.032,0.002],[0,0]],"v":[[51.462,-102.129],[12.096,-93.342],[-21.185,-70.165],[-43.41,-35.984],[-51.001,4.292],[-42.848,44.677],[-19.844,79.124],[14.626,102.479],[55.59,111.08],[14.202,103.52],[-21.42,80.731],[-45.946,46.016],[-55.499,4.38],[-48.658,-38.008],[-26.095,-74.796],[8.828,-100.507],[51.112,-111.122],[55.851,-106.874],[51.603,-102.135],[51.505,-102.13]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.980392216701,0.980392216701,0.980392216701,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[56.236,111.508],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":3600,"st":0,"bm":0}],"markers":[]}');var ee=function(){return r.createElement("div",{className:"loading-lottie"},r.createElement($(),{animationData:J,loop:!0,autoplay:!0}))};const te=n.p+"9cb430a1ed1192156cb596fe341496e0.svg",ne=n.p+"5598f01b773bd336da7b4a59db4368c4.svg";var re=n(85518);function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(n),!0).forEach((function(t){ie(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function se(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function ce(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){se(a,r,o,i,s,"next",e)}function s(e){se(a,r,o,i,s,"throw",e)}i(void 0)}))}}function le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ue(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ue(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function de(e){var t=(0,r.useRef)(null),n=(0,r.useRef)(null),a=(0,r.useRef)(null),c=(0,r.useRef)(null),l=le((0,r.useState)(!1),2),u=l[0],d=l[1];function _(){var e,t=c.current,n=document.documentElement.clientWidth||document.body.clientWidth,r=t.parentElement.clientWidth,o=t.parentElement.clientHeight;e=n<768?o-0:1*r,t.style.width=Math.floor(r)+"px",t.style.height=Math.floor(e)+"px"}var m=(0,r.useCallback)(ce(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,_(),d(!0),navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){e.next=7;break}if("http:"!==document.location.protocol){e.next=6;break}return e.abrupt("return",r.createElement(r.Fragment,null,"Please try loading the page"," ",r.createElement("a",{href:document.location.href.replace(/^http:/,"https:")},"securely")," ","to use the camera, or try without the camera instead."));case 6:return e.abrupt("return",r.createElement(r.Fragment,null,(0,s.Iu)("shade_finder.selfie.error_disabled")));case 7:return e.next=9,navigator.mediaDevices.getUserMedia({video:!0});case 9:return n=e.sent,t.current&&(t.current.srcObject=n,d(!1)),e.abrupt("return",null);case 14:if(e.prev=14,e.t0=e.catch(0),"NotAllowedError"!==e.t0.name){e.next=20;break}return e.abrupt("return",r.createElement(r.Fragment,null,(0,s.Iu)("shade_finder.selfie.error_permission")));case 20:return console.error(e.t0),L.Z.instance.report(e.t0),e.abrupt("return",r.createElement(r.Fragment,null,(0,s.Iu)("shade_finder.selfie.error_loading")));case 23:case"end":return e.stop()}}),e,null,[[0,14]])}))),[t]),E=le((0,r.useState)(null),2),p=E[0],A=E[1];function f(){if(!e.loading&&!u&&!e.selfieUrl){var r=function(){if(t.current&&n.current&&c){var e=n.current,r=c.current,o=e.getContext("2d"),a=parseFloat(r.style.height),i=parseFloat(r.style.width),s=t.current.videoWidth/t.current.videoHeight*a;e.width=i,e.height=a,o.translate(i,0),o.scale(-1,1);var l=-(s-i)/2;return o.drawImage(t.current,l,0,s,a),e.toDataURL("image/jpeg",.9)}}();e.onSelfieUrlChange(r),o=t.current,a=o?o.srcObject:null,(i=a?a.getTracks():null)&&i.forEach((function(e){e.stop()})),e.handleOnSelfieTake(r)}var o,a,i}function P(){m(),e.handleRetake()}(0,r.useEffect)((function(){m().then((function(e){return A(e)}))}),[m]),(0,r.useEffect)((function(){return window.addEventListener("resize",_),function(){return window.removeEventListener("resize",_)}}),[]);var h=re.gn?"selfie_component_wrapper selfie_component_wrapper_ios":"selfie_component_wrapper";return null!==p?r.createElement("div",{className:h,ref:c},r.createElement("div",{className:"selfie_prompt__wrapper"},r.createElement("div",{className:"selfie_prompt"},p,r.createElement("small",{className:"selfie-intro__span-show cursor-pointer",onClick:function(){e.handleSkipCamera()}},r.createElement("u",null,(0,s.Iu)("shade_finder.selfie.skip_step")))))):r.createElement("div",{className:h,ref:c},r.createElement("div",{className:"faceStencil__wrapper"},r.createElement("div",{className:"faceStencil",style:{backgroundImage:"url(".concat(ne,")")}},e.selfieUrl?r.createElement(ee,null):e.loading||u?r.createElement(Z.Z,null):r.createElement("div",{className:"loading emptyLoading"})),r.createElement("button",{className:"product_camera_button",onClick:function(){return f()}},r.createElement("img",{src:te,alt:(0,s.Iu)("shade_finder.selfie.take_photo")}),r.createElement("div",{className:"product_camera_button_label"},"Take Photo"))),e.error&&r.createElement("div",{className:"selfie_prompt__wrapper"},r.createElement("div",{className:"selfie_prompt"},(0,s.Iu)("shade_finder.selfie.error"))),e.warning&&r.createElement("div",{className:"selfie_prompt__wrapper"},r.createElement("div",{className:"selfie_prompt"},e.warning.title&&r.createElement("h3",{className:"title-text"},e.warning.title),r.createElement("p",null,e.warning.description),r.createElement("div",{className:"selfie-prompt__button-container"},r.createElement("button",{className:"selfie_prompt__retake-button",onClick:P},(0,s.Iu)("shade_finder.selfie.retake")),e.warning.allowIgnore&&void 0!==e.selfieData&&r.createElement("span",{className:"selfie_prompt__ignore-button",onClick:function(){e.handleSuccessfulAPIResponse(e.selfieData)}},(0,s.Iu)("shade_finder.selfie.use_image"))))),e.selfieUrl?r.createElement(r.Fragment,null,r.createElement("img",{className:"d-flex flex-grow-1 mb-0 max-w-none",src:e.selfieUrl,ref:a,alt:"Selfie"}),r.createElement(o.ZP,{key:2,appear:!0,mountOnEnter:!0,unmountOnExit:!0,in:Boolean(e.selfieUrl),timeout:300},(function(t){return r.createElement("div",{className:"selfie-canvas__stats",style:ae(ae({},i.h),i.v[t])},r.createElement("div",{className:"d-flex flex-grow-1 flex-column align-items-center justify-content-center"},r.createElement("span",{className:"selfie-canvas__stats__text cursor-pointer",onClick:function(){P()},hidden:e.success},r.createElement("u",null,(0,s.Iu)("shade_finder.selfie.retake")))),r.createElement("div",{className:"d-flex flex-grow-1 flex-column align-items-center justify-content-center"},r.createElement("span",{className:"selfie-canvas__stats__text"},e.success?(0,s.Iu)("shade_finder.selfie.scan_success"):(0,s.Iu)("shade_finder.selfie.scanning"))))}))):r.createElement(r.Fragment,null,r.createElement("video",{ref:t,autoPlay:!0,className:"selfie-canvas__video h-100",muted:!0,playsInline:!0}," "),r.createElement("canvas",{ref:n,className:"d-none"}," ")),Boolean(e.selfieUrl)&&r.createElement("div",{className:"selfie-white-flash"}))}function _e(e){return(_e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?me(Object(n),!0).forEach((function(t){be(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pe(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function Ae(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){pe(a,r,o,i,s,"next",e)}function s(e){pe(a,r,o,i,s,"throw",e)}i(void 0)}))}}function fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pe(e,t){return(Pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function he(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ce(e);if(t){var o=Ce(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ve(this,n)}}function ve(e,t){return!t||"object"!==_e(t)&&"function"!=typeof t?Re(e):t}function Re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ce(e){return(Ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function be(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ye=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pe(e,t)}(l,e);var t,n,a,c=he(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),be(Re(t=c.call(this,e)),"media",window.matchMedia(O.xX)),be(Re(t),"checkIsMobile",(function(){t.media.matches!==t.state.isMobile&&t.setState({isMobile:t.media.matches})})),be(Re(t),"resizeListener",(function(){return t.checkIsMobile()})),be(Re(t),"handleOpenSelfieModal",Ae(regeneratorRuntime.mark((function e(){var n,r=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>0&&void 0!==r[0]&&r[0],F.ZP.logShadeFinderCameraTurnedOn({retake:n}),e.next=4,t.setState({isSelfie:!0,selfieUrl:void 0,activeComponent:"selfieCanvas",retakeInProgress:n,responseError:!1,responseWarning:void 0});case 4:case"end":return e.stop()}}),e)})))),be(Re(t),"handleTakeSelfieProcess",function(){var e=Ae(regeneratorRuntime.mark((function e(n,r){var o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.setState({retakeInProgress:!1}),o=!1,a=!1,5750,setTimeout((function(){!t.state.retakeInProgress&&a?t.handleSuccessfulAPIResponse(n):o=!0}),5750),n.handleUpdateSelfieURL(r).then((function(e){var r=void 0!==e&&void 0===e.warning;r||e&&e.warning&&t.setState({responseWarning:{title:e.warning.title,description:e.warning.description,allowIgnore:e.warning.allowIgnore},selfieData:n}),!t.state.retakeInProgress&&r&&(o?t.handleSuccessfulAPIResponse(n):a=!0)})).catch((function(e){var n;console.error(e),null===L.Z||void 0===L.Z||null===(n=L.Z.instance)||void 0===n||n.reportError(null==e?void 0:e.message,null==e?void 0:e.stack),t.setState({responseError:!0})}));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),be(Re(t),"handleSuccessfulAPIResponse",(function(e){t.setState({responseSuccessful:!0,responseWarning:void 0}),setTimeout((function(){t.setState({isSelfie:!1,selfieUrl:void 0,responseError:!1,responseSuccessful:!0}),e.handleCompleteCategory("selfie")}),2e3)})),be(Re(t),"handleRenderJSX",(function(e,n){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=void 0===t.state.selfieUrl&&!t.state.retakeInProgress,l=r.createElement(r.Fragment,null,r.createElement(y.Z,{showThis:"selfieIntro"===t.state.activeComponent||"selfieCanvas"===t.state.activeComponent,title:"shade_finder.title",smallText:"shade_finder.back",onSmallTextClick:function(){return n.handleGoToQuestionsLastQ()},smallTextAvailable:c}),r.createElement(o.ZP,{timeout:600,appear:!0,in:"selfieIntro"===t.state.activeComponent||"selfieCanvas"===t.state.activeComponent,unmountOnExit:!0,mountOnEnter:!0},(function(e){return r.createElement("div",{style:Ee(Ee({},i.h),i.v[e]),className:"selfie-intro__notification"},r.createElement("p",null,(0,s.Iu)("shade_finder.selfie.description_start")),r.createElement("p",null,(0,s.Iu)("shade_finder.selfie.description_best_results")),r.createElement("p",{dangerouslySetInnerHTML:(0,s.yH)("shade_finder.selfie.description_disclaimer_html")}))})),r.createElement("div",{className:"selfie-intro__body"},r.createElement(o.ZP,{timeout:600,appear:!0,in:"selfieIntro"===t.state.activeComponent,unmountOnExit:!0,mountOnEnter:!0},(function(e){return r.createElement("div",{className:"selfie-intro__button-container"},r.createElement("small",{className:"selfie-intro__span-show cursor-pointer",style:Ee(Ee({},i.h),i.v[e]),onClick:function(e){F.ZP.logShadeFinderSkipCamera({}),n.handleCompleteCategory("selfie")}},r.createElement("u",null,(0,s.Iu)("shade_finder.selfie.skip"))),r.createElement("button",{className:"btn-action btn-selfie-intro",type:"button",onClick:function(e){return t.handleOpenSelfieModal()},style:Ee(Ee({},i.h),i.v[e])},(0,s.Iu)("shade_finder.selfie.take_photo")))})))),u=r.createElement(r.Fragment,null,r.createElement(de,{error:t.state.responseError,warning:t.state.responseWarning,selfieData:t.state.selfieData,loading:t.state.isLoading,success:t.state.responseSuccessful,selfieUrl:t.state.selfieUrl,onSelfieUrlChange:function(e){t.setState({selfieUrl:e})},handleOnSelfieTake:function(e){return t.handleTakeSelfieProcess(n,e)},handleRetake:function(){return t.handleOpenSelfieModal(!0)},handleSuccessfulAPIResponse:function(e){return t.handleSuccessfulAPIResponse(e)},handleSkipCamera:function(){F.ZP.logShadeFinderSkipCamera({}),n.handleCompleteCategory("selfie")}}),t.state.isMobile&&r.createElement("span",{onClick:function(){n.handleGoToQuestionsLastQ()},className:"section-title__smallText selfie-canvas__step".concat(c?"":" unavailable"," ")},(0,s.Iu)("shade_finder.back"))),d="selfieCanvas"===e&&(a&&!t.state.isMobile||!a&&t.state.isMobile);return d?u:l})),t.state={isSelfie:!1,selfieUrl:void 0,isLoading:!1,activeComponent:"selfieIntro",retakeInProgress:!1,responseError:!1,responseSuccessful:!1,responseWarning:void 0,selfieData:void 0,isMobile:!1},t}return t=l,(n=[{key:"componentDidMount",value:function(){this.checkIsMobile(),this.media.addListener(this.resizeListener)}},{key:"componentWillUnmount",value:function(){this.media.removeListener(this.resizeListener)}},{key:"render",value:function(){var e=this;return r.createElement(Ge.Consumer,null,(function(t){return t&&r.createElement("div",{className:"questionnaire-container"},!e.state.isMobile&&r.createElement("div",{className:"questionnaire-content-secondary"},"selfieIntro"===e.state.activeComponent&&r.createElement(g.Z,{mediaKey:"selfie"}),"selfieCanvas"===e.state.activeComponent&&e.handleRenderJSX(e.state.activeComponent,t,!0)),r.createElement("div",{className:"questionnaire-content ".concat(e.state.isMobile&&"selfieCanvas"===e.state.activeComponent?" m-0 p-0 w-100":""," ")},e.handleRenderJSX(e.state.activeComponent,t)))}))}}])&&fe(t.prototype,n),a&&fe(t,a),l}(r.Component),Te=n.p+"310c137c77d2e575b2d331e32cd6b86e.svg",Se=JSON.parse('[{"id":4,"sort":0,"sectionTitle":"shade_finder.section_coverage","title":"shade_finder.questions.skin_coverage.title","description":"shade_finder.questions.skin_coverage.description","cssClass":"question__body--column","coverageQuestion":true,"answers":[{"id":21,"sort":1,"description_title":"shade_finder.questions.skin_coverage.answers.sheer","description_logging":"Sheer","payload":{}},{"id":22,"sort":2,"description_title":"shade_finder.questions.skin_coverage.answers.medium","description_logging":"Medium","payload":{}},{"id":23,"sort":3,"description_title":"shade_finder.questions.skin_coverage.answers.full","description_logging":"Full","payload":{}}]},{"id":0,"sort":1,"title":"shade_finder.questions.veins.title","description":"shade_finder.questions.veins.description","undertoneQuestion":true,"answers":[{"id":4,"sort":1,"description":"shade_finder.questions.veins.answers.blue","color":"#92c3da","payload":{"warmth":0}},{"id":5,"sort":2,"description":"shade_finder.questions.veins.answers.blue_green","color":"#92dabb","payload":{"warmth":1}},{"id":6,"sort":3,"description":"shade_finder.questions.veins.answers.green","color":"#abda92","payload":{"warmth":2}},{"id":7,"sort":4,"description":"shade_finder.questions.veins.answers.unknown","color":"#e6e3e0","payload":{}}]},{"id":1,"sort":2,"requiresPreviousAnswer":7,"title":"shade_finder.questions.sun.title","description":"shade_finder.questions.sun.description","undertoneQuestion":true,"answers":[{"id":8,"sort":1,"description":"shade_finder.questions.sun.answers.burns","color":"#da9292","payload":{"warmth":0}},{"id":9,"sort":2,"description":"shade_finder.questions.sun.answers.burns_tans","color":"#dab192","payload":{"warmth":1}},{"id":10,"sort":3,"description":"shade_finder.questions.sun.answers.tans","color":"#dacf92","payload":{"warmth":2}}]},{"id":2,"sort":3,"title":"shade_finder.questions.skin_concern.title","description":"shade_finder.questions.skin_concern.description","cssClass":"question__body--column","concernQuestion":true,"answers":[{"id":11,"sort":1,"description_title":"shade_finder.questions.skin_concern.answers.redness","description_logging":"Redness","payload":{}},{"id":12,"sort":2,"description_title":"shade_finder.questions.skin_concern.answers.undereye_circles","description_logging":"Undereye Circles","payload":{}},{"id":13,"sort":3,"description_title":"shade_finder.questions.skin_concern.answers.blemishes","description_logging":"Blemishes","payload":{}},{"id":14,"sort":4,"description_title":"shade_finder.questions.skin_concern.answers.hyperpigmentation","description":"shade_finder.questions.skin_concern.answers.hyperpigmentation_description","description_logging":"Hyperpigmentation","payload":{}},{"id":15,"sort":5,"description_title":"shade_finder.questions.skin_concern.answers.uneven_skin_tone","description_logging":"Uneven","payload":{}},{"id":16,"sort":6,"description_title":"shade_finder.questions.skin_concern.answers.none","description_logging":"None","payload":{}}]}]');var Oe=n(4022),ge=n(67719),we=n(79198),Ne=n(3161);function Ie(e){return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(n),!0).forEach((function(t){Ve(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ue(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function De(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Ue(a,r,o,i,s,"next",e)}function s(e){Ue(a,r,o,i,s,"throw",e)}i(void 0)}))}}function Me(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fe(e,t){return(Fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Be(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=qe(e);if(t){var o=qe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return je(this,n)}}function je(e,t){return!t||"object"!==Ie(t)&&"function"!=typeof t?Qe(e):t}function Qe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qe(e){return(qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ve(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ge=(0,r.createContext)({questions:null,images:null,answers:new Map,chosenImages:new Map,selfieURL:void 0,recommendedConcealer:void 0,recommendedSerum:void 0,recommendedFoundation:void 0,activeComponent:"questions",darkness:Q,warmth:1,skinToneAnalysisEventId:void 0,activeSettings:void 0,indexOfQuestion:0,setIndexOfQuestion:function(){},handleUpdateSelfieURL:function(){return Promise.resolve()},handleCompleteCategory:function(){},handleUpdateAnswers:function(){},handleGoToQuestionsLastQ:function(){},handleGoOneScreenBack:function(){},handleResetToCategory:function(){}}),We="shade-finder.settings",Ye=["intro","questions","selfie","images","results"],Xe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fe(e,t)}(u,e);var t,n,a,c,l=Be(u);function u(){var e;Me(this,u);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Ve(Qe(e=l.call.apply(l,[this].concat(n))),"headerPadding","0"),Ve(Qe(e),"setIndexOfQuestion",(function(t){e.setState({indexOfQuestion:t})})),Ve(Qe(e),"handleResetToCategory",function(){var t=De(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=n,t.next="images"===t.t0?3:"selfie"===t.t0?4:"questions"===t.t0?5:6;break;case 3:return t.abrupt("return",e.setState({activeComponent:"images",chosenImages:new Map,darkness:void 0,selfieURL:void 0,recommendedConcealer:void 0,recommendedFoundation:void 0,recommendedSerum:void 0}));case 4:return t.abrupt("return",e.setState({activeComponent:"selfie",chosenImages:new Map,darkness:void 0,selfieURL:void 0,recommendedConcealer:void 0,recommendedFoundation:void 0,recommendedSerum:void 0}));case 5:return t.abrupt("return",e.setState({activeComponent:"questions",indexOfQuestion:0,answers:new Map,chosenImages:new Map,darkness:void 0,selfieURL:void 0,recommendedConcealer:void 0,recommendedFoundation:void 0,recommendedSerum:void 0,warmth:void 0}));case 6:console.warn("handleResetToCategory did nothing.");case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),Ve(Qe(e),"handleCompleteCategory",function(){var t=De(regeneratorRuntime.mark((function t(n){var r,o,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==(r=Ye.indexOf(n))){t.next=4;break}return console.warn("Error while completing category",n),t.abrupt("return");case 4:if(!((o=r+1)<0||o>=Ye.length)){t.next=7;break}return t.abrupt("return");case 7:return(a=Ye[o])===Ye[Ye.length-1]&&"true"==={NODE_ENV:"production",REACT_APP_MODEL_URI_PREFIX:"https://cdn.roseinc.beautylabs.com/production/132459692220/vto/models/",REACT_APP_SKIN_TONE_API:"https://skintone.roseinc.beautylabs.com",REACT_APP_NAME:"rose-inc-web",REACT_APP_ERROR_REPORT_URL:"https://errors.amyris.beautylabs.com/errorReport",REACT_APP_DEFAULT_MODEL_NAME_EYEBROWS:"FUTest-Brows-6",REACT_APP_ACCOUNT_SYSTEM_PASSWORD_REQUIRE_NUMBERS:"true",REACT_APP_BI_ACCOUNT_APP_NAME:"account",REACT_APP_PLUGIN_BASE:"https://cdn.roseinc.beautylabs.com/production/132459692220/vto/plugin/",REACT_APP_BI_APP_NAME:"roseinc_web",REACT_APP_ACCOUNT_NAMESPACE:"roseinc",REACT_APP_BI_LIVESHOPPING_APP_NAME:"liveshopping",REACT_APP_COMMIT_HASH:"cd7b583f591f3aa5f0b8067f9bb0c2bb2fe804eb",REACT_APP_STOREFRONT_API_KEY:"f1c1eba5583bb760c097cba85a0b1a51",REACT_APP_ACCOUNT_BACKEND_BASE_URI:"https://account.amyris.beautylabs.com/api/consumer/roseinc",REACT_APP_LIVESHOPPING_NAMESPACE:"roseinc",REACT_APP_ACCOUNT_SYSTEM_PASSWORD_REQUIRE_SYMBOLS:"true",REACT_APP_FUSIONFS_URI_PREFIX:"https://cdn.roseinc.beautylabs.com/production/132459692220/vto/plugin/data/",REACT_APP_BI_REPORT_URI:"https://logs.amyris.beautylabs.com/bi",REACT_APP_DEFAULT_MODEL_NAME_FULL_FACE_AND_EYES:"VTO-5-2",REACT_APP_ACCOUNT_SYSTEM_PASSWORD_REQUIRE_LOWERCASE:"true",REACT_APP_STOREFRONT_DOMAIN:"www.roseinc.com",REACT_APP_ACCOUNT_SYSTEM_PASSWORD_REQUIRE_UPPERCASE:"true",REACT_APP_ACCOUNT_PAGE_NAME:"myaccount",REACT_APP_VERSION:"0.0.1",REACT_APP_DEFAULT_MODEL_NAME_FULL_FACE_AND_MOUTH:"VTO-5-1",REACT_APP_CDN_ROOT:"https://cdn.roseinc.beautylabs.com/production/132459692220",REACT_APP_TEXTURE_URI_PREFIX:"https://cdn.roseinc.beautylabs.com/production/vto/textures/",REACT_APP_LIVE_SHOPPING_BACKEND_BASE_URI:"https://liveshopping.amyris.beautylabs.com/api/roseinc",REACT_APP_ACCOUNT_SYSTEM_PASSWORD_MIN_LEN:"8"}.REACT_APP_QUESTIONNAIRE_PRINT_DEBUG&&(console.log("Image Selection Complete --------"),console.log("Question Config: "+e.state.activeSettings.name),console.log("Chosen Text Answer Ids: "+Array.from(e.state.answers.keys())),console.log("Chosen Image Ids: "+Array.from(e.state.chosenImages.keys())),console.log("Final Darkness: "+e.state.darkness),console.log("Final Warmth: "+e.state.warmth)),t.abrupt("return",e.setState({activeComponent:a,indexOfQuestion:0}));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),Ve(Qe(e),"addNewAnswer",(function(t,n){if(t.isImagesLevel){if(t.isImagesLevel)if(n){if(t.chosenImages.set(t.answerId,{id:t.answerId,payload:t.payload}),e.state.activeSettings.useImageRecommendedConcealer){var r,o=null===(r=e.state.images)||void 0===r?void 0:r.find((function(e){return e.id===t.answerId}));void 0!==o&&void 0!==o.recommendedConcealer&&void 0!==o.recommendedFoundation&&void 0!==o.recommendedSerum?e.setState({recommendedConcealer:o.recommendedConcealer,recommendedSerum:o.recommendedSerum,recommendedFoundation:o.recommendedFoundation}):console.warn("face data error:",o)}}else t.chosenImages.delete(t.imgId)}else n?t.answers.set(t.answerId,{id:t.answerId,payload:t.payload}):t.answer&&t.answers.delete(t.answer.id);var a=e.getCorrectUserStats(n?t.payload:t.answer?t.answer.payload:{darkness:0,warmth:0},t.chosenImages);if(a.newDarkness=-1!==a.newDarkness?a.newDarkness:t.darkness,a.newWarmth=-1!==a.newWarmth?a.newWarmth:t.warmth,void 0!==a.newDarkness&&(a.newDarkness=a.newDarkness>6?6:a.newDarkness<1?1:a.newDarkness),void 0!==a.newWarmth&&(a.newWarmth=a.newWarmth>2?2:a.newWarmth<0?0:a.newWarmth),t.isImagesLevel){var i,s,c=void 0;e.state.images&&(c=e.state.images.find((function(e){return e.id===(n?t.answerId:t.imgId)}))),F.ZP.logSkinImageChoice({chosen_image:null!==(i=null===(s=c)||void 0===s?void 0:s.modelName)&&void 0!==i?i:"",selected:n,image_tone:t.payload.darkness,image_undertone:t.payload.warmth,user_tone_before:void 0===t.darkness?null:t.darkness,user_tone_after:void 0===a.newDarkness?null:a.newDarkness})}else if(n&&void 0!==t.payload.warmth)F.ZP.logSkinUndertoneChoice({undertone:t.payload.warmth});else{var l=e.state.activeSettings.textQuestions.find((function(e){return e.answers.find((function(e){return e.id===t.answerId}))})),u=null==l?void 0:l.answers.find((function(e){return e.id===t.answerId}));l&&u&&(l.concernQuestion&&F.ZP.logSkinConcernChoice({concern:u.description_logging||""}),l.coverageQuestion&&F.ZP.logSkinDesiredCoverage({desired_coverage:u.description_logging||""}))}return a})),Ve(Qe(e),"getCorrectUserStats",(function(t,n){var r=-1,o=-1;return void 0!==t.darkness&&(r=e.getAverageDarknessFromImageAnswers(n)),void 0!==t.warmth&&(o=t.warmth),{newDarkness:r,newWarmth:o}})),Ve(Qe(e),"handleUpdateAnswers",(function(t,n,r,o,a){var i=e.state.answers,s=e.state.chosenImages,c=e.state.darkness,l=e.state.warmth,u="images"===e.state.activeComponent,d=t;if(u&&(t=s.has(t)?-1:t),"next"!==n&&"change"!==n||-1===t)"change"===n&&-1===t&&o&&o.size>0&&o.forEach((function(n){if(n.id===d||!u){var o=u?s.get(d):i.get(n.id);if(o){var a=e.addNewAnswer({isImagesLevel:u,answers:i,answerId:t,payload:r,chosenImages:s,darkness:c,warmth:l,imgId:d,answer:o},!1),_=a.newDarkness,m=a.newWarmth;c=_,l=m}}}));else{"change"===n&&(u?!s.has(t):!i.has(t))&&void 0!==o&&o.size>0&&a&&!u&&o&&o.forEach((function(e){var t=i.get(e.id);t&&i.delete(t.id)}));var _=e.addNewAnswer({isImagesLevel:u,answers:i,answerId:t,payload:r,chosenImages:s,darkness:c,warmth:l,imgId:d},!0),m=_.newDarkness,E=_.newWarmth;c=m,l=E}e.setState({answers:i,darkness:c,warmth:l,chosenImages:s})})),Ve(Qe(e),"handleUpdateSelfieURL",function(){var t=De(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,Oe.Z)(n,F.HK.ShadeFinder).then((function(t){if(void 0!==t&&void 0!==t.skinTone){var n=e.state.chosenImages;n.set(0,{id:0,payload:{darkness:t.skinTone,warmth:0}});var r=Math.round(t.skinTone);if(r<0){var o,a="api returned skin tone value less than suggestion matrix size";"true"==={NODE_ENV:"production",REACT_APP_MODEL_URI_PREFIX:"https://cdn.roseinc.beautylabs.com/production/132459692220/vto/models/",REACT_APP_SKIN_TONE_API:"https://skintone.roseinc.beautylabs.com",REACT_APP_NAME:"rose-inc-web",REACT_APP_ERROR_REPORT_URL:"https://errors.amyris.beautylabs.com/errorReport",REACT_APP_DEFAULT_MODEL_NAME_EYEBROWS:"FUTest-Brows-6",REACT_APP_ACCOUNT_SYSTEM_PASSWORD_REQUIRE_NUMBERS:"true",REACT_APP_BI_ACCOUNT_APP_NAME:"account",REACT_APP_PLUGIN_BASE:"https://cdn.roseinc.beautylabs.com/production/132459692220/vto/plugin/",REACT_APP_BI_APP_NAME:"roseinc_web",REACT_APP_ACCOUNT_NAMESPACE:"roseinc",REACT_APP_BI_LIVESHOPPING_APP_NAME:"liveshopping",REACT_APP_COMMIT_HASH:"cd7b583f591f3aa5f0b8067f9bb0c2bb2fe804eb",REACT_APP_STOREFRONT_API_KEY:"f1c1eba5583bb760c097cba85a0b1a51",REACT_APP_ACCOUNT_BACKEND_BASE_URI:"https://account.amyris.beautylabs.com/api/consumer/roseinc",REACT_APP_LIVESHOPPING_NAMESPACE:"roseinc",REACT_APP_ACCOUNT_SYSTEM_PASSWORD_REQUIRE_SYMBOLS:"true",REACT_APP_FUSIONFS_URI_PREFIX:"https://cdn.roseinc.beautylabs.com/production/132459692220/vto/plugin/data/",REACT_APP_BI_REPORT_URI:"https://logs.amyris.beautylabs.com/bi",REACT_APP_DEFAULT_MODEL_NAME_FULL_FACE_AND_EYES:"VTO-5-2",REACT_APP_ACCOUNT_SYSTEM_PASSWORD_REQUIRE_LOWERCASE:"true",REACT_APP_STOREFRONT_DOMAIN:"www.roseinc.com",REACT_APP_ACCOUNT_SYSTEM_PASSWORD_REQUIRE_UPPERCASE:"true",REACT_APP_ACCOUNT_PAGE_NAME:"myaccount",REACT_APP_VERSION:"0.0.1",REACT_APP_DEFAULT_MODEL_NAME_FULL_FACE_AND_MOUTH:"VTO-5-1",REACT_APP_CDN_ROOT:"https://cdn.roseinc.beautylabs.com/production/132459692220",REACT_APP_TEXTURE_URI_PREFIX:"https://cdn.roseinc.beautylabs.com/production/vto/textures/",REACT_APP_LIVE_SHOPPING_BACKEND_BASE_URI:"https://liveshopping.amyris.beautylabs.com/api/roseinc",REACT_APP_ACCOUNT_SYSTEM_PASSWORD_MIN_LEN:"8"}.REACT_APP_QUESTIONNAIRE_PRINT_DEBUG&&console.warn(a),null===(o=L.Z.instance)||void 0===o||o.reportError(a,(new Error).stack||""),r=0}if(r>D.length-1){var i,s="api returned skin tone value greater than suggestion matrix size";"true"==={NODE_ENV:"production",REACT_APP_MODEL_URI_PREFIX:"https://cdn.roseinc.beautylabs.com/production/132459692220/vto/models/",REACT_APP_SKIN_TONE_API:"https://skintone.roseinc.beautylabs.com",REACT_APP_NAME:"rose-inc-web",REACT_APP_ERROR_REPORT_URL:"https://errors.amyris.beautylabs.com/errorReport",REACT_APP_DEFAULT_MODEL_NAME_EYEBROWS:"FUTest-Brows-6",REACT_APP_ACCOUNT_SYSTEM_PASSWORD_REQUIRE_NUMBERS:"true",REACT_APP_BI_ACCOUNT_APP_NAME:"account",REACT_APP_PLUGIN_BASE:"https://cdn.roseinc.beautylabs.com/production/132459692220/vto/plugin/",REACT_APP_BI_APP_NAME:"roseinc_web",REACT_APP_ACCOUNT_NAMESPACE:"roseinc",REACT_APP_BI_LIVESHOPPING_APP_NAME:"liveshopping",REACT_APP_COMMIT_HASH:"cd7b583f591f3aa5f0b8067f9bb0c2bb2fe804eb",REACT_APP_STOREFRONT_API_KEY:"f1c1eba5583bb760c097cba85a0b1a51",REACT_APP_ACCOUNT_BACKEND_BASE_URI:"https://account.amyris.beautylabs.com/api/consumer/roseinc",REACT_APP_LIVESHOPPING_NAMESPACE:"roseinc",REACT_APP_ACCOUNT_SYSTEM_PASSWORD_REQUIRE_SYMBOLS:"true",REACT_APP_FUSIONFS_URI_PREFIX:"https://cdn.roseinc.beautylabs.com/production/132459692220/vto/plugin/data/",REACT_APP_BI_REPORT_URI:"https://logs.amyris.beautylabs.com/bi",REACT_APP_DEFAULT_MODEL_NAME_FULL_FACE_AND_EYES:"VTO-5-2",REACT_APP_ACCOUNT_SYSTEM_PASSWORD_REQUIRE_LOWERCASE:"true",REACT_APP_STOREFRONT_DOMAIN:"www.roseinc.com",REACT_APP_ACCOUNT_SYSTEM_PASSWORD_REQUIRE_UPPERCASE:"true",REACT_APP_ACCOUNT_PAGE_NAME:"myaccount",REACT_APP_VERSION:"0.0.1",REACT_APP_DEFAULT_MODEL_NAME_FULL_FACE_AND_MOUTH:"VTO-5-1",REACT_APP_CDN_ROOT:"https://cdn.roseinc.beautylabs.com/production/132459692220",REACT_APP_TEXTURE_URI_PREFIX:"https://cdn.roseinc.beautylabs.com/production/vto/textures/",REACT_APP_LIVE_SHOPPING_BACKEND_BASE_URI:"https://liveshopping.amyris.beautylabs.com/api/roseinc",REACT_APP_ACCOUNT_SYSTEM_PASSWORD_MIN_LEN:"8"}.REACT_APP_QUESTIONNAIRE_PRINT_DEBUG&&console.warn(s),null===(i=L.Z.instance)||void 0===i||i.reportError(s,(new Error).stack||""),r=D.length-1}var c=void 0!==e.state.warmth&&e.state.warmth>=0&&e.state.warmth<=D.length?e.state.warmth:1,l=M({darkness:r,warmth:c});e.setState({darkness:t.skinTone,chosenImages:n,recommendedConcealer:l.concealerTitle,recommendedFoundation:l.foundationTitle,recommendedSerum:l.serumTitle})}return t}));case 2:return r=t.sent,e.setState({selfieURL:n,skinToneAnalysisEventId:null==r?void 0:r.eventId}),t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),Ve(Qe(e),"handleUpdateDataSets",(function(t){var n=e.state.settings[t].imageData;e.setState({images:n,questions:e.state.settings[t].textQuestions,activeSettings:e.state.settings[t]})})),Ve(Qe(e),"handleGoToQuestionsLastQ",(function(){if(null===e.state.questions)return null;var t=e.state.questions.length-1;e.setState((function(e){return ke(ke({},e),{},{activeComponent:"questions",indexOfQuestion:t,darkness:void 0,selfieURL:void 0,recommendedConcealer:void 0,recommendedFoundation:void 0,recommendedSerum:void 0})}))})),Ve(Qe(e),"handleGoOneScreenBack",(function(){e.setState((function(t){if(!t.questions)return null;var n=e.sortOfLastAnsweredQuestion(t.indexOfQuestion,t.questions,t.answers);return void 0!==n?{indexOfQuestion:n}:null}))})),Ve(Qe(e),"handleRender",(function(t){switch(t){case"intro":return r.createElement("div",{className:"questionnaire-container-intro-wrapper",onLoad:function(){var e;return null===(e=document.querySelector("body"))||void 0===e?void 0:e.classList.add("sf-page-intro")}},r.createElement("div",{className:"questionnaire-container questionnaire-container-intro"},r.createElement("div",{className:"questionnaire-content-secondary"},r.createElement(g.Z,{mediaKey:"landing_page"})),r.createElement("div",{className:"questionnaire-content d-flex flex-column questionnaire-intro",onClick:function(t){e.state.isListOpen&&e.setState({isListOpen:!1})}},r.createElement(y.Z,{showThis:"intro"===e.state.activeComponent,title:"shade_finder.title",showSmallText:!1,h2ClassName:"questionnaire-section-title",hideMobileCloseButton:!0}),r.createElement(o.ZP,{timeout:100,appear:!0,in:"intro"===e.state.activeComponent,unmountOnExit:!0,mountOnEnter:!0},(function(e){return r.createElement("p",{className:"questionnaire-intro-subtitle",style:ke(ke({},i.h),i.v[e])},(0,s.Iu)("shade_finder.intro.subtitle"))})),r.createElement(o.ZP,{timeout:300,appear:!0,in:"intro"===e.state.activeComponent,unmountOnExit:!0,mountOnEnter:!0},(function(t){return r.createElement("div",{className:"questionnaire-intro__navigation-wrapper"},r.createElement("button",{type:"button",className:"btn-action",onClick:function(){if(F.ZP.logShadeFinderStarted({settings:e.state.activeSettings.name}),document.querySelector(".sf-page-header")){var t=document.querySelector(".main .container"),n=document.querySelector("header");n&&(n.classList.remove("sf-page-header","opt-transparent","opt-light"),n.classList.add("no-scroll-change")),t.style.marginTop="0"}e.handleCompleteCategory("intro")},style:ke(ke({},i.h),i.v[t])},(0,s.Iu)("shade_finder.intro.cta")))})),e.state.settings.length>1&&"true"==={NODE_ENV:"production",REACT_APP_MODEL_URI_PREFIX:"https://cdn.roseinc.beautylabs.com/production/132459692220/vto/models/",REACT_APP_SKIN_TONE_API:"https://skintone.roseinc.beautylabs.com",REACT_APP_NAME:"rose-inc-web",REACT_APP_ERROR_REPORT_URL:"https://errors.amyris.beautylabs.com/errorReport",REACT_APP_DEFAULT_MODEL_NAME_EYEBROWS:"FUTest-Brows-6",REACT_APP_ACCOUNT_SYSTEM_PASSWORD_REQUIRE_NUMBERS:"true",REACT_APP_BI_ACCOUNT_APP_NAME:"account",REACT_APP_PLUGIN_BASE:"https://cdn.roseinc.beautylabs.com/production/132459692220/vto/plugin/",REACT_APP_BI_APP_NAME:"roseinc_web",REACT_APP_ACCOUNT_NAMESPACE:"roseinc",REACT_APP_BI_LIVESHOPPING_APP_NAME:"liveshopping",REACT_APP_COMMIT_HASH:"cd7b583f591f3aa5f0b8067f9bb0c2bb2fe804eb",REACT_APP_STOREFRONT_API_KEY:"f1c1eba5583bb760c097cba85a0b1a51",REACT_APP_ACCOUNT_BACKEND_BASE_URI:"https://account.amyris.beautylabs.com/api/consumer/roseinc",REACT_APP_LIVESHOPPING_NAMESPACE:"roseinc",REACT_APP_ACCOUNT_SYSTEM_PASSWORD_REQUIRE_SYMBOLS:"true",REACT_APP_FUSIONFS_URI_PREFIX:"https://cdn.roseinc.beautylabs.com/production/132459692220/vto/plugin/data/",REACT_APP_BI_REPORT_URI:"https://logs.amyris.beautylabs.com/bi",REACT_APP_DEFAULT_MODEL_NAME_FULL_FACE_AND_EYES:"VTO-5-2",REACT_APP_ACCOUNT_SYSTEM_PASSWORD_REQUIRE_LOWERCASE:"true",REACT_APP_STOREFRONT_DOMAIN:"www.roseinc.com",REACT_APP_ACCOUNT_SYSTEM_PASSWORD_REQUIRE_UPPERCASE:"true",REACT_APP_ACCOUNT_PAGE_NAME:"myaccount",REACT_APP_VERSION:"0.0.1",REACT_APP_DEFAULT_MODEL_NAME_FULL_FACE_AND_MOUTH:"VTO-5-1",REACT_APP_CDN_ROOT:"https://cdn.roseinc.beautylabs.com/production/132459692220",REACT_APP_TEXTURE_URI_PREFIX:"https://cdn.roseinc.beautylabs.com/production/vto/textures/",REACT_APP_LIVE_SHOPPING_BACKEND_BASE_URI:"https://liveshopping.amyris.beautylabs.com/api/roseinc",REACT_APP_ACCOUNT_SYSTEM_PASSWORD_MIN_LEN:"8"}.REACT_APP_QUESTIONNAIRE_SHOW_SETTINGS_OPTIONS&&r.createElement("div",{className:"debug-list__select-wrapper"},r.createElement("div",{className:e.state.isListOpen?"debug-list__select active":"debug-list__select",onClick:function(t){return e.setState({isListOpen:!e.state.isListOpen})}},r.createElement("label",null,e.state.activeSettings.name),r.createElement("img",{className:"ms-3",src:Te,alt:"arrow"})),e.state.isListOpen&&r.createElement("div",{className:"debug-list__select__items"},e.state.settings&&e.state.settings.map((function(t,n){var o;return r.createElement("div",{key:n,onClick:function(){var r=De(regeneratorRuntime.mark((function r(o){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o.stopPropagation(),r.next=3,e.setState({isListOpen:!1});case 3:e.handleUpdateDataSets(n),window.localStorage.setItem(We,t.name);case 5:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),className:"debug-list__select__items__item"},t.name,t.name===(null===(o=e.state.activeSettings)||void 0===o?void 0:o.name)&&r.createElement("img",{className:"ms-2",src:Te,alt:"arrow"}))})))))));case"questions":case"images":return r.createElement(U,null);case"selfie":return r.createElement(ye,null);case"results":return r.createElement(K,null);case"loading":return r.createElement(Z.Z,null);case"error":return r.createElement("div",{className:"error-container__wrapper"},r.createElement(o.ZP,{timeout:100,appear:!0,in:"error"===e.state.activeComponent,unmountOnExit:!0,mountOnEnter:!0},(function(t){return r.createElement("div",{className:"error-container",style:ke(ke({},i.h),i.v[t])},r.createElement("h5",{className:"error-container__title"},"Sorry, something went wrong"),e.state.isError&&r.createElement("p",{className:"error-container__text"},e.state.isError),r.createElement("button",{type:"button",className:"error-container__button",onClick:function(t){e.setState({isError:!1,activeComponent:"loading"}),document.getElementsByTagName("body")[0].style.overflow="auto",document.getElementsByTagName("html")[0].style.overflow="auto"}},"OK"))})))}})),e}return t=u,(n=[{key:"componentDidMount",value:(c=De(regeneratorRuntime.mark((function e(){var t,n,r,o,a,i,s,c,l,u,d,_,m,E,p,A,f,P,h,v,R,C;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(window.shopData.shadeFinderConfig,{method:"GET"});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,r=[ke(ke({},{textQuestions:Se,imageData:n,initialImageQConfig:B,normalImageQConfig:j,maxChosenImageCount:2,selfieFlowSkipImageSelection:!0,useImageRecommendedConcealer:!0,captureEmail:!0}),{},{name:"Generic settings"})],this.setState({questions:null,images:null,answers:new Map,chosenImages:new Map,selfieURL:void 0,recommendedConcealer:void 0,recommendedFoundation:void 0,recommendedSerum:void 0,activeComponent:"questions",isError:!1,darkness:Q,warmth:1,skinToneAnalysisEventId:void 0,isListOpen:!1,settings:r,activeSettings:r[0],indexOfQuestion:0}),o=-1,null!==(a=window.localStorage.getItem(We))&&(o=this.state.settings.findIndex((function(e){return e.name===a}))),-1===o&&(i=(0,ge.Z)(Ne.Z.instance.deviceId),s=i[0]<<24|i[1]<<16|i[2]<<8|i[3],o=(s%this.state.settings.length+this.state.settings.length)%this.state.settings.length,window.localStorage.setItem(We,this.state.settings[o].name)),"true"==={NODE_ENV:"production",REACT_APP_MODEL_URI_PREFIX:"https://cdn.roseinc.beautylabs.com/production/132459692220/vto/models/",REACT_APP_SKIN_TONE_API:"https://skintone.roseinc.beautylabs.com",REACT_APP_NAME:"rose-inc-web",REACT_APP_ERROR_REPORT_URL:"https://errors.amyris.beautylabs.com/errorReport",REACT_APP_DEFAULT_MODEL_NAME_EYEBROWS:"FUTest-Brows-6",REACT_APP_ACCOUNT_SYSTEM_PASSWORD_REQUIRE_NUMBERS:"true",REACT_APP_BI_ACCOUNT_APP_NAME:"account",REACT_APP_PLUGIN_BASE:"https://cdn.roseinc.beautylabs.com/production/132459692220/vto/plugin/",REACT_APP_BI_APP_NAME:"roseinc_web",REACT_APP_ACCOUNT_NAMESPACE:"roseinc",REACT_APP_BI_LIVESHOPPING_APP_NAME:"liveshopping",REACT_APP_COMMIT_HASH:"cd7b583f591f3aa5f0b8067f9bb0c2bb2fe804eb",REACT_APP_STOREFRONT_API_KEY:"f1c1eba5583bb760c097cba85a0b1a51",REACT_APP_ACCOUNT_BACKEND_BASE_URI:"https://account.amyris.beautylabs.com/api/consumer/roseinc",REACT_APP_LIVESHOPPING_NAMESPACE:"roseinc",REACT_APP_ACCOUNT_SYSTEM_PASSWORD_REQUIRE_SYMBOLS:"true",REACT_APP_FUSIONFS_URI_PREFIX:"https://cdn.roseinc.beautylabs.com/production/132459692220/vto/plugin/data/",REACT_APP_BI_REPORT_URI:"https://logs.amyris.beautylabs.com/bi",REACT_APP_DEFAULT_MODEL_NAME_FULL_FACE_AND_EYES:"VTO-5-2",REACT_APP_ACCOUNT_SYSTEM_PASSWORD_REQUIRE_LOWERCASE:"true",REACT_APP_STOREFRONT_DOMAIN:"www.roseinc.com",REACT_APP_ACCOUNT_SYSTEM_PASSWORD_REQUIRE_UPPERCASE:"true",REACT_APP_ACCOUNT_PAGE_NAME:"myaccount",REACT_APP_VERSION:"0.0.1",REACT_APP_DEFAULT_MODEL_NAME_FULL_FACE_AND_MOUTH:"VTO-5-1",REACT_APP_CDN_ROOT:"https://cdn.roseinc.beautylabs.com/production/132459692220",REACT_APP_TEXTURE_URI_PREFIX:"https://cdn.roseinc.beautylabs.com/production/vto/textures/",REACT_APP_LIVE_SHOPPING_BACKEND_BASE_URI:"https://liveshopping.amyris.beautylabs.com/api/roseinc",REACT_APP_ACCOUNT_SYSTEM_PASSWORD_MIN_LEN:"8"}.REACT_APP_QUESTIONNAIRE_PRINT_DEBUG&&(console.log("Using settings: ".concat(o," (").concat(this.state.settings[o].name,")")),c=new RegExp("^LX [0-9][0-9][0-9]$"),l=new RegExp("^[0-9]{1,2}[CNW]$"),u=new RegExp("^[0-9][0-9][0-9]$"),this.state.settings[o].imageData.forEach((function(e){c.test(e.recommendedConcealer)||console.error('concealer value "'+e.recommendedConcealer+'" failed regex check on face id',e.id),l.test(e.recommendedFoundation)||console.error('foundation value "'+e.recommendedFoundation+'" failed regex check on face id',e.id),u.test(e.recommendedSerum)||console.error('serum value "'+e.recommendedSerum+'" failed regex check on face id',e.id)}))),this.handleUpdateDataSets(o),d=document.getElementsByClassName("page--default")[0],this.headerPadding=d.style.padding,d.style.padding="0",this.setState({activeComponent:"intro"}),Ne.Z.instance.markUserAsEngaged(),_=(0,we.m)(window.location.search),void 0!==(m=_.undertone)?(-1===(E=parseInt(m))||E>=0&&E<=2)&&(p=this.state.settings[o],A=p.textQuestions,null!=(f=A.find((function(e){return 0===e.sort})))&&f.undertoneQuestion&&void 0!==(P=-1===E?f.answers.find((function(e){var t;return void 0===(null===(t=e.payload)||void 0===t?void 0:t.warmth)})):f.answers.find((function(e){var t;return(null===(t=e.payload)||void 0===t?void 0:t.warmth)===E})))&&(F.ZP.logShadeFinderStarted({settings:this.state.settings[o].name}),this.handleResetToCategory("questions"),this.handleUpdateAnswers(P.id,"next",{darkness:null!==(h=null===(v=P.payload)||void 0===v?void 0:v.darkness)&&void 0!==h?h:0,warmth:null!==(R=null===(C=P.payload)||void 0===C?void 0:C.warmth)&&void 0!==R?R:0},void 0,void 0),-1!==E?this.setState({indexOfQuestion:2}):this.setState({indexOfQuestion:1}))):void 0!==_["skip-intro"]&&(F.ZP.logShadeFinderStarted({settings:this.state.settings[o].name}),this.handleResetToCategory("questions"));case 23:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"getAverageDarknessFromImageAnswers",value:function(e){var t=0,n=0;if(e.forEach((function(e){void 0!==e.payload.darkness&&(t+=e.payload.darkness,n++)})),"true"==={NODE_ENV:"production",REACT_APP_MODEL_URI_PREFIX:"https://cdn.roseinc.beautylabs.com/production/132459692220/vto/models/",REACT_APP_SKIN_TONE_API:"https://skintone.roseinc.beautylabs.com",REACT_APP_NAME:"rose-inc-web",REACT_APP_ERROR_REPORT_URL:"https://errors.amyris.beautylabs.com/errorReport",REACT_APP_DEFAULT_MODEL_NAME_EYEBROWS:"FUTest-Brows-6",REACT_APP_ACCOUNT_SYSTEM_PASSWORD_REQUIRE_NUMBERS:"true",REACT_APP_BI_ACCOUNT_APP_NAME:"account",REACT_APP_PLUGIN_BASE:"https://cdn.roseinc.beautylabs.com/production/132459692220/vto/plugin/",REACT_APP_BI_APP_NAME:"roseinc_web",REACT_APP_ACCOUNT_NAMESPACE:"roseinc",REACT_APP_BI_LIVESHOPPING_APP_NAME:"liveshopping",REACT_APP_COMMIT_HASH:"cd7b583f591f3aa5f0b8067f9bb0c2bb2fe804eb",REACT_APP_STOREFRONT_API_KEY:"f1c1eba5583bb760c097cba85a0b1a51",REACT_APP_ACCOUNT_BACKEND_BASE_URI:"https://account.amyris.beautylabs.com/api/consumer/roseinc",REACT_APP_LIVESHOPPING_NAMESPACE:"roseinc",REACT_APP_ACCOUNT_SYSTEM_PASSWORD_REQUIRE_SYMBOLS:"true",REACT_APP_FUSIONFS_URI_PREFIX:"https://cdn.roseinc.beautylabs.com/production/132459692220/vto/plugin/data/",REACT_APP_BI_REPORT_URI:"https://logs.amyris.beautylabs.com/bi",REACT_APP_DEFAULT_MODEL_NAME_FULL_FACE_AND_EYES:"VTO-5-2",REACT_APP_ACCOUNT_SYSTEM_PASSWORD_REQUIRE_LOWERCASE:"true",REACT_APP_STOREFRONT_DOMAIN:"www.roseinc.com",REACT_APP_ACCOUNT_SYSTEM_PASSWORD_REQUIRE_UPPERCASE:"true",REACT_APP_ACCOUNT_PAGE_NAME:"myaccount",REACT_APP_VERSION:"0.0.1",REACT_APP_DEFAULT_MODEL_NAME_FULL_FACE_AND_MOUTH:"VTO-5-1",REACT_APP_CDN_ROOT:"https://cdn.roseinc.beautylabs.com/production/132459692220",REACT_APP_TEXTURE_URI_PREFIX:"https://cdn.roseinc.beautylabs.com/production/vto/textures/",REACT_APP_LIVE_SHOPPING_BACKEND_BASE_URI:"https://liveshopping.amyris.beautylabs.com/api/roseinc",REACT_APP_ACCOUNT_SYSTEM_PASSWORD_MIN_LEN:"8"}.REACT_APP_QUESTIONNAIRE_PRINT_DEBUG&&console.log("getAverageDarkness: sum:",t," # selected:",n),n>0)return t/n}},{key:"sortOfLastAnsweredQuestion",value:function(e,t,n){for(var r=e-1;r>=0;r--)if(t[r].answers.find((function(e){return n.has(e.id)})))return r}},{key:"render",value:function(){return null===this.state?null:r.createElement(Ge.Provider,{value:{questions:this.state.questions,images:this.state.images,answers:this.state.answers,chosenImages:this.state.chosenImages,darkness:this.state.darkness,warmth:this.state.warmth,skinToneAnalysisEventId:this.state.skinToneAnalysisEventId,selfieURL:this.state.selfieURL,recommendedConcealer:this.state.recommendedConcealer,recommendedSerum:this.state.recommendedSerum,recommendedFoundation:this.state.recommendedFoundation,activeComponent:this.state.activeComponent,activeSettings:this.state.activeSettings,indexOfQuestion:this.state.indexOfQuestion,setIndexOfQuestion:this.setIndexOfQuestion,handleCompleteCategory:this.handleCompleteCategory,handleResetToCategory:this.handleResetToCategory,handleUpdateAnswers:this.handleUpdateAnswers,handleUpdateSelfieURL:this.handleUpdateSelfieURL,handleGoToQuestionsLastQ:this.handleGoToQuestionsLastQ,handleGoOneScreenBack:this.handleGoOneScreenBack}},this.handleRender(this.state.activeComponent))}}])&&Le(t.prototype,n),a&&Le(t,a),u}(r.Component)},76909:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});n(47941),n(82526),n(41817),n(41539),n(32165),n(66992),n(78783),n(33948),n(47042),n(68309),n(91038);var r=n(67294),o=n(85518);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}const c=function(e){var t=e.mediaKey,n=s(e,["mediaKey"]),i=(0,r.useRef)(null),c=a((0,r.useState)(!1),2),l=c[0],u=c[1],d=a((0,r.useState)("bl-sf-shade-finder-media-control-pause--playing"),2),_=d[0],m=d[1],E=window.shopData?window.shopData.shadeFinderMedia[t]:void 0;return(0,r.useEffect)((function(){null!==i.current&&(l?(i.current.pause(),m("bl-sf-shade-finder-media-control-pause--paused")):(i.current.play(),m("bl-sf-shade-finder-media-control-pause--playing")))}),[l,i]),r.createElement("div",n,E&&E.isImage&&r.createElement("img",{className:"bl-sf-shade-finder-media bl-sf-shade-finder-media--image".concat(o.gn?" ios":""),src:E.imgScr,alt:E.altText}),E&&E.isVideo&&E.sources&&r.createElement("div",{className:"bl-sf-shade-finder-media-wrapper--video"},r.createElement("video",{className:"bl-sf-shade-finder-media bl-sf-shade-finder-media--video",autoPlay:!0,loop:!0,controls:!1,muted:!0,ref:i},r.createElement("source",{src:E.sources[0].url,type:E.sources[0].mimeType})),r.createElement("div",{className:"bl-sf-shade-finder-media-controls"},r.createElement("button",{type:"button",onClick:function(){return u(!l)},className:_},r.createElement("span",null)))))}},95083:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});n(47941),n(82526),n(57327),n(38880),n(54747),n(49337);var r=n(67294),o=n(2492),a=n(84179),i=n(58905);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const u=function(e){var t=e.title,n=e.smallText,s=e.onSmallTextClick,l=e.smallTextAvailable,u=void 0===l||l,d=e.showThis,_=e.h2ClassName,m=void 0===_?"":_,E=e.showSmallText,p=void 0===E||E,A=e.hideMobileCloseButton,f="section-title__title "+m;return r.createElement(o.ZP,{timeout:100,appear:!0,in:d,unmountOnExit:!0,mountOnEnter:!0},(function(e){return r.createElement("div",{className:"section-title__wrapper",style:c(c({},a.h),a.v[e])},!0!==A&&r.createElement("div",{className:"section-title__mobile-only"},r.createElement("span",{onClick:u?s:void 0,className:u&&s?"section-title__smallText":"section-title__smallText unavailable"},n&&(0,i.Iu)(n))),r.createElement("div",{className:"section-title"},r.createElement("h1",{className:f},(0,i.Iu)(t)),p&&r.createElement("span",{onClick:u?s:void 0,className:u&&s?"section-title__smallText section-title__smallText--desktop-only":"section-title__smallText section-title__smallText--desktop-only unavailable"},n&&(0,i.Iu)(n))))}))}},84179:(e,t,n)=>{"use strict";n.d(t,{h:()=>r,v:()=>o});var r={transition:"opacity .6s ease-in-out",opacity:0},o={entering:{opacity:0},entered:{opacity:1},exiting:{opacity:1},exited:{opacity:0}}}}]);