(self.webpackChunkrose_inc_web=self.webpackChunkrose_inc_web||[]).push([[666],{23666:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>ge});var a=n(67294),r=n(8185),i=(n(21249),n(82526),n(41817),n(41539),n(32165),n(66992),n(78783),n(33948),n(47042),n(68309),n(91038),n(20185)),l=n(54703),o=n(34994),s=n(58905),c=n(93970);function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(a=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function m(){var e=(0,o.kq)(),t=u((0,a.useState)(void 0),2),n=t[0],r=t[1],v=(0,c.XM)();(0,a.useEffect)((function(){e&&i.sO.getSavedShows(e).catch((function(e){console.error("getSavedShows error",e)})).then((function(e){e&&v.current&&r(e)}))}),[e,v]);var m=void 0!==n?null==n?void 0:n.map((function(e){return a.createElement(l._,{show:e})})):(0,s.Iu)("livestream.saved_shows.no_shows");return a.createElement("div",{className:"savedShows"},a.createElement("h1",null,(0,s.Iu)("livestream.saved_shows.title")),m)}n(74916),n(23123);var d=n(48764),g=n(96761),p=n.n(g),h=n(96974),f=n(23985),_=n(3093),E=n(18803),y=n(97748),b=n(60282),w=n(57154);const C=n.p+"dd8129ec30194379b31b79c6e781359f.svg";var A=n(51120);function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(a=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function N(){var e,t,n,r,l=(0,o.kq)(),u=(0,f.C)(),v=S((0,a.useState)(!1),2),m=v[0],g=v[1],I=S((0,a.useState)(void 0),2),N=I[0],D=I[1],k=S((0,a.useState)(void 0),2),L=k[0],B=k[1],P=(0,b.FT)(),T=(0,A.L)(),F=(0,c.XM)(),H=S((0,i.av)("loading"===u?void 0:u.displayName,"loading"===u||null===(e=u.influencer)||void 0===e?void 0:e.handle,160),2),K=H[0],U=H[1];if("loading"===u)return a.createElement(w.g,{alt:"accessibility.loading"});if(!l)return a.createElement(h.Fg,{to:"/pages/myaccount?operation=signIn"});var j=function(){D(void 0),g(!1)};return a.createElement("div",{className:"liveshopping-personal-details"},a.createElement(y.Z,{title:"livestream.personal_details.title"}),T.profilePictureEnabled?a.createElement("div",{className:"liveshopping-image-uploader"},m?a.createElement("div",null,a.createElement(p(),{width:256,height:256,onCrop:function(e){D(e)},onClose:function(){return j()},exportSize:160,exportAsSquare:!0}),a.createElement("button",{type:"button",className:"bl-core-button bl-core-button--cta",onClick:function(){if(N){var e=d.Buffer.from(N.split(",")[1],"base64");e&&i.sO.setProfilePicture(l,e).then((function(e){console.log("setProfilePicture response:",e),F.current&&(g(!1),B(N),D(void 0)),U(String(Date.now()))}))}},disabled:void 0===N},(0,s.Iu)("livestream.personal_details.image_save")),a.createElement("button",{type:"button",className:"bl-core-button",onClick:function(){j()}},(0,s.Iu)("livestream.personal_details.image_cancel"))):K?a.createElement("div",{className:"liveshopping-image-uploader__viewer",onClick:function(){return g(!m)}},a.createElement(_.Y,{pictureUrl:null!==(t=null!=N?N:L)&&void 0!==t?t:K,pictureSize:160,handle:null===(n=u.influencer)||void 0===n?void 0:n.handle}),!m&&a.createElement("img",{className:"liveshopping-image-uploader__viewer-edit-icon",src:C,alt:(0,s.Iu)("livestream.personal_details.image_edit"),onClick:function(){return g(!0)}})):null):null,a.createElement("div",{id:"form"},a.createElement(b.H4,{id:"displayName",state:P,label:"livestream.personal_details.display_name",onCheckValid:function(e){return(0,E.tZ)(e)},onSaveValue:function(e){return(0,E.mq)(l,u,e)},defaultValue:null===(r=u.displayName)||void 0===r?void 0:r.baseName,showSaveButton:!0,inputProps:{maxLength:i.sO.MAX_DISPLAYNAME_LENGTH}})),a.createElement(O,{user:l}))}function O(e){var t=e.user,n=[];return i.sO.isAdmin(t)&&n.push((0,s.Iu)("livestream.permissions.admin")),i.sO.isInfluencer(t)&&n.push((0,s.Iu)("livestream.permissions.influencer")),i.sO.isModerator(t)&&n.push((0,s.Iu)("livestream.permissions.moderator")),0===n.length?null:a.createElement("div",{className:"liveshopping-permissions"},a.createElement("h1",null,(0,s.Iu)("livestream.permissions.title")),a.createElement("ul",null,n.map((function(e){return a.createElement("li",{key:e},e)}))))}function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(a=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function L(){var e=(0,o.kq)(),t=D((0,a.useState)(void 0),2),n=t[0],r=t[1],l=(0,c.XM)();(0,a.useEffect)((function(){e&&i.sO.getFollowedInfluencers(e).catch((function(e){console.error("getFollowedInfluencers error",e)})).then((function(e){e&&l.current&&r(e)}))}),[e,l]);var u=void 0===n?a.createElement(w.g,{alt:"accessibility.loading"}):n.length>0?n.map((function(e,t){return e.handle?a.createElement(_.Y,{key:t,handle:e.handle,showName:!0,link:!0}):null})):a.createElement(a.Fragment,null,a.createElement("p",null,(0,s.Iu)("livestream.following.not_following")));return a.createElement("div",{className:"liveshopping-following"},a.createElement(y.Z,{title:"livestream.following.title"}),u)}n(64765),n(39714),n(92222),n(56977);var B=n(59010),P=n(76581),T=n(65503),F=n(18441),H=n(36334),K=n(74652),U=n(66746),j=n(62783),M=n(99490);function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(a=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var R,V=5e3,Z=480,q=852,X=720,Q=1280,W=1080,$=1920,Y={1.78:"16:9 landscape",.56:"16:9 portrait"};function z(){var e=(0,o.kq)(),t=(0,f.C)();function n(e){return a.createElement("div",{className:"liveshopping-channel-preview"},a.createElement(y.Z,{title:"channel_preview.title"}),e)}var r=(0,h.TH)();return e?i.sO.isInfluencer(e)?"loading"===t?n(a.createElement(w.g,{alt:"accessibility.loading"})):t.influencer?n(a.createElement(a.Fragment,null,a.createElement(le,{influencer:t.influencer}),a.createElement(ne,null))):a.createElement(h.Fg,{to:"/account"}):a.createElement(h.Fg,{to:"/account"}):a.createElement(h.Fg,{to:"/pages/myaccount?operation=signIn&return_url=".concat(encodeURIComponent(r.pathname+r.search))})}!function(e){e[e.GOOD=0]="GOOD",e[e.ACCEPTABLE=1]="ACCEPTABLE",e[e.BAD=2]="BAD"}(R||(R={}));var J,ee,te={0:(0,s.Iu)("channel_preview.rating_title.good"),1:(0,s.Iu)("channel_preview.rating_title.acceptable"),2:(0,s.Iu)("channel_preview.rating_title.bad")};function ne(){var e,t,n,r,l,u,v,m,d,g,p,h,_,E,y,b=(0,o.kq)(),w=(0,f.C)(),C=G((0,a.useState)("loading"),2),A=C[0],S=C[1],I=G((0,c.KS)(0),2),N=I[0],O=I[1],D=(0,c.XM)();function k(e){var t=e.videoWidth,n=e.videoHeight;if(t&&n){if(t===W&&n===$||t===$&&n===W)return J.FULL_HD;if(t===X&&n===Q||t===Q&&n===X)return J.HD;if(t===Z&&n===q||t===Z&&n===q)return J.SD}}function L(e){if(e.videoWidth&&e.videoHeight&&e.targetBitrate&&e.targetFramerate)return e.targetBitrate/(e.videoWidth*e.videoHeight*e.targetFramerate)}(0,a.useEffect)((function(){N||(O(V),b&&"loading"!==w&&w.influencer&&i.sO.getActiveStreamStatus(b).then((function(e){D.current&&(S(e),O(V))})).catch((function(e){D.current&&(e instanceof T.z?404===e.response.status?S("not online"):(console.error("Failed to fetch active stream status",e),S("error")):(H.Z.instance.report(e),S("error")),O(V))})))}),[b,w,N,O,D]);var B=(0,a.useCallback)((function(e){if("loading"!==A&&"not online"!==A&&"error"!==A&&A.ingestConfiguration.video){var t=k(A.ingestConfiguration.video),n=L(A.ingestConfiguration.video);if(void 0!==n)return n>=.1?{rating:R.GOOD}:{rating:R.BAD,note:"channel_preview.hint.bits_per_pixel"};var a={rating:R.ACCEPTABLE};return t===J.FULL_HD||void 0===t?a=e>=65e5?{rating:R.GOOD}:{rating:R.BAD}:t===J.HD?a=e<=45e5?{rating:R.GOOD}:{rating:R.BAD}:t===J.SD&&(a=e<=15e5?{rating:R.GOOD}:{rating:R.BAD}),a}}),[A]),P=(0,a.useCallback)((function(e){if("loading"!==A&&"not online"!==A&&"error"!==A&&A.ingestConfiguration.video){var t=k(A.ingestConfiguration.video),n={rating:R.ACCEPTABLE};return t===J.FULL_HD||t===J.HD?n=30===e||60===e?{rating:R.GOOD}:e>30&&e<60?{rating:R.ACCEPTABLE}:{rating:R.BAD}:t===J.SD&&(n=30===e?{rating:R.GOOD}:{rating:R.BAD}),n}}),[A]),F=(0,a.useCallback)((function(){if("loading"!==A&&"not online"!==A&&"error"!==A&&A.ingestConfiguration.video){var e=k(A.ingestConfiguration.video),t=function(e){var t=e.videoWidth,n=e.videoHeight;if(t&&n)return n>t?ee.PORTRAIT:t>n?ee.LANDSCAPE:ee.SQUARE}(A.ingestConfiguration.video),n={rating:R.ACCEPTABLE};return t===ee.SQUARE||t===ee.LANDSCAPE?n={rating:R.BAD}:e===J.SD?n={rating:R.ACCEPTABLE}:e!==J.HD&&e!==J.FULL_HD||(n={rating:R.GOOD}),n}}),[A]),K=(0,a.useCallback)((function(e){return"number"!=typeof e?e:e>1e3?e/1e3+"k":e.toString()}),[]),U=(0,j.ZA)("loading"!==A&&"not online"!==A&&"error"!==A?Date.parse(A.startTime):0,1e3),x=M.nL.fromObject({seconds:U}),Y=x.as("days")>=1?"days":x.as("hours")>=1?"hours":x.as("minutes")>=1?"minutes":"seconds";return a.createElement("div",{className:"liveshopping-channel-status"},a.createElement("div",{className:"liveshopping-channel-status-group"},a.createElement("div",{className:"liveshopping-channel-status-group__name"},(0,s.Iu)("channel_preview.stream_status.header")),a.createElement("div",{className:"liveshopping-channel-status-group__body"},"loading"===A&&a.createElement(ie,{translationKey:"channel_preview.stream_status.health",value:(0,s.Iu)("channel_preview.stream_status.loading")}),"not online"===A&&a.createElement(ie,{translationKey:"channel_preview.stream_status.health",value:(0,s.Iu)("channel_preview.stream_status.not_online"),rating:{rating:R.BAD}}),"error"===A&&a.createElement(ie,{translationKey:"channel_preview.stream_status.health",value:(0,s.Iu)("channel_preview.stream_status.error"),rating:{rating:R.BAD}}),"loading"!==A&&"not online"!==A&&"error"!==A&&a.createElement(a.Fragment,null,a.createElement(ie,{translationKey:"channel_preview.stream_status.health",value:A.health,ratingCallback:function(e){return"HEALTHY"===e?{rating:R.GOOD}:{rating:R.BAD}}}),a.createElement(ie,{translationKey:"channel_preview.stream_status.uptime",value:x.toFormat((0,s.Iu)("livestream.schedule.countdown_luxon_format_with_".concat(Y))),note:"".concat((0,s.Iu)("channel_preview.stream_status.started_at")," ").concat(A.startTime)})))),"loading"!==A&&"not online"!==A&&"error"!==A&&a.createElement(a.Fragment,null,a.createElement("div",{className:"liveshopping-channel-status-group"},a.createElement("div",{className:"liveshopping-channel-status-group__name"},(0,s.Iu)("channel_preview.stream_status.audio_config.header")),a.createElement("div",{className:"liveshopping-channel-status-group__body"},a.createElement(ie,{translationKey:"channel_preview.stream_status.audio_config.target_bitrate",value:null===(e=A.ingestConfiguration.audio)||void 0===e?void 0:e.targetBitrate,displayValueCallback:K,unitKey:"channel_preview.unit.bitrate",ratingCallback:function(e){return e>=96e3&&e<=32e4?{rating:R.GOOD}:{rating:R.BAD}}}),a.createElement(ie,{translationKey:"channel_preview.stream_status.audio_config.sample_rate",value:null===(t=A.ingestConfiguration.audio)||void 0===t?void 0:t.sampleRate,displayValueCallback:K,unitKey:"channel_preview.unit.sample_rate",ratingCallback:function(e){return 44100===e||48e3===e?{rating:R.GOOD}:{rating:R.BAD}}}),a.createElement(ie,{translationKey:"channel_preview.stream_status.audio_config.channels",value:null===(n=A.ingestConfiguration.audio)||void 0===n?void 0:n.channels,ratingCallback:function(e){return 2===e?{rating:R.GOOD}:1===e?{rating:R.ACCEPTABLE}:{rating:R.BAD}}}),a.createElement(ie,{translationKey:"channel_preview.stream_status.audio_config.codec",value:null===(r=A.ingestConfiguration.audio)||void 0===r?void 0:r.codec}))),a.createElement("div",{className:"liveshopping-channel-status-group"},a.createElement("div",{className:"liveshopping-channel-status-group__name"},(0,s.Iu)("channel_preview.stream_status.video_config.header")),a.createElement("div",{className:"liveshopping-channel-status-group__body"},a.createElement(ie,{translationKey:"channel_preview.stream_status.video_config.target_bitrate",value:null===(l=A.ingestConfiguration.video)||void 0===l?void 0:l.targetBitrate,displayValueCallback:K,unitKey:"channel_preview.unit.bitrate",ratingCallback:B,note:A.ingestConfiguration.video&&(null===(u=L(A.ingestConfiguration.video))||void 0===u?void 0:u.toFixed(2))+" "+(0,s.Iu)("channel_preview.unit.bits_per_pixel")}),a.createElement(ie,{translationKey:"channel_preview.stream_status.video_config.target_framerate",value:null===(v=A.ingestConfiguration.video)||void 0===v?void 0:v.targetFramerate,unitKey:"channel_preview.unit.framerate",ratingCallback:P}),a.createElement(ae,{translationKey:"channel_preview.stream_status.video_config.resolution",width:null===(m=A.ingestConfiguration.video)||void 0===m?void 0:m.videoWidth,height:null===(d=A.ingestConfiguration.video)||void 0===d?void 0:d.videoHeight,ratingCallback:F}),a.createElement(re,{translationKey:"channel_preview.stream_status.video_config.aspect",width:null===(g=A.ingestConfiguration.video)||void 0===g?void 0:g.videoWidth,height:null===(p=A.ingestConfiguration.video)||void 0===p?void 0:p.videoHeight}),a.createElement(ie,{translationKey:"channel_preview.stream_status.video_config.avc_profile",value:null===(h=A.ingestConfiguration.video)||void 0===h?void 0:h.avcProfile,ratingCallback:function(e){return"Main"===e?{rating:R.GOOD}:"High"===e?{rating:R.ACCEPTABLE}:{rating:R.BAD}}}),a.createElement(ie,{translationKey:"channel_preview.stream_status.video_config.avc_level",value:null===(_=A.ingestConfiguration.video)||void 0===_?void 0:_.avcLevel}),a.createElement(ie,{translationKey:"channel_preview.stream_status.video_config.codec",value:null===(E=A.ingestConfiguration.video)||void 0===E?void 0:E.codec}),a.createElement(ie,{translationKey:"channel_preview.stream_status.video_config.encoder",value:null===(y=A.ingestConfiguration.video)||void 0===y?void 0:y.encoder})))),a.createElement("div",{className:"liveshopping-channel-status-group"},a.createElement("div",{className:"liveshopping-channel-status-group__name liveshopping-channel-status-group__name--legend"},(0,s.Iu)("channel_preview.legend.title")),a.createElement("div",{className:"liveshopping-channel-status-group__body"},a.createElement("div",{className:"liveshopping-channel-status-element liveshopping-channel-status-element--legend liveshopping-channel-status-element--good"},(0,s.Iu)("channel_preview.legend.good"),a.createElement("div",{className:"liveshopping-channel-status-element__status-title"},te[R.GOOD])),a.createElement("div",{className:"liveshopping-channel-status-element liveshopping-channel-status-element--legend liveshopping-channel-status-element--acceptable"},(0,s.Iu)("channel_preview.legend.acceptable"),a.createElement("div",{className:"liveshopping-channel-status-element__status-title"},te[R.ACCEPTABLE])),a.createElement("div",{className:"liveshopping-channel-status-element liveshopping-channel-status-element--legend liveshopping-channel-status-element--bad"},(0,s.Iu)("channel_preview.legend.bad"),a.createElement("div",{className:"liveshopping-channel-status-element__status-title"},te[R.BAD])),a.createElement("div",{className:"liveshopping-channel-status-element liveshopping-channel-status-element--legend"},(0,s.Iu)("channel_preview.legend.information")))),a.createElement("p",{dangerouslySetInnerHTML:(0,s.yH)("channel_preview.config_instructions_html")}),a.createElement("p",null,(0,s.Iu)("channel_preview.all_channels_standard")),a.createElement("p",null,(0,s.Iu)("channel_preview.latency_warning")))}function ae(e){var t=e.width,n=e.height;return t&&n?a.createElement(ie,{translationKey:e.translationKey,value:"".concat(t," x ").concat(n),ratingCallback:e.ratingCallback}):null}function re(e){var t=e.width,n=e.height;if(!t||!n)return null;var r=t/n,i=r>.50625&&r<.61875?{rating:R.GOOD}:r>.45&&r<.675?{rating:R.ACCEPTABLE}:{rating:R.BAD},l=r.toFixed(2);return a.createElement(ie,{translationKey:e.translationKey,value:l+":1",rating:i,note:Y[l]})}function ie(e){if(!e.value)return null;var t,n=e.ratingCallback?e.ratingCallback(e.value):void 0,r=null!=n?n:e.rating,i=e.displayValueCallback?e.displayValueCallback(e.value):e.value;switch(null==r?void 0:r.rating){case R.GOOD:t="liveshopping-channel-status-element--good";break;case R.ACCEPTABLE:t="liveshopping-channel-status-element--acceptable";break;case R.BAD:t="liveshopping-channel-status-element--bad";break;default:t=""}return a.createElement("div",{className:"liveshopping-channel-status-element ".concat(t)},a.createElement("div",{className:"liveshopping-channel-status-element__key"},(0,s.Iu)(e.translationKey)),a.createElement("div",{className:"liveshopping-channel-status-element__value"},a.createElement("span",null,i)," ",e.unitKey&&(0,s.Iu)(e.unitKey)),e.note&&a.createElement("div",{className:"liveshopping-channel-status-element__note"},e.note),r&&a.createElement(a.Fragment,null,a.createElement("div",{className:"liveshopping-channel-status-element__status-title"},te[r.rating]),r.note&&a.createElement("div",{className:"liveshopping-channel-status-element__rating"},(0,s.Iu)(r.note))))}function le(e){var t=e.influencer.livePlaybackUrl,n=(0,P.a)();return a.createElement("div",{className:"liveshopping-live-wrapper liveshopping-live-wrapper--preview"},a.createElement("div",{className:"liveshopping-channel-preview__guide"},a.createElement("div",{className:"liveshopping-live__top"},a.createElement("div",{className:"liveshopping-live__top-bar"},a.createElement("div",{className:"liveshopping-live__top-bar-right liveshopping-live__top-bar-right--owner-pov"},a.createElement("div",{className:"liveshopping-live-label"},(0,s.Iu)("channel_preview.indicator"))))),a.createElement("div",{className:"liveshopping-live__bottom"},void 0!==n.isMuted&&a.createElement("button",{type:"button",className:"liveshopping-live-bottom-button",onClick:function(){n.setMuted(!n.isMuted)}},a.createElement("div",{className:"liveshopping-live-mute-wrapper"},a.createElement(F.M,{src:n.isMuted?K.Z:U.Z,alt:(0,s.Iu)(n.isMuted?"livestream.watch.audio_unmute":"livestream.watch.audio_mute")}))))),B.isPlayerSupported?a.createElement(P.Y,{control:n,streamUrl:t,isLive:!0,onQualityChanged:e.onQualityChanged,showErrors:!0}):a.createElement("p",{className:"error"},(0,s.Iu)("livestream.watch.player_not_supported")))}!function(e){e[e.SD=0]="SD",e[e.HD=1]="HD",e[e.FULL_HD=2]="FULL_HD"}(J||(J={})),function(e){e[e.PORTRAIT=0]="PORTRAIT",e[e.SQUARE=1]="SQUARE",e[e.LANDSCAPE=2]="LANDSCAPE"}(ee||(ee={}));n(88674),n(17727);function oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(a=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return se(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return se(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function ce(){var e=(0,c.XM)(),t=(0,o.kq)(),n=(0,f.C)(),r=oe((0,a.useState)(void 0),2),l=r[0],u=r[1],v=oe((0,a.useState)(!1),2),m=v[0],d=v[1],g=oe((0,a.useState)(!1),2),p=g[0],_=g[1],C=(0,b.FT)(),A=(0,b.FT)(),S=(0,a.useRef)(null),I=(0,a.useRef)(null);if((0,a.useEffect)((function(){t&&m&&!l&&i.sO.getStreamKey(t).then((function(t){e.current&&u(t.streamKey)}))}),[e,m,l,t]),"loading"===n)return a.createElement(w.g,{alt:"accessibility.loading"});if(!t)return a.createElement(h.Fg,{to:"/pages/myaccount?operation=signIn"});if(!n.influencer)return a.createElement(o.Bj,{to:"/account",mode:"replace"});return a.createElement("div",{className:"liveshopping-personal-details"},a.createElement(y.Z,{title:"livestream.channel_settings.title"}),a.createElement("div",{id:"form"},a.createElement(b.H4,{id:"handle",ref:S,state:C,label:"livestream.channel_settings.handle",defaultValue:n.influencer.handle,onCheckValid:function(e){return(0,E.jB)(t,e)},onSaveValue:function(e){return(0,E.TJ)(t,n,e)},inputProps:{maxLength:i.sO.MAX_HANDLE_LENGTH}}),a.createElement(b.H4,{id:"bio",ref:I,state:A,label:"livestream.channel_settings.bio",defaultValue:n.influencer.bio,onSaveValue:function(e){return i.sO.setBioText(t,e).catch((function(e){var t,n,a=null===(t=i.sO.getValidationErrorResponse(e))||void 0===t||null===(n=t.bio[0])||void 0===n?void 0:n.errorCode.toLowerCase();return{result:!1,message:void 0!==a?(0,s.cy)("livestream.errors.bio",a):"livestream.errors.handle.bio"}})).then((function(e){return e||{result:!0}}))},type:"textarea",showCharacterCount:!0,inputProps:{maxLength:i.sO.MAX_BIO_LENGTH}}),a.createElement("button",{type:"submit",className:"bl-core-button bl-core-button--cta",onClick:function(){var e,t;_(!0);var n=null===(e=S.current)||void 0===e?void 0:e.externalHandleSaveValue(),a=null===(t=I.current)||void 0===t?void 0:t.externalHandleSaveValue(),r=[];n&&r.push(n),a&&r.push(a),Promise.all(r).finally((function(){_(!1)}))},disabled:"VALID"!==C.validity||p},(0,s.Iu)("global.save"))),n.influencer.ingestUrl&&a.createElement("div",{className:"liveshopping-personal-details__stream-info"},a.createElement("h2",null,(0,s.Iu)("livestream.channel_settings.stream_info_title")),a.createElement("p",null,(0,s.Iu)("livestream.channel_settings.stream_info_hint")),a.createElement("h3",null,(0,s.Iu)("livestream.channel_settings.stream_info_url")),a.createElement("textarea",{readOnly:!0,className:"liveshopping-personal-details__ingest-details",value:n.influencer.ingestUrl}),a.createElement("button",{type:"button",className:"bl-core-button",onClick:function(){return d(!m)}},m?(0,s.Iu)("livestream.channel_settings.stream_info_hide"):(0,s.Iu)("livestream.channel_settings.stream_info_show")),m&&a.createElement("div",{className:"liveshopping-personal-details__stream-info-detail"},a.createElement("h3",null,(0,s.Iu)("livestream.channel_settings.stream_info_key")),l?a.createElement("textarea",{readOnly:!0,className:"liveshopping-personal-details__ingest-details",value:l}):a.createElement(w.g,{alt:"accessibility.loading"}))))}var ue=n(90487);function ve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(a=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return me(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return me(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function me(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function de(){var e=(0,c.XM)(),t=(0,o.kq)(),n=(0,f.C)(),r=ve((0,a.useState)("loading"),2),l=r[0],u=r[1],v=ve((0,c.KS)(0),2),m=v[0],d=v[1];(0,a.useEffect)((function(){var a;"loading"===n||"loading"!==l||m||(console.log("User profile",n),null!==(a=n.influencer)&&void 0!==a&&a.handle&&(d(5e3),i.sO.getShowsByInfluencerHandle(t,n.influencer.handle).then((function(t){return e.current&&u(t)})).catch((function(e){console.error("getSavedShows error",e)}))))}),[t,n,l,e,m,d]);var g=(0,h.TH)();if(!t)return a.createElement(h.Fg,{to:"/pages/myaccount?operation=signIn&return_url=".concat(encodeURIComponent(g.pathname+g.search))});if(!i.sO.isInfluencer(t))return a.createElement(h.Fg,{to:"/account"});function p(e){return a.createElement("div",{className:"liveshopping-livestream-list__wrapper"},a.createElement(y.Z,{title:"livestream.livestreams.title"}),e)}return"loading"===n?p(a.createElement(w.g,{alt:"accessibility.loading"})):n.influencer?n.influencer.handle?p(a.createElement(a.Fragment,null,a.createElement("p",null,a.createElement("a",{className:"liveshopping__schedule-event",href:"/pages/broadcast/"},(0,s.Iu)("livestream.livestreams.create"))),"loading"===l?a.createElement(w.g,{alt:"accessibility.loading"}):0===l.length?(0,s.Iu)("livestream.livestreams.no_shows"):a.createElement(ue.Z,{shows:l,displayCancelled:!0,edit:!0}))):a.createElement(h.Fg,{to:"/pages/myaccount?operation=onboard&targetPath=".concat(encodeURIComponent(g.pathname+g.search))}):a.createElement(h.Fg,{to:"/account"})}function ge(){switch((0,h.UO)().profilePage){case"livestreams":return a.createElement(de,null);case"channelSettings":return a.createElement(ce,null);case"channelPreview":return a.createElement(z,null);case"following":return a.createElement(L,null);case"profileDetails":return a.createElement(N,null);case"savedShows":return a.createElement(m,null);default:return window.location.href=r.Z.getShopifyAccountURL(),null}}},90487:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});n(69826),n(57327),n(65069),n(84944),n(21249);var a=n(67294),r=n(56931),i=n(20185),l=n(54703),o=n(58905),s=n(38242);const c=function(e){var t=e.shows,n=e.displayCancelled,c=e.featuredShortShowId,u=e.edit,v=e.upcomingPortal,m=e.previousPortal,d=(0,a.useRef)(!0),g=c?i.sO.shortStringToUuid(c):void 0,p=t.find((function(e){return e.id===g&&("PENDING"===e.state||"RUNNING"===e.state)})),h=t.filter((function(e){return e.id!==g})),f=h.filter((function(e){return"RUNNING"===e.state})),_=h.filter((function(e){return"PENDING"===e.state})),E=h.filter((function(e){return"ENDED"===e.state||n&&"CANCELLED"===e.state})).reverse(),y=function(e){return e.showLists.some((function(e){return e.length>0}))?a.createElement(a.Fragment,null,a.createElement("h2",{className:"liveshopping-livestream-list__heading"},(0,o.Iu)(e.headerKey)),a.createElement(r.BA,{className:"liveshopping-livestream-list",canClick:d},e.showLists.map((function(e){return e.map((function(e,t){return a.createElement(l._,{show:e,key:t,canClick:d,edit:u})}))})).flat())):null};return a.createElement(a.Fragment,null,a.createElement(s.q,{portal:v,renderInline:!0},a.createElement(y,{showLists:[f,_],headerKey:p?"livestream.list.additional_upcoming_lives":"livestream.list.upcoming_lives"})),a.createElement(s.q,{portal:m,renderInline:!0},a.createElement(y,{showLists:[E],headerKey:"livestream.list.previous_lives"})))}}}]);