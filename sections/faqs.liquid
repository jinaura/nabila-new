{% assign _section = section.settings %}

{% if localization.country.iso_code != 'GB' or request.design_mode == true %}

  <div class="container customer-service faqs">
      <div class="container--inner">
          <aside>
              <h1>{{_section.title}}</h1>
              <a href = "{{_section.link}}">{{_section.link_text}}</a>
          </aside>
          <div class="nav-links">
            {%- for block in section.blocks -%}
              {%- assign _block = block.settings -%}

              {%- case block.type -%}
                {%- when 'heading' -%}
                  <h2>{{_block.heading}}</h2>
                  <hr class="divider--end">
                {%- when 'question' -%}
                  <div class="subtitle__wrapper">
                    <h3 class="section__subtitle">{{_block.question}}</h3>
                    <svg class="icon-plus" xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22">
                      <g fill="none" fill-rule="evenodd">
                          <g fill-rule="nonzero" stroke="#919191">
                              <path d="M345 631c-5.523 0-10 4.477-10 10s4.477 10 10 10 10-4.477 10-10-4.477-10-10-10zm-.052 4.278c.136-.015.272.03.374.122.1.093.157.225.154.362v4.762h4.762c.172-.003.332.088.418.236.087.148.087.332 0 .48-.086.148-.246.239-.418.236h-4.762v4.762c.003.172-.088.332-.236.418-.148.087-.332.087-.48 0-.148-.086-.239-.246-.236-.418v-4.762h-4.762c-.17.008-.332-.075-.424-.219-.092-.143-.1-.324-.022-.476.078-.151.231-.25.401-.257H344.524v-4.762c-.005-.247.179-.457.424-.484z" transform="translate(-334 -630)"/>
                          </g>
                      </g>
                    </svg>
                  </div>
                  <div class="accordion__content not-shown">
                    {{_block.answer}}
                  </div>
                <hr class="divider--end">
              {%- endcase -%}
            {%- endfor -%}
          </div>
      </div>
  </div>

  <script>
    $('.customer-service.faqs .subtitle__wrapper').on('click', function () {
      const accordionContent = $(this).next('.accordion__content');
      if (accordionContent.hasClass('not-shown')) {
        accordionContent.removeClass('not-shown').addClass('collapsed');
        $(this).children('svg.icon-plus').replaceWith("<svg class='icon-minus' xmlns='http://www.w3.org/2000/svg' width='22' height='22' viewBox='0 0 22 22'><g fill='none' fill-rule='evenodd'><g fill-rule='nonzero' stroke='#919191'><g><path d='M325 0c-5.523 0-10 4.477-10 10s4.477 10 10 10 10-4.477 10-10-4.477-10-10-10zm.476 9.524h4.762c.172-.003.332.088.418.236.087.148.087.332 0 .48-.086.148-.246.239-.418.236H319.762c-.17.008-.332-.075-.424-.219-.092-.143-.1-.324-.022-.476.078-.151.231-.25.401-.257H325.476z' transform='translate(-334 -1649) translate(20 1650)'/></g></g></g></svg>");
        $(this).css('paddingBottom', '0.5rem');
      } else {
        accordionContent.removeClass('collapsed').addClass('not-shown');
        $(this).children('svg.icon-minus').replaceWith("<svg class='icon-plus' xmlns='http://www.w3.org/2000/svg' width='22' height='22' viewBox='0 0 22 22'><g fill='none' fill-rule='evenodd'><g fill-rule='nonzero' stroke='#919191'><path d='M345 631c-5.523 0-10 4.477-10 10s4.477 10 10 10 10-4.477 10-10-4.477-10-10-10zm-.052 4.278c.136-.015.272.03.374.122.1.093.157.225.154.362v4.762h4.762c.172-.003.332.088.418.236.087.148.087.332 0 .48-.086.148-.246.239-.418.236h-4.762v4.762c.003.172-.088.332-.236.418-.148.087-.332.087-.48 0-.148-.086-.239-.246-.236-.418v-4.762h-4.762c-.17.008-.332-.075-.424-.219-.092-.143-.1-.324-.022-.476.078-.151.231-.25.401-.257H344.524v-4.762c-.005-.247.179-.457.424-.484z' transform='translate(-334 -630)'/></g></g></svg>");
        $(this).css('paddingBottom', '30px');
      }
    });
  </script>

{% endif %}

{% schema %}
    {
    "name": "FAQs",
    "settings": [
    {
    "type": "text",
    "id": "title",
    "label": "Heading",
    "default": "FAQs"
    },
    {
      "type": "url",
      "id": "link",
      "label": "Back Home Link"
    },
    {
    "type": "text",
    "id": "link_text",
    "label": "Link Text",
    "default": "Customer service home"
    }
    ],
    "blocks": [
      {
        "type": "heading",
        "name": "Category Title",
        "settings": [
          {
            "type": "text",
            "id": "heading",
            "label": "Category Title"
          }
        ]
      },
      {
        "type": "question",
        "name": "Question",
        "settings": [
          {
            "type": "text",
            "id": "question",
            "label": "Question"
          },
          {
            "type": "richtext",
            "id": "answer",
            "label": "Answer"
          }
        ]
      }
    ]
  }
{% endschema %}
